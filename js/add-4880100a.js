import{_ as T,v as G,a as J,ak as Q,u as z,r as o,l as H,dg as K,cV as W,dh as X,o as g,c as P,g as m,w as p,b as $,d as R,e as n,h as k,t as r,cE as Y,s as Z,bP as ee,f as N,i as ae,F as te,m as se}from"./index-8f557042.js";/* empty css              */import{U as le,_ as oe}from"./index-e5c76592.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               */import{_ as ne}from"./icon4-883c0d48.js";import{x as re,y as me}from"./trade.api-de47551a.js";import{F as ue}from"./index-d7356a31.js";import{C as de}from"./index-9f432122.js";import{F as pe}from"./index-b13eb4a7.js";import{B as ie}from"./index-f30e4bd7.js";import"./index-1b600eb6.js";import"./index-cae364d9.js";import"./index-3e1fbb16.js";import"./index-158dc407.js";import"./use-id-df8c351b.js";const ce={class:"addPay pb-10"},_e={class:"pt-6 pb-2 ash"},ve={class:"pt-6 pb-2 ash"},fe={class:"pt-6 pb-2 ash"},he={class:"pt-6 pb-2 ash"},ge={class:"pt-6 pb-2 ash"},ye={class:"tips mx-4 mt-8 px-4 pt-4 pb-4"},Ve={class:"flex tip-title"},be={class:"pl-4 ash mt-2 text-24"},$e={class:"text-24 mt-20 ash px-4"},ke={class:"px-4 pt-6 mt-3"},Ne={__name:"add",setup(Ie){const{t:_,locale:I}=G.exports.useI18n();J(),Q();const U=z(),t=o(null);o(!1),o(!1);const v=o([]),l=o({name:"",remark:""}),y=o([]),V=o("");let i=o(""),b=o(""),f=o("");const C=e=>{console.log("failed",e)};o({}),H(async()=>{let e=JSON.parse(sessionStorage.getItem("editAdd"))||{};f.value=e.type||"",b.value=e.id||"",i.value=_(e.name)||"",f.value==="add"?(w(),D()):B()});const w=()=>{K({id:b.value,language:I.value}).then(e=>{t.value=e,F(t.value)})},D=()=>{W().then(e=>{l.value.name=e.name||""})},B=()=>{X({id:b.value,language:I.value}).then(e=>{t.value=e,F(t.value),S()})},F=e=>{let a=1;Object.keys(e).forEach(u=>{u.indexOf("paramName")!==-1&&t.value[u]&&t.value[u].length>0&&(f.value==="add"?v.value.push({["paramName"+a]:t.value[u],["param_value"+a]:""}):(v.value.push({["paramName"+a]:t.value["paramName"+a],["param_value"+a]:t.value["paramValue"+a]}),console.log(v)),a++)})},S=()=>{l.value.name=t.value.realName,l.value.remark=t.value.remark,y.value.push({url:x(t.value.qrcode),resURL:t.value.qrcode})},x=e=>{if(e)return e.indexOf("http")!==-1?e:`${Y}/wap/public/showimg!showImg.action?imagePath=`+e},E=e=>{e.status="uploading",e.message=_("uploading"),oe(e).then(a=>{V.value=a,e.status="success",e.message=_("uploadSuccess"),y.value=[e]}).catch(a=>{e.status="failed",e.message=_("uploadFailed")})},O=()=>{if(f.value==="add"){if(l.value.name==""){Z(_("\u8BF7\u8F93\u5165\u771F\u5B9E\u59D3\u540D"));return}const e=M("method_config_id");re(e).then(a=>{U.push("/payMentMethod/list")})}else{const e=M("id");me(e).then(a=>{U.push("/payMentMethod/list")})}},M=e=>{let a={};return e=="method_config_id"?a={method_config_id:t.value.uuid,real_name:l.value.name,remark:l.value.remark,qrcode:V.value||""}:a={id:t.value.uuid,method_config_id:t.value.methodConfigId,real_name:l.value.name,remark:l.value.remark,qrcode:V.value||""},v.value.forEach(u=>{Object.keys(u).forEach(d=>{d.indexOf("param_value")!==-1&&(a[d]=u[d])})}),a};return(e,a)=>{const u=ee,d=ue,h=de,q=le,j=pe,A=ie;return g(),P("div",ce,[m(u,null,{title:p(()=>[k(r(N(f)=="add"?e.$t("add"):e.$t("edit"))+" "+r(N(i)),1)]),_:1}),t.value?(g(),$(j,{key:0,onFailed:C},{default:p(()=>[m(h,{inset:""},{default:p(()=>[n("p",_e,r(e.$t("payConfig")),1),m(d,{class:"select-item disabledInput",modelValue:N(i),"onUpdate:modelValue":a[0]||(a[0]=s=>ae(i)?i.value=s:i=s),readonly:"",name:"pattern"},null,8,["modelValue"])]),_:1}),m(h,{inset:""},{default:p(()=>[n("p",ve,r(e.$t("realName")),1),m(d,{class:"select-item",modelValue:l.value.name,"onUpdate:modelValue":a[1]||(a[1]=s=>l.value.name=s),maxlength:10,name:"pattern",placeholder:e.$t("entryRealName")},null,8,["modelValue","placeholder"])]),_:1}),(g(!0),P(te,null,se(v.value,(s,c)=>(g(),$(h,{inset:"",key:c},{default:p(()=>[n("p",fe,r(e.$t(s[`paramName${parseInt(c)+1}`])),1),m(d,{class:"select-item",modelValue:s[`param_value${parseInt(c)+1}`],"onUpdate:modelValue":L=>s[`param_value${parseInt(c)+1}`]=L,name:s[`paramName${parseInt(c)+1}`],placeholder:s[`paramName${parseInt(c)+1}`]},null,8,["modelValue","onUpdate:modelValue","name","placeholder"])]),_:2},1024))),128)),t.value.methodType!==1?(g(),$(h,{key:0,inset:""},{default:p(()=>[n("p",he,r(e.$t("payQrcode")),1),m(q,{modelValue:y.value,"onUpdate:modelValue":a[2]||(a[2]=s=>y.value=s),"after-read":E,"max-count":1},null,8,["modelValue"])]),_:1})):R("",!0),m(h,{inset:""},{default:p(()=>[n("p",ge,r(e.$t("Remarksoptional")),1),m(d,{class:"select-item-textarea",modelValue:l.value.remark,"onUpdate:modelValue":a[3]||(a[3]=s=>l.value.remark=s),type:"textarea",name:"picker",clearable:"",placeholder:e.$t("Remarks")},null,8,["modelValue","placeholder"])]),_:1})]),_:1})):R("",!0),n("div",ye,[n("div",Ve,[a[4]||(a[4]=n("img",{class:"mr-2",src:ne},null,-1)),k(" "+r(e.$t("specialReminder")),1)]),n("div",be,r(e.$t("tips1")),1)]),n("div",$e,r(e.$t("tips12")),1),n("div",ke,[m(A,{class:"w-full",type:"primary",onClick:O},{default:p(()=>[k(r(e.$t("submit")),1)]),_:1})])])}}},Ge=T(Ne,[["__scopeId","data-v-0cace155"]]);export{Ge as default};
