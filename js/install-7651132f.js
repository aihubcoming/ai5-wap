import{aj as i,U as P,K as V,k as S,aH as E,aI as L,aJ as b,ai as N,aK as T,aa as M,aL as F,aM as G,X as D,u as U,aN as j,aO as B,aP as H,V as K,_ as O,aQ as Y,aR as A,aS as q,H as x,I as J}from"./installCanvasRenderer-26dffa88.js";var _={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},W=function(){function r(t){var a=this._condVal=M(t)?new RegExp(t):F(t)?t:null;if(a==null){var e="";i(e)}}return r.prototype.evaluate=function(t){var a=typeof t;return M(a)?this._condVal.test(t):G(a)?this._condVal.test(t+""):!1},r}(),X=function(){function r(){}return r.prototype.evaluate=function(){return this.value},r}(),z=function(){function r(){}return r.prototype.evaluate=function(){for(var t=this.children,a=0;a<t.length;a++)if(!t[a].evaluate())return!1;return!0},r}(),Q=function(){function r(){}return r.prototype.evaluate=function(){for(var t=this.children,a=0;a<t.length;a++)if(t[a].evaluate())return!0;return!1},r}(),$=function(){function r(){}return r.prototype.evaluate=function(){return!this.child.evaluate()},r}(),Z=function(){function r(){}return r.prototype.evaluate=function(){for(var t=!!this.valueParser,a=this.getValue,e=a(this.valueGetterParam),n=t?this.valueParser(e):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?n:e))return!1;return!0},r}();function I(r,t){if(r===!0||r===!1){var a=new X;return a.value=r,a}var e="";return w(r)||i(e),r.and?R("and",r,t):r.or?R("or",r,t):r.not?k(r,t):rr(r,t)}function R(r,t,a){var e=t[r],n="";P(e)||i(n),e.length||i(n);var o=r==="and"?new z:new Q;return o.children=V(e,function(m){return I(m,a)}),o.children.length||i(n),o}function k(r,t){var a=r.not,e="";w(a)||i(e);var n=new $;return n.child=I(a,t),n.child||i(e),n}function rr(r,t){for(var a="",e=t.prepareGetValue(r),n=[],o=S(r),m=r.parser,l=m?E(m):null,c=0;c<o.length;c++){var d=o[c];if(!(d==="parser"||t.valueGetterAttrMap.get(d))){var f=L(_,d)?_[d]:d,p=r[d],v=l?l(p):p,u=b(f,v)||f==="reg"&&new W(v);u||i(a),n.push(u)}}n.length||i(a);var s=new Z;return s.valueGetterParam=e,s.valueParser=l,s.getValue=t.getValue,s.subCondList=n,s}function w(r){return N(r)&&!T(r)}var tr=function(){function r(t,a){this._cond=I(t,a)}return r.prototype.evaluate=function(){return this._cond.evaluate()},r}();function ar(r,t){return new tr(r,t)}var er={type:"echarts:filter",transform:function(r){for(var t=r.upstream,a,e=ar(r.config,{valueGetterAttrMap:D({dimension:!0}),prepareGetValue:function(l){var c="",d=l.dimension;L(l,"dimension")||i(c);var f=t.getDimensionInfo(d);return f||i(c),{dimIdx:f.index}},getValue:function(l){return t.retrieveValueFromItem(a,l.dimIdx)}}),n=[],o=0,m=t.count();o<m;o++)a=t.getRawDataItem(o),e.evaluate()&&n.push(a);return{data:n}}},nr={type:"echarts:sort",transform:function(r){var t=r.upstream,a=r.config,e="",n=K(a);n.length||i(e);var o=[];U(n,function(f){var p=f.dimension,v=f.order,u=f.parser,s=f.incomparable;if(p==null&&i(e),v!=="asc"&&v!=="desc"&&i(e),s&&s!=="min"&&s!=="max"){var h="";i(h)}if(v!=="asc"&&v!=="desc"){var g="";i(g)}var C=t.getDimensionInfo(p);C||i(e);var y=u?E(u):null;u&&!y&&i(e),o.push({dimIdx:C.index,parser:y,comparator:new j(v,s)})});var m=t.sourceFormat;m!==B&&m!==H&&i(e);for(var l=[],c=0,d=t.count();c<d;c++)l.push(t.getRawDataItem(c));return l.sort(function(f,p){for(var v=0;v<o.length;v++){var u=o[v],s=t.retrieveValueFromItem(f,u.dimIdx),h=t.retrieveValueFromItem(p,u.dimIdx);u.parser&&(s=u.parser(s),h=u.parser(h));var g=u.comparator.evaluate(s,h);if(g!==0)return g}return 0}),{data:l}}};function ur(r){r.registerTransform(er),r.registerTransform(nr)}var ir=function(r){O(t,r);function t(){var a=r!==null&&r.apply(this,arguments)||this;return a.type="dataset",a}return t.prototype.init=function(a,e,n){r.prototype.init.call(this,a,e,n),this._sourceManager=new Y(this),A(this)},t.prototype.mergeOption=function(a,e){r.prototype.mergeOption.call(this,a,e),A(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:q},t}(x),or=function(r){O(t,r);function t(){var a=r!==null&&r.apply(this,arguments)||this;return a.type="dataset",a}return t.type="dataset",t}(J);function lr(r){r.registerComponentModel(ir),r.registerComponentView(or)}export{ur as a,lr as i};
