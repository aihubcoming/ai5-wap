import{_ as M,v as j,u as G,r as a,l as R,da as W,bI as X,o as h,c as y,g as r,w as P,e as c,t as i,aW as q,aX as z,f as A,h as v,F as H,d as $,s as n,db as J,bP as K}from"./index-8f557042.js";/* empty css              */import{E as B}from"./index-78c9b072.js";import{E as L}from"./index-9ffb6e0e.js";import{a as O}from"./login.api-c17cfeae.js";import{B as Q}from"./index-f30e4bd7.js";import"./index-66f0a028.js";import"./index-e320f5ce.js";const Y={class:"changePassword"},Z={class:"content"},ee={class:"label mt-14 textColor"},ae={class:"iptbox inputBackground"},te=["placeholder"],se={__name:"index",setup(oe){const{t:s}=j.exports.useI18n(),I=G(),d=a(""),g=a(""),m=a("");let t=a(1);const E=a([{name:s("phoneVerify"),type:1},{name:s("emailVerify"),type:2},{name:s("googleVerify"),type:3}]),w=a(!1),T=a(!1),V=a(!1),b=a(""),x=a(""),C=a(""),p=a(""),f=a(null),o=a(0);R(()=>{S(),_()});const k=e=>{t.value=e,t.value==3&&!T.value&&(console.log("sd"),n(s("bindGoogleTips"))),t.value==1?p.value=x.value:t.value==2?p.value=b.value:t.value==3&&(p.value=C.value)},N=()=>{if(d.value.length<6)return n(s("funpasswordTips")),!1;J({safeword:d.value,verifcode_type:t.value,verifcode:m.value}).then(e=>{n(s("changeSuccess")),setTimeout(()=>{I.push("/my/index")},1e3)})},S=async()=>{W({}).then(e=>{w.value=e.email_authority,T.value=e.google_auth_bind,V.value=e.phone_authority,b.value=e.email,x.value=e.phone,C.value=e.google_auth_secret})},U=()=>{if(t.value==1&&!V.value)return n(s("bindPhoneTips")),!1;if(t.value==2&&!w.value)return n(s("bindEmailTips")),!1;if(k(t.value),o.value>0)return!1;O({target:p.value}).then(e=>{n(s("sendSuccess")),o.value=30,f.value=setInterval(()=>{o.value>0?o.value=o.value-1:(o.value=0,_())},1e3)})},_=()=>{clearInterval(f.value),f.value=null};return X(()=>{_()}),(e,l)=>{const F=K,D=Q;return h(),y("div",Y,[r(F,null,{title:P(()=>[v(i(e.$t("changeFunsPassword")),1)]),_:1}),c("div",Z,[r(B,{label:e.$t("newPassword"),placeholderText:e.$t("entryPassword"),tips:e.$t("funsPasswordTips"),modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=u=>d.value=u),typeText:"password"},null,8,["label","placeholderText","tips","modelValue"]),r(B,{label:e.$t("sureNewPassword"),placeholderText:e.$t("entryPassword"),tips:e.$t("funsPasswordTips"),modelValue:g.value,"onUpdate:modelValue":l[1]||(l[1]=u=>g.value=u),typeText:"password"},null,8,["label","placeholderText","tips","modelValue"]),r(L,{class:"mb-42",list:E.value,onCheckedSelect:k},null,8,["list"]),c("p",ee,i(e.$t("verificationCode")),1),c("div",ae,[q(c("input",{class:"inputBackground textColor",type:"text",placeholder:e.$t("entryVerifyCode"),"onUpdate:modelValue":l[2]||(l[2]=u=>m.value=u)},null,8,te),[[z,m.value]]),A(t)!=3?(h(),y("span",{key:0,onClick:U},[v(i(e.$t("sendVerifyCode")),1),o.value?(h(),y(H,{key:0},[v(" ("+i(o.value)+")s",1)],64)):$("",!0)])):$("",!0)]),r(D,{class:"w-full",style:{"margin-top":"10px"},onClick:N,type:"primary"},{default:P(()=>[v(i(e.$t("sure")),1)]),_:1})])])}}},ve=M(se,[["__scopeId","data-v-40828c73"]]);export{ve as default};
