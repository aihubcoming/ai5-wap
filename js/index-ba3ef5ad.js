import{cd as ne,d5 as H,d6 as le,_ as re,a as ae,v as ie,u as ce,ak as Ae,r as n,l as de,bB as ue,bI as fe,bM as ve,o as l,c as r,e as s,g as C,f as p,h as B,t as i,w as Y,d as Q,aY as ge,F as U,m as pe,aW as me,aX as xe,n as _,s as R,am as ke,aq as he,cD as ye}from"./index-14d2cc83.js";import{U as Se,_ as Ie,s as we}from"./index-82793076.js";/* empty css               *//* empty css              */import{a as Ee,b as Ce}from"./im.api-ef4c8753.js";import{g as Be}from"./recharge.api-b7511e73.js";import{d as G}from"./dayjs.min-353269dd.js";import{d as Ue}from"./duration-163b1bf9.js";import{B as Re}from"./index-e68322b9.js";import"./index-0565517a.js";import"./index-21ab17c7.js";import"./index-691edc31.js";const Me="data:image/png;base64,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",je="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQHSURBVHgB7VnNbtNAEJ5dB0pbDuHGMW9AKi6RADWR4NzyBGmfAPfQRm0PuJeW0kp1j5xI3qAcEaCkAqTcMG/gRwiXNNDEy6yTOht7/ZfYphL5pCTOetb5Jjue+XYMMMcc/zcIZAxV1fJk6X6VMbYOwArIoGCfYGDiu0EovWD960v9eNeMcr3MHODEYWnpFf6kimzzIeYmvur64c5BiF02Dqi1owIoShMPCxAPJgwGlaDVSN0Bde9tEX+m6frXO2BZDSCkhZ8GOpcHhuEEgGEFqzheEGwDnUjVASl5yzqHXk/Tda0jncNXi1INnagKwwZ0uxXZHAVSgs8/v6kf1d60262e37z29y+d9rfPF6Wnzwk6UR4NP4Rc7jeOt9z2qTjgS/5wpx71Gpxs6dmLB3hYsgcIKZYeP3nndp5CwkiCvIO7dzS81k3Y5GFxccNtkqgDiZJH6NoWkmcNZ4Cxstsm2RUg8D4p8gIM54jSR+6TyTpgETFLJEEecW0IXwruszlIElZ/kyjKGhsMfmLebgWZqtsYbnTQCZUMA5oPSjWJOjAicx5mh/cKhhpsYBI0UWKs+NUEG5SKIWl6TkPGGJO3UYCF5WLIlHXniDHTfTJTB1zkOaGGfrzd8rXnVZmQ1ZvvKBvqbpvYIWSnSkbOMOABrq5eBi7/5Dwv+aPaRuAkReFyouBMsaxLt0msFXDyPMF8zMu8pLD4zItNfmvvFKU3aM4AaijZDR/ZAWmR6qOaDJ8Xn/z+aZWBpQtzTC4AZbaRHPCtsCc7Rsi86cgzqy4Mceld8QvVUAemlQeJkQeYfkNzK8gfBq+yrwPDbWDux20mzyF1YLQBR/IT2iMV8ur+SRntmsJQZPIc8ntgefk1iOQZ20qDvA3LKgvfYpHn8Dhghw5jqkDkAInoQReZmjyHZYeOMXrFIs/hrcSKUhaImFht0yMPjgBcgSnhDSEmdAOw7REkFXC1yjAD+STgdYCAow4JIReBsxfvGY5C/AfkOSRibpw2WR9+Bcy196y4ChXemELywVW5htmG4g2LMR+17xkFwWrUYqFKMwqZcZ4nfIPC5XEFEoIsjZrO0R0I22yEwlukSFhjNxYkDrBxKFjWTA5IKyyBTUgQkixEx5sGSqt2VZ4Cs8iDOPA6sJCrT3bD7KocC1mR5/A0LNqtjz1srC46jVUCJexRQvvrp8soF8yS/JCeBKp2loc/11xgifdAHfv0B35Zxw41rqFEGZIyeY5gOU1p0/OwAaCFJD/gdtLkjSm0Kdo9S8o34K6HGCmT5wje0MidCAevznwbmGDB8kOkJzTq7rGGH9UIjnSQ/DkXgFHbLbMi8iOmYZMJlSqFNXwkWpx8PMpMrptYt9vIivgcc8wxxF/8sEq4SpbE6QAAAABJRU5ErkJggg==",be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIWSURBVHgB7ZnPTcMwFIffe7SI3tiAHKjEkQ0oE9ADlbgBEwAjMAFiAriDBExA2QDOIAETwK1A0zwc4EVNY7f5YydB6ndoY8dOP7m/2G4DMMctKAdrOwMvCOiEGd6Hw+D45br1AjUkEl7d/rxC5O7YqfM6ipMcMI9e46d4r9nE53bv88zrDjyoCZEwEd7rm9RLPIqE131bbjZbbym6VBoVHC+0ex+36q0DqahGnMYLzHwHqakmKjRR7kNmyhXHyQoVizDHy5Abt1EhTd09FMLtiCeEmYMbsIIb8UQkwiV6NMJnsI6dqKCusniOp35kIXHS1jJbioX24oWiohfGPNNbVvKJayORfpm2SbqooOlEtmXaJtPFydQtCIIHqITpUTGO8O/0ZmuEcRdyf1vxEUcogfb24BzwRzov/ceLpc3wgOAfoH5nRjRMjSxHYgVyomT7vs/7UjYKD4d8SEQHUBGhqHo9frps9cfrjcKItAEVYBIVtDeduw2QmVmignaE7WV3NmlFBX0kWAk7nvCyigp6YURn+c0rKiSE272vdbUwe2CZoqJCI3lhv6NmCLCFLVEhIaxkt8ACtkWF2K1lYx/sSlSIjfDCwmIHcuJaVIgJE1IXMlKWqBDPcIbprGxRIRL+2515szpUJSpEwrOW46pFhUiYmbbUM45Eg7qICsbtZd1EhUi40QiOfB/Dv6felehp3UTnlMU3ggJVTX9vD3wAAAAASUVORK5CYII=",De=ne("homes",{persist:!0,state:()=>({kefu_url:""}),actions:{async[H](){const M=await le().catch(u=>Promise.reject(u));this.kefu_url=M.customer_service_url}}});const Je={key:0,class:"px-3.5 py-5"},Te={class:"white"},Ke={style:{color:"#1194F7"}},Ze={class:"mt-3"},Oe={class:"mr-1",style:{color:"#8A919E"}},qe={class:"white"},Ye={class:"mt-5"},Qe={key:0,class:"flex-1"},_e=["src"],Ge={key:1,class:"localKefu flex-1 flex"},He={class:"flex flex-col pt-3"},We={class:"text-center pb-3 text-grey text-30"},Ne={class:"responser px-12 py-8 text-30 left-chatBg"},ze={key:0,class:"break-word textColor text-30",style:{"max-width":"200px"}},Ve=["src","onClick"],Xe={key:1,class:"py-8 px-12 rounded-md flex flex-col right-chatBg"},Le=["src","onClick"],Pe={key:1,class:"break-word text-white text-30",style:{"max-width":"200px"}},Fe={class:"bottom bottomBox flex justify-between items-center w-full fixed bottom-0 borderTop px-4 box-border bgBottom"},$e=["placeholder"],et={__name:"index",setup(M){G.extend(Ue);const u=ae(),{t:E}=ie.exports.useI18n(),f=De(),j=ce(),b=Ae(),c=n([]),k=n(""),h=n(""),y=n(null);n(0);const D=n(!1),S=n(!0),J=n(0),W=n(null),T=n(null),A=n(null),N=n(0),I=n({}),v=n(0);let K=n(null),m="",x="";de(()=>{m="",x="",N.value=T.value.$el.getBoundingClientRect().height,b.query.order_no?z(b.query.order_no,e=>{console.log("getc2cOrderDetails = "+JSON.stringify(e)),m=e.orderNo,x=e.partyId,w()}):f.kefu_url||w(),setInterval(()=>{te()},1e3);const t=navigator.userAgent;W.value=t.indexOf("Android")>-1||t.indexOf("Linux")>-1,window.addEventListener("scroll",F,!0)}),ue(()=>{f[H]()});const z=(t,e)=>{Be({order_no:t}).then(a=>{I.value=a,K.value=I.value.state,v.value=a.autoCancelTimeRemain,e&&e(a)})},V=()=>{let t="";if(u.userInfo&&u.userInfo.usercode){const e=encodeURIComponent(JSON.stringify({name:u.userInfo.usercode,comment:""}));let a=`&clientid=${u.userInfo.usercode}&metadata=${e}`;t=f.kefu_url+a}else t=f.kefu_url;return console.log("generateExtranetLink",t),t},X=ye(t=>{q("text",t)},500),L=t=>{R(E("fileMaxLimit"))},Z=t=>{we([t])},P=t=>{ke({duration:0}),Ie(t,e=>{console.log(e)}).then(e=>{he(),q("img",e)}).catch(()=>{R(E("\u5931\u8D25"))})},w=async(t="")=>{console.log("orderNo = "+m),console.log("partyId = "+x),Ee({message_id:t},m,x).then(e=>{if(h.value||(h.value=e.length&&e[e.length-1].id),e.length){if(t)h.value=e[e.length-1].id,c.value=[...e.reverse(),...c.value];else{c.value=[...c.value,...e.reverse()];let a={};c.value=c.value.reduce(function(d,g){return a[g.id]||(a[g.id]=d.push(g)),d},[]),c.value.forEach((d,g)=>{e.forEach((o,oe)=>{d.id===o.id&&(d.delete_status=o.delete_status)})})}S.value&&(A.value.scrollTop=A.value.scrollHeight-A.value.offsetHeight),J.value=A.value.scrollTop,e.length<10&&(D.value=!0)}t||(O(),y.value=setInterval(()=>{w()},1e3))})},F=()=>{A.value&&(A.value.scrollTop===J.value?S.value=!0:S.value=!1)},$=()=>{w(h.value)},O=()=>{y.value&&(clearInterval(y.value),y.value=null)},ee=()=>{j.go(-1)},q=(t="text",e="")=>{if(!e){R(E("entryMessageContent"));return}Ce(t,e,m,x).then(async a=>{k.value="",S.value=!0})},te=()=>{v.value>0?v.value=v.value-1:v.value=0};return fe(()=>{O()}),(t,e)=>{const a=ve,d=Re,g=Se;return l(),r("div",{class:_(["service-box flex flex-col",p(f).kefu_url?"":"pb-40"])},[s("div",null,[C(a,{ref_key:"navEl",ref:T,title:t.$t("onLineService"),"left-arrow":"",onClickLeft:ee,fixed:""},null,8,["title"]),p(K)==0?(l(),r("div",Je,[s("div",Te,[B(i(t.$t("OrdersWill"))+" ",1),s("span",Ke,i(p(G).duration(v.value,"seconds").format("mm:ss")),1),B(" "+i(t.$t("afterCancel")),1)]),s("div",Ze,[s("span",Oe,i(t.$t("lumpSum")),1),s("span",qe,i(I.value.currency)+" "+i(I.value.amount),1)]),s("div",Ye,[C(d,{class:"w-full",type:"primary",onClick:e[0]||(e[0]=o=>p(j).back())},{default:Y(()=>[B(i(t.$t("toPay")),1)]),_:1})])])):Q("",!0)]),p(f).kefu_url?(l(),r("div",Qe,[s("iframe",{src:V(),width:"100%",height:"100%",frameborder:"0"},null,8,_e)])):(l(),r("div",Ge,[s("div",{class:"flex flex-col px-10 box-border",ref_key:"boxScrollEl",ref:A,style:{overflow:"auto"}},[s("div",{class:"w-full py-4 text-grey text-center pt-30 text-30",onClick:$,style:ge({display:D.value?"none":"block"})},i(t.$t("historyMessage")),5),s("ul",He,[(l(!0),r(U,null,pe(c.value,(o,oe)=>(l(),r("li",{key:o.id,class:"flex flex-col my-3"},[o.delete_status!=-1?(l(),r(U,{key:0},[s("p",We,i(o.createtime),1),s("div",{class:_(["flex",o.send_receive==="send"?"justify-end":""])},[o.send_receive==="receive"?(l(),r(U,{key:0},[e[3]||(e[3]=s("img",{src:Me,class:"w-20 h-20 mr-5"},null,-1)),s("div",Ne,[o.content_type==="text"||o.type==="text"?(l(),r("p",ze,i(o.content),1)):(l(),r("img",{key:1,src:o.content,class:"w-200 h-200",onClick:se=>Z(o.content)},null,8,Ve))])],64)):(l(),r("div",Xe,[o.content_type==="img"||o.type==="img"?(l(),r("img",{key:0,src:`${o.content}`,class:"w-200 h-200",onClick:se=>Z(o.content)},null,8,Le)):(l(),r("p",Pe,i(o.content),1))]))],2)],64)):Q("",!0)]))),128))])],512),s("div",Fe,[C(g,{"max-size":1e4*1024,onOversize:L,"after-read":P},{default:Y(()=>[...e[4]||(e[4]=[s("img",{src:je,class:"w-12 h-12"},null,-1)])]),_:1}),me(s("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>k.value=o),placeholder:t.$t("entryYouMessage"),class:"flex-1 mx-3 h-full border-none textColor chatBg",maxlength:"500"},null,8,$e),[[xe,k.value]]),s("img",{src:be,class:"w-12 h-12",onClick:e[2]||(e[2]=o=>p(X)(k.value))})])]))],2)}}},ft=re(et,[["__scopeId","data-v-ad28220c"]]);export{ft as default};
