import{p as Q,aa as at,q as ee,ad as ye,B as X,z as ne,aH as te,Q as ce,r as V,aI as ot,a4 as x,a2 as Ue,K as de,bs as lt,a9 as ze,g as m,E as Ke,T as ue,$ as le,J as F,ah as Le,c4 as it,F as ct,c5 as rt,N as p,y as ie,b3 as st,a8 as ae,c6 as ve,L as ut,U as Re,O as je,c7 as dt,bN as ft,c8 as mt,c9 as vt,a5 as ht,aK as De,bm as gt,I as Be,ca as we,b1 as bt,S as yt,bl as he,b8 as Dt,s as He,H as wt}from"./index-a1ce0b9b.js";import{a as Tt,T as kt,u as xt}from"./index-f267e586.js";import{B as St}from"./index-b2caa79d.js";import{u as Ct}from"./use-sync-prop-ref-78c0a4fb.js";const[Ot,q,Ae]=Q("picker"),qe=e=>e.find(n=>!n.disabled)||e[0];function Mt(e,n){const t=e[0];if(t){if(Array.isArray(t))return"multiple";if(n.children in t)return"cascade"}return"default"}function se(e,n){n=ye(n,0,e.length);for(let t=n;t<e.length;t++)if(!e[t].disabled)return t;for(let t=n-1;t>=0;t--)if(!e[t].disabled)return t;return 0}const Ee=(e,n,t)=>n!==void 0&&e.some(s=>s[t.value]===n);function Te(e,n,t){const s=e.findIndex(D=>D[t.value]===n),u=se(e,s);return e[u]}function Pt(e,n,t){const s=[];let u={[n.children]:e},D=0;for(;u&&u[n.children];){const k=u[n.children],S=t.value[D];if(u=at(S)?Te(k,S,n):void 0,!u&&k.length){const w=qe(k)[n.value];u=Te(k,w,n)}D++,s.push(k)}return s}function It(e){const{transform:n}=window.getComputedStyle(e),t=n.slice(7,n.length-1).split(", ")[5];return Number(t)}function Rt(e){return ee({text:"text",value:"value",children:"children"},e)}const _e=200,$e=300,Bt=15,[Ge,ge]=Q("picker-column"),Je=Symbol(Ge);var Ht=X({name:Ge,props:{value:ne,fields:te(Object),options:ce(),readonly:Boolean,allowHtml:Boolean,optionHeight:te(Number),swipeDuration:te(ne),visibleOptionNum:te(ne)},emits:["change","clickOption","scrollInto"],setup(e,{emit:n,slots:t}){let s,u,D,k,S;const w=V(),v=V(),g=V(0),c=V(0),C=ot(),d=()=>e.options.length,b=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,R=i=>{let f=se(e.options,i);const a=-f*e.optionHeight,l=()=>{f>d()-1&&(f=se(e.options,i));const h=e.options[f][e.fields.value];h!==e.value&&n("change",h)};s&&a!==g.value?S=l:l(),g.value=a},M=()=>e.readonly||!e.options.length,B=i=>{s||M()||(S=null,c.value=_e,R(i),n("clickOption",e.options[i]))},H=i=>ye(Math.round(-i/e.optionHeight),0,d()-1),K=x(()=>H(g.value)),Y=(i,f)=>{const a=Math.abs(i/f);i=g.value+a/.003*(i<0?-1:1);const l=H(i);c.value=+e.swipeDuration,R(l)},N=()=>{s=!1,c.value=0,S&&(S(),S=null)},L=i=>{if(!M()){if(C.start(i),s){const f=It(v.value);g.value=Math.min(0,f-b())}c.value=0,u=g.value,D=Date.now(),k=u,S=null}},W=i=>{if(M())return;C.move(i),C.isVertical()&&(s=!0,Ke(i,!0));const f=ye(u+C.deltaY.value,-(d()*e.optionHeight),e.optionHeight),a=H(f);a!==K.value&&n("scrollInto",e.options[a]),g.value=f;const l=Date.now();l-D>$e&&(D=l,k=f)},E=()=>{if(M())return;const i=g.value-k,f=Date.now()-D;if(f<$e&&Math.abs(i)>Bt){Y(i,f);return}const l=H(g.value);c.value=_e,R(l),setTimeout(()=>{s=!1},0)},J=()=>{const i={height:`${e.optionHeight}px`};return e.options.map((f,a)=>{const l=f[e.fields.text],{disabled:h}=f,_=f[e.fields.value],U={role:"button",style:i,tabindex:h?-1:0,class:[ge("item",{disabled:h,selected:_===e.value}),f.className],onClick:()=>B(a)},me={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:l};return m("li",U,[t.option?t.option(f,a):m("div",me,null)])})};return Ue(Je),de({stopMomentum:N}),lt(()=>{const i=s?Math.floor(-g.value/e.optionHeight):e.options.findIndex(l=>l[e.fields.value]===e.value),f=se(e.options,i),a=-f*e.optionHeight;s&&f<i&&N(),g.value=a}),ze("touchmove",W,{target:w}),()=>m("div",{ref:w,class:ge(),onTouchstartPassive:L,onTouchend:E,onTouchcancel:E},[m("ul",{ref:v,style:{transform:`translate3d(0, ${g.value+b()}px, 0)`,transitionDuration:`${c.value}ms`,transitionProperty:c.value?"all":"none"},class:ge("wrapper"),onTransitionend:N},[J()])])}});const[At]=Q("picker-toolbar"),fe={title:String,cancelButtonText:String,confirmButtonText:String},Qe=["cancel","confirm","title","toolbar"],Et=Object.keys(fe);var Xe=X({name:At,props:fe,emits:["confirm","cancel"],setup(e,{emit:n,slots:t}){const s=()=>{if(t.title)return t.title();if(e.title)return m("div",{class:[q("title"),"van-ellipsis"]},[e.title])},u=()=>n("cancel"),D=()=>n("confirm"),k=()=>{var w;const v=(w=e.cancelButtonText)!=null?w:Ae("cancel");if(!(!t.cancel&&!v))return m("button",{type:"button",class:[q("cancel"),ue],onClick:u},[t.cancel?t.cancel():v])},S=()=>{var w;const v=(w=e.confirmButtonText)!=null?w:Ae("confirm");if(!(!t.confirm&&!v))return m("button",{type:"button",class:[q("confirm"),ue],onClick:D},[t.confirm?t.confirm():v])};return()=>m("div",{class:q("toolbar")},[t.toolbar?t.toolbar():[k(),s(),S()]])}});const[Ze,be]=Q("picker-group"),pe=Symbol(Ze),_t=ee({tabs:ce(),activeTab:le(0),nextStepText:String,showToolbar:F},fe);X({name:Ze,props:_t,emits:["confirm","cancel","update:activeTab"],setup(e,{emit:n,slots:t}){const s=Ct(()=>e.activeTab,v=>n("update:activeTab",v)),{children:u,linkChildren:D}=Le(pe);D();const k=()=>+s.value<e.tabs.length-1&&e.nextStepText,S=()=>{k()?s.value=+s.value+1:n("confirm",u.map(v=>v.confirm()))},w=()=>n("cancel");return()=>{var v,g;let c=(g=(v=t.default)==null?void 0:v.call(t))==null?void 0:g.filter(d=>d.type!==it).map(d=>d.type===ct?d.children:d);c&&(c=rt(c));const C=k()?e.nextStepText:e.confirmButtonText;return m("div",{class:be()},[e.showToolbar?m(Xe,{title:e.title,cancelButtonText:e.cancelButtonText,confirmButtonText:C,onConfirm:S,onCancel:w},p(t,Qe)):null,m(Tt,{active:s.value,"onUpdate:active":d=>s.value=d,class:be("tabs"),shrink:!0,animated:!0,lazyRender:!1},{default:()=>[e.tabs.map((d,b)=>m(kt,{title:d,titleClass:be("tab-title")},{default:()=>[c==null?void 0:c[b]]}))]})])}}});const Se=ee({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:le(44),showToolbar:F,swipeDuration:le(1e3),visibleOptionNum:le(6)},fe),$t=ee({},Se,{columns:ce(),modelValue:ce(),toolbarPosition:ie("top"),columnsFieldNames:Object});X({name:Ot,props:$t,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e,{emit:n,slots:t}){const s=V(),u=V(e.modelValue.slice(0)),{parent:D}=Ue(pe),{children:k,linkChildren:S}=Le(Je);S();const w=x(()=>Rt(e.columnsFieldNames)),v=x(()=>st(e.optionHeight)),g=x(()=>Mt(e.columns,w.value)),c=x(()=>{const{columns:a}=e;switch(g.value){case"multiple":return a;case"cascade":return Pt(a,w.value,u);default:return[a]}}),C=x(()=>c.value.some(a=>a.length)),d=x(()=>c.value.map((a,l)=>Te(a,u.value[l],w.value))),b=x(()=>c.value.map((a,l)=>a.findIndex(h=>h[w.value.value]===u.value[l]))),R=(a,l)=>{if(u.value[a]!==l){const h=u.value.slice(0);h[a]=l,u.value=h}},M=()=>({selectedValues:u.value.slice(0),selectedOptions:d.value,selectedIndexes:b.value}),B=(a,l)=>{R(l,a),g.value==="cascade"&&u.value.forEach((h,_)=>{const U=c.value[_];Ee(U,h,w.value)||R(_,U.length?U[0][w.value.value]:void 0)}),Re(()=>{n("change",ee({columnIndex:l},M()))})},H=(a,l)=>{const h={columnIndex:l,currentOption:a};n("clickOption",ee(M(),h)),n("scrollInto",h)},K=()=>{k.forEach(l=>l.stopMomentum());const a=M();return Re(()=>{const l=M();n("confirm",l)}),a},Y=()=>n("cancel",M()),N=()=>c.value.map((a,l)=>m(Ht,{value:u.value[l],fields:w.value,options:a,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:v.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:h=>B(h,l),onClickOption:h=>H(h,l),onScrollInto:h=>{n("scrollInto",{currentOption:h,columnIndex:l})}},{option:t.option})),L=a=>{if(C.value){const l={height:`${v.value}px`},h={backgroundSize:`100% ${(a-v.value)/2}px`};return[m("div",{class:q("mask"),style:h},null),m("div",{class:[dt,q("frame")],style:l},null)]}},W=()=>{const a=v.value*+e.visibleOptionNum,l={height:`${a}px`};return!e.loading&&!C.value&&t.empty?t.empty():m("div",{ref:s,class:q("columns"),style:l},[N(),L(a)])},E=()=>{if(e.showToolbar&&!D)return m(Xe,je(p(e,Et),{onConfirm:K,onCancel:Y}),p(t,Qe))},J=a=>{a.forEach((l,h)=>{l.length&&!Ee(l,u.value[h],w.value)&&R(h,qe(l)[w.value.value])})};ae(c,a=>J(a),{immediate:!0});let i;return ae(()=>e.modelValue,a=>{!ve(a,u.value)&&!ve(a,i)&&(u.value=a.slice(0),i=a.slice(0)),e.modelValue.length===0&&J(c.value)},{deep:!0}),ae(u,a=>{ve(a,e.modelValue)||(i=a.slice(0),n("update:modelValue",i))},{immediate:!0}),ze("touchmove",Ke,{target:s}),de({confirm:K,getSelectedOptions:()=>d.value}),()=>{var a,l;return m("div",{class:q()},[e.toolbarPosition==="top"?E():null,e.loading?m(ut,{class:q("loading")},null):null,(a=t["columns-top"])==null?void 0:a.call(t),W(),(l=t["columns-bottom"])==null?void 0:l.call(t),e.toolbarPosition==="bottom"?E():null])}}});const[Nt,O,G]=Q("calendar"),Ft=e=>G("monthTitle",e.getFullYear(),e.getMonth()+1);function Z(e,n){const t=e.getFullYear(),s=n.getFullYear();if(t===s){const u=e.getMonth(),D=n.getMonth();return u===D?0:u>D?1:-1}return t>s?1:-1}function $(e,n){const t=Z(e,n);if(t===0){const s=e.getDate(),u=n.getDate();return s===u?0:s>u?1:-1}return t}const oe=e=>new Date(e),Ne=e=>Array.isArray(e)?e.map(oe):oe(e);function Ce(e,n){const t=oe(e);return t.setDate(t.getDate()+n),t}function Oe(e,n){const t=oe(e);return t.setMonth(t.getMonth()+n),t.getDate()!==e.getDate()&&t.setDate(0),t}function et(e,n){const t=oe(e);return t.setFullYear(t.getFullYear()+n),t.getDate()!==e.getDate()&&t.setDate(0),t}const ke=e=>Ce(e,-1),xe=e=>Ce(e,1),Fe=e=>Oe(e,-1),Ye=e=>Oe(e,1),Ve=e=>et(e,-1),We=e=>et(e,1),re=()=>{const e=new Date;return e.setHours(0,0,0,0),e};function Yt(e){const n=e[0].getTime();return(e[1].getTime()-n)/(1e3*60*60*24)+1}function Vt(e,n=0){const t=new Date(e.getFullYear(),e.getMonth()+1,0),s=n+e.getDate()-1,u=n+t.getDate()-1;return Math.floor(s/7)===Math.floor(u/7)}ee({},Se,{modelValue:ce(),filter:Function,formatter:{type:Function,default:(e,n)=>n}});Object.keys(Se);const Wt=(e,n)=>32-new Date(e,n-1,32).getDate(),[Ut]=Q("calendar-day");var zt=X({name:Ut,props:{item:te(Object),color:String,index:Number,offset:ft(0),rowHeight:String},emits:["click","clickDisabledDate"],setup(e,{emit:n,slots:t}){const s=x(()=>{const{item:v,index:g,color:c,offset:C,rowHeight:d}=e,b={height:d};if(v.type==="placeholder")return b.width="100%",b;if(g===0&&(b.marginLeft=`${100*C/7}%`),c)switch(v.type){case"end":case"start":case"start-end":case"multiple-middle":case"multiple-selected":b.background=c;break;case"middle":b.color=c;break}return v.date&&Vt(v.date,C)&&(b.marginBottom=0),b}),u=()=>{e.item.type!=="disabled"?n("click",e.item):n("clickDisabledDate",e.item)},D=()=>{const{topInfo:v}=e.item;if(v||t["top-info"])return m("div",{class:O("top-info")},[t["top-info"]?t["top-info"](e.item):v])},k=()=>{const{bottomInfo:v}=e.item;if(v||t["bottom-info"])return m("div",{class:O("bottom-info")},[t["bottom-info"]?t["bottom-info"](e.item):v])},S=()=>t.text?t.text(e.item):e.item.text,w=()=>{const{item:v,color:g,rowHeight:c}=e,{type:C}=v,d=[D(),S(),k()];return C==="selected"?m("div",{class:O("selected-day"),style:{width:c,height:c,background:g}},[d]):d};return()=>{const{type:v,className:g}=e.item;return v==="placeholder"?m("div",{class:O("day"),style:s.value},null):m("div",{role:"gridcell",style:s.value,class:[O("day",v),g],tabindex:v==="disabled"?void 0:-1,onClick:u},[w()])}}});const[Kt]=Q("calendar-month"),Lt={date:te(Date),type:String,color:String,minDate:Date,maxDate:Date,showMark:Boolean,rowHeight:ne,formatter:Function,lazyRender:Boolean,currentDate:[Date,Array],allowSameDay:Boolean,showSubtitle:Boolean,showMonthTitle:Boolean,firstDayOfWeek:Number};var jt=X({name:Kt,props:Lt,emits:["click","clickDisabledDate"],setup(e,{emit:n,slots:t}){const[s,u]=mt(),D=V(),k=V(),S=vt(k),w=x(()=>Ft(e.date)),v=x(()=>ht(e.rowHeight)),g=x(()=>{const i=e.date.getDate(),a=(e.date.getDay()-i%7+8)%7;return e.firstDayOfWeek?(a+7-e.firstDayOfWeek)%7:a}),c=x(()=>Wt(e.date.getFullYear(),e.date.getMonth()+1)),C=x(()=>s.value||!e.lazyRender),d=()=>w.value,b=i=>{const f=a=>e.currentDate.some(l=>$(l,a)===0);if(f(i)){const a=ke(i),l=xe(i),h=f(a),_=f(l);return h&&_?"multiple-middle":h?"end":_?"start":"multiple-selected"}return""},R=i=>{const[f,a]=e.currentDate;if(!f)return"";const l=$(i,f);if(!a)return l===0?"start":"";const h=$(i,a);return e.allowSameDay&&l===0&&h===0?"start-end":l===0?"start":h===0?"end":l>0&&h<0?"middle":""},M=i=>{const{type:f,minDate:a,maxDate:l,currentDate:h}=e;if(a&&$(i,a)<0||l&&$(i,l)>0)return"disabled";if(h===null)return"";if(Array.isArray(h)){if(f==="multiple")return b(i);if(f==="range")return R(i)}else if(f==="single")return $(i,h)===0?"selected":"";return""},B=i=>{if(e.type==="range"){if(i==="start"||i==="end")return G(i);if(i==="start-end")return`${G("start")}/${G("end")}`}},H=()=>{if(e.showMonthTitle)return m("div",{class:O("month-title")},[t["month-title"]?t["month-title"]({date:e.date,text:w.value}):w.value])},K=()=>{if(e.showMark&&C.value)return m("div",{class:O("month-mark")},[e.date.getMonth()+1])},Y=x(()=>{const i=Math.ceil((c.value+g.value)/7);return Array(i).fill({type:"placeholder"})}),N=x(()=>{const i=[],f=e.date.getFullYear(),a=e.date.getMonth();for(let l=1;l<=c.value;l++){const h=new Date(f,a,l),_=M(h);let U={date:h,type:_,text:l,bottomInfo:B(_)};e.formatter&&(U=e.formatter(U)),i.push(U)}return i}),L=x(()=>N.value.filter(i=>i.type==="disabled")),W=(i,f)=>{if(D.value){const a=De(D.value),l=Y.value.length,_=(Math.ceil((f.getDate()+g.value)/7)-1)*a.height/l;gt(i,a.top+_+i.scrollTop-De(i).top)}},E=(i,f)=>m(zt,{item:i,index:f,color:e.color,offset:g.value,rowHeight:v.value,onClick:a=>n("click",a),onClickDisabledDate:a=>n("clickDisabledDate",a)},p(t,["top-info","bottom-info","text"])),J=()=>m("div",{ref:D,role:"grid",class:O("days")},[K(),(C.value?N:Y).value.map(E)]);return de({getTitle:d,getHeight:()=>S.value,setVisible:u,scrollToDate:W,disabledDays:L}),()=>m("div",{class:O("month"),ref:k},[H(),J()])}});const[qt]=Q("calendar-header");var Gt=X({name:qt,props:{date:Date,minDate:Date,maxDate:Date,title:String,subtitle:String,showTitle:Boolean,showSubtitle:Boolean,firstDayOfWeek:Number,switchMode:ie("none")},emits:["clickSubtitle","panelChange"],setup(e,{slots:n,emit:t}){const s=x(()=>e.date&&e.minDate&&Z(Fe(e.date),e.minDate)<0),u=x(()=>e.date&&e.minDate&&Z(Ve(e.date),e.minDate)<0),D=x(()=>e.date&&e.maxDate&&Z(Ye(e.date),e.maxDate)>0),k=x(()=>e.date&&e.maxDate&&Z(We(e.date),e.maxDate)>0),S=()=>{if(e.showTitle){const d=e.title||G("title"),b=n.title?n.title():d;return m("div",{class:O("header-title")},[b])}},w=d=>t("clickSubtitle",d),v=d=>t("panelChange",d),g=d=>{const b=e.switchMode==="year-month",R=n[d?"next-month":"prev-month"],M=n[d?"next-year":"prev-year"],B=d?D.value:s.value,H=d?k.value:u.value,K=d?"arrow":"arrow-left",Y=d?"arrow-double-right":"arrow-double-left",N=()=>v((d?Ye:Fe)(e.date)),L=()=>v((d?We:Ve)(e.date)),W=m("view",{class:O("header-action",{disabled:B}),onClick:B?void 0:N},[R?R({disabled:B}):m(Be,{class:{[ue]:!B},name:K},null)]),E=b&&m("view",{class:O("header-action",{disabled:H}),onClick:H?void 0:L},[M?M({disabled:H}):m(Be,{class:{[ue]:!H},name:Y},null)]);return d?[W,E]:[E,W]},c=()=>{if(e.showSubtitle){const d=n.subtitle?n.subtitle({date:e.date,text:e.subtitle}):e.subtitle,b=e.switchMode!=="none";return m("div",{class:O("header-subtitle",{"with-switch":b}),onClick:w},[b?[g(),m("div",{class:O("header-subtitle-text")},[d]),g(!0)]:d])}},C=()=>{const{firstDayOfWeek:d}=e,b=G("weekdays"),R=[...b.slice(d,7),...b.slice(0,d)];return m("div",{class:O("weekdays")},[R.map(M=>m("span",{class:O("weekday")},[M]))])};return()=>m("div",{class:O("header")},[S(),c(),C()])}});const Jt={show:Boolean,type:ie("single"),switchMode:ie("none"),title:String,color:String,round:F,readonly:Boolean,poppable:F,maxRange:le(null),position:ie("bottom"),teleport:[String,Object],showMark:F,showTitle:F,formatter:Function,rowHeight:ne,confirmText:String,rangePrompt:String,lazyRender:F,showConfirm:F,defaultDate:[Date,Array],allowSameDay:Boolean,showSubtitle:F,closeOnPopstate:F,showRangePrompt:F,confirmDisabledText:String,closeOnClickOverlay:F,safeAreaInsetTop:Boolean,safeAreaInsetBottom:F,minDate:{type:Date,validator:we},maxDate:{type:Date,validator:we},firstDayOfWeek:{type:ne,default:0,validator:e=>e>=0&&e<=6}};var Qt=X({name:Nt,props:Jt,emits:["select","confirm","unselect","monthShow","overRange","update:show","clickSubtitle","clickDisabledDate","clickOverlay","panelChange"],setup(e,{emit:n,slots:t}){const s=x(()=>e.switchMode!=="none"),u=x(()=>!e.minDate&&!s.value?re():e.minDate),D=x(()=>!e.maxDate&&!s.value?Oe(re(),6):e.maxDate),k=(o,r=u.value,T=D.value)=>r&&$(o,r)===-1?r:T&&$(o,T)===1?T:o,S=(o=e.defaultDate)=>{const{type:r,allowSameDay:T}=e;if(o===null)return o;const y=re();if(r==="range"){Array.isArray(o)||(o=[]),o.length===1&&$(o[0],y)===1&&(o=[]);const P=u.value,A=D.value,j=k(o[0]||y,P,A?T?A:ke(A):void 0),I=k(o[1]||(T?y:xe(y)),P?T?P:xe(P):void 0);return[j,I]}return r==="multiple"?Array.isArray(o)?o.map(P=>k(P)):[k(y)]:((!o||Array.isArray(o))&&(o=y),k(o))},w=()=>{const o=Array.isArray(c.value)?c.value[0]:c.value;return o||k(re())};let v;const g=V(),c=V(S()),C=V(w()),d=V(),[b,R]=xt(),M=x(()=>e.firstDayOfWeek?+e.firstDayOfWeek%7:0),B=x(()=>{const o=[];if(!u.value||!D.value)return o;const r=new Date(u.value);r.setDate(1);do o.push(new Date(r)),r.setMonth(r.getMonth()+1);while(Z(r,D.value)!==1);return o}),H=x(()=>{if(c.value){if(e.type==="range")return!c.value[0]||!c.value[1];if(e.type==="multiple")return!c.value.length}return!c.value}),K=()=>c.value,Y=()=>{const o=Dt(g.value),r=o+v,T=B.value.map((I,z)=>b.value[z].getHeight()),y=T.reduce((I,z)=>I+z,0);if(r>y&&o>0)return;let P=0,A;const j=[-1,-1];for(let I=0;I<B.value.length;I++){const z=b.value[I];P<=r&&P+T[I]>=o&&(j[1]=I,A||(A=z,j[0]=I),b.value[I].showed||(b.value[I].showed=!0,n("monthShow",{date:z.date,title:z.getTitle()}))),P+=T[I]}B.value.forEach((I,z)=>{const Ie=z>=j[0]-1&&z<=j[1]+1;b.value[z].setVisible(Ie)}),A&&(d.value=A)},N=o=>{s.value?C.value=o:he(()=>{B.value.some((r,T)=>Z(r,o)===0?(g.value&&b.value[T].scrollToDate(g.value,o),!0):!1),Y()})},L=()=>{if(!(e.poppable&&!e.show))if(c.value){const o=e.type==="single"?c.value:c.value[0];we(o)&&N(o)}else s.value||he(Y)},W=()=>{e.poppable&&!e.show||(s.value||he(()=>{v=Math.floor(De(g).height)}),L())},E=(o=S())=>{c.value=o,L()},J=o=>{const{maxRange:r,rangePrompt:T,showRangePrompt:y}=e;return r&&Yt(o)>+r?(y&&He(T||G("rangePrompt",r)),n("overRange"),!1):!0},i=o=>{C.value=o,n("panelChange",{date:o})},f=()=>{var o;return n("confirm",(o=c.value)!=null?o:Ne(c.value))},a=(o,r)=>{const T=y=>{c.value=y,n("select",Ne(y))};if(r&&e.type==="range"&&!J(o)){T([o[0],Ce(o[0],+e.maxRange-1)]);return}T(o),r&&!e.showConfirm&&f()},l=(o,r,T)=>{var y;return(y=o.find(P=>$(r,P.date)===-1&&$(P.date,T)===-1))==null?void 0:y.date},h=x(()=>b.value.reduce((o,r)=>{var T,y;return o.push(...(y=(T=r.disabledDays)==null?void 0:T.value)!=null?y:[]),o},[])),_=o=>{if(e.readonly||!o.date)return;const{date:r}=o,{type:T}=e;if(T==="range"){if(!c.value){a([r]);return}const[y,P]=c.value;if(y&&!P){const A=$(r,y);if(A===1){const j=l(h.value,y,r);if(j){const I=ke(j);$(y,I)===-1?a([y,I]):a([r])}else a([y,r],!0)}else A===-1?a([r]):e.allowSameDay&&a([r,r],!0)}else a([r])}else if(T==="multiple"){if(!c.value){a([r]);return}const y=c.value,P=y.findIndex(A=>$(A,r)===0);if(P!==-1){const[A]=y.splice(P,1);n("unselect",oe(A))}else e.maxRange&&y.length>=+e.maxRange?He(e.rangePrompt||G("rangePrompt",e.maxRange)):a([...y,r])}else a(r,!0)},U=o=>n("clickOverlay",o),me=o=>n("update:show",o),Me=(o,r)=>{const T=r!==0||!e.showSubtitle;return m(jt,je({ref:s.value?d:R(r),date:o,currentDate:c.value,showMonthTitle:T,firstDayOfWeek:M.value,lazyRender:s.value?!1:e.lazyRender,maxDate:D.value,minDate:u.value},p(e,["type","color","showMark","formatter","rowHeight","showSubtitle","allowSameDay"]),{onClick:_,onClickDisabledDate:y=>n("clickDisabledDate",y)}),p(t,["top-info","bottom-info","month-title","text"]))},tt=()=>{if(t.footer)return t.footer();if(e.showConfirm){const o=t["confirm-text"],r=H.value,T=r?e.confirmDisabledText:e.confirmText;return m(St,{round:!0,block:!0,type:"primary",color:e.color,class:O("confirm"),disabled:r,nativeType:"button",onClick:f},{default:()=>[o?o({disabled:r}):T||G("confirm")]})}},nt=()=>m("div",{class:[O("footer"),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[tt()]),Pe=()=>{var o,r;return m("div",{class:O()},[m(Gt,{date:(o=d.value)==null?void 0:o.date,maxDate:D.value,minDate:u.value,title:e.title,subtitle:(r=d.value)==null?void 0:r.getTitle(),showTitle:e.showTitle,showSubtitle:e.showSubtitle,switchMode:e.switchMode,firstDayOfWeek:M.value,onClickSubtitle:T=>n("clickSubtitle",T),onPanelChange:i},p(t,["title","subtitle","prev-month","prev-year","next-month","next-year"])),m("div",{ref:g,class:O("body"),onScroll:s.value?void 0:Y},[s.value?Me(C.value,0):B.value.map(Me)]),nt()])};return ae(()=>e.show,W),ae(()=>[e.type,e.minDate,e.maxDate,e.switchMode],()=>E(S(c.value))),ae(()=>e.defaultDate,o=>{E(o)}),de({reset:E,scrollToDate:N,getSelectedDate:K}),bt(W),()=>e.poppable?m(yt,{show:e.show,class:O("popup"),round:e.round,position:e.position,closeable:e.showTitle||e.showSubtitle,teleport:e.teleport,closeOnPopstate:e.closeOnPopstate,safeAreaInsetTop:e.safeAreaInsetTop,closeOnClickOverlay:e.closeOnClickOverlay,onClickOverlay:U,"onUpdate:show":me},{default:Pe}):Pe()}});const tn=wt(Qt);export{tn as C};
