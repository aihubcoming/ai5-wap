import{bk as se,bl as j,b8 as Ce,bm as ke,r as S,aV as Ie,p as F,B as K,aH as X,a8 as B,l as Re,K as G,g as m,z as A,y as xe,$ as Z,J as O,b2 as Be,ah as $e,a1 as Pe,a4 as x,b3 as _e,b6 as ze,U as z,bn as Ae,bo as Le,b1 as Ne,a9 as He,b5 as Oe,a5 as ae,aa as J,bp as We,W as Ee,bq as ne,aL as Me,br as De,aK as le,ai as Ve,q as Ze,x as qe,a0 as Fe,a2 as Ke,bs as Ue,n as Xe,bt as Ye,aY as je,bu as Je,aW as Ge,bb as Qe,O as pe,N as ie,af as et,H as ce}from"./index-8f557042.js";import{u as de}from"./use-id-df8c351b.js";import{u as tt}from"./use-tab-status-fffaa261.js";import{S as at,a as nt}from"./index-1b600eb6.js";import{u as lt,S as it}from"./index-1c803132.js";function ot(e,l,i){let c,s=0;const a=e.scrollLeft,o=i===0?1:Math.round(i*1e3/16);let u=a;function d(){se(c)}function h(){u+=(l-a)/o,e.scrollLeft=u,++s<o&&(c=j(h))}return h(),d}function rt(e,l,i,c){let s,a=Ce(e);const o=a<l,u=i===0?1:Math.round(i*1e3/16),d=(l-a)/u;function h(){se(s)}function w(){a+=d,(o&&a>l||!o&&a<l)&&(a=l),ke(e,a),o&&a<l||!o&&a>l?s=j(w):c&&(s=j(c))}return w(),h}function st(){const e=S([]),l=[];return Ie(()=>{e.value=[]}),[e,c=>(l[c]||(l[c]=s=>{e.value[c]=s}),l[c])]}const[ct,oe]=F("tabs");var dt=K({name:ct,props:{count:X(Number),inited:Boolean,animated:Boolean,duration:X(A),swipeable:Boolean,lazyRender:Boolean,currentIndex:X(Number)},emits:["change"],setup(e,{emit:l,slots:i}){const c=S(),s=u=>l("change",u),a=()=>{var u;const d=(u=i.default)==null?void 0:u.call(i);return e.animated||e.swipeable?m(at,{ref:c,loop:!1,class:oe("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:s},{default:()=>[d]}):d},o=u=>{const d=c.value;d&&d.state.active!==u&&d.swipeTo(u,{immediate:!e.inited})};return B(()=>e.currentIndex,o),Re(()=>{o(e.currentIndex)}),G({swipeRef:c}),()=>m("div",{class:oe("content",{animated:e.animated||e.swipeable})},[a()])}});const[ue,q]=F("tabs"),ut={type:xe("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:Z(0),duration:Z(.3),animated:Boolean,ellipsis:O,swipeable:Boolean,scrollspy:Boolean,offsetTop:Z(0),background:String,lazyRender:O,showHeader:O,lineWidth:A,lineHeight:A,beforeChange:Function,swipeThreshold:Z(5),titleActiveColor:String,titleInactiveColor:String},fe=Symbol(ue);var ft=K({name:ue,props:ut,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:l,slots:i}){let c,s,a,o,u;const d=S(),h=S(),w=S(),$=S(),P=de(),k=Be(d),[b,T]=st(),{children:v,linkChildren:U}=$e(fe),f=Pe({inited:!1,position:"",lineStyle:{},currentIndex:-1}),L=x(()=>v.length>+e.swipeThreshold||!e.ellipsis||e.shrink),W=x(()=>({borderColor:e.color,background:e.background})),N=(t,n)=>{var r;return(r=t.name)!=null?r:n},E=x(()=>{const t=v[f.currentIndex];if(t)return N(t,f.currentIndex)}),_=x(()=>_e(e.offsetTop)),Q=x(()=>e.sticky?_.value+c:0),H=t=>{const n=h.value,r=b.value;if(!L.value||!n||!r||!r[f.currentIndex])return;const y=r[f.currentIndex].$el,g=y.offsetLeft-(n.offsetWidth-y.offsetWidth)/2;o&&o(),o=ot(n,g,t?0:+e.duration)},I=()=>{const t=f.inited;z(()=>{const n=b.value;if(!n||!n[f.currentIndex]||e.type!=="line"||Oe(d.value))return;const r=n[f.currentIndex].$el,{lineWidth:y,lineHeight:g}=e,C=r.offsetLeft+r.offsetWidth/2,R={width:ae(y),backgroundColor:e.color,transform:`translateX(${C}px) translateX(-50%)`};if(t&&(R.transitionDuration=`${e.duration}s`),J(g)){const V=ae(g);R.height=V,R.borderRadius=V}f.lineStyle=R})},ve=t=>{const n=t<f.currentIndex?-1:1;for(;t>=0&&t<v.length;){if(!v[t].disabled)return t;t+=n}},M=(t,n)=>{const r=ve(t);if(!J(r))return;const y=v[r],g=N(y,r),C=f.currentIndex!==null;f.currentIndex!==r&&(f.currentIndex=r,n||H(),I()),g!==e.active&&(l("update:active",g),C&&l("change",g,y.title)),a&&!e.scrollspy&&Ee(Math.ceil(ne(d.value)-_.value))},D=(t,n)=>{const r=v.findIndex((y,g)=>N(y,g)===t);M(r===-1?0:r,n)},p=(t=!1)=>{if(e.scrollspy){const n=v[f.currentIndex].$el;if(n&&k.value){const r=ne(n,k.value)-Q.value;s=!0,u&&u(),u=rt(k.value,r,t?0:+e.duration,()=>{s=!1})}}},be=(t,n,r)=>{const{title:y,disabled:g}=v[n],C=N(v[n],n);g||(Me(e.beforeChange,{args:[C],done:()=>{M(n),p()}}),De(t)),l("clickTab",{name:C,title:y,event:r,disabled:g})},he=t=>{a=t.isFixed,l("scroll",t)},me=t=>{z(()=>{D(t),p(!0)})},ge=()=>{for(let t=0;t<v.length;t++){const{top:n}=le(v[t].$el);if(n>Q.value)return t===0?0:t-1}return v.length-1},ye=()=>{if(e.scrollspy&&!s){const t=ge();M(t)}},we=()=>{if(e.type==="line"&&v.length)return m("div",{class:q("line"),style:f.lineStyle},null)},ee=()=>{var t,n,r;const{type:y,border:g,sticky:C}=e,R=[m("div",{ref:C?void 0:w,class:[q("wrap"),{[We]:y==="line"&&g}]},[m("div",{ref:h,role:"tablist",class:q("nav",[y,{shrink:e.shrink,complete:L.value}]),style:W.value,"aria-orientation":"horizontal"},[(t=i["nav-left"])==null?void 0:t.call(i),v.map(V=>V.renderTitle(be)),we(),(n=i["nav-right"])==null?void 0:n.call(i)])]),(r=i["nav-bottom"])==null?void 0:r.call(i)];return C?m("div",{ref:w},[R]):R},te=()=>{I(),z(()=>{var t,n;H(!0),(n=(t=$.value)==null?void 0:t.swipeRef.value)==null||n.resize()})};B(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],I),B(ze,te),B(()=>e.active,t=>{t!==E.value&&D(t)}),B(()=>v.length,()=>{f.inited&&(D(e.active),I(),z(()=>{H(!0)}))});const Te=()=>{D(e.active,!0),z(()=>{f.inited=!0,w.value&&(c=le(w.value).height),H(!0)})},Se=(t,n)=>l("rendered",t,n);return G({resize:te,scrollTo:me}),Ae(I),Le(I),Ne(Te),lt(d,I),He("scroll",ye,{target:k,passive:!0}),U({id:P,props:e,setLine:I,scrollable:L,onRendered:Se,currentName:E,setTitleRefs:T,scrollIntoView:H}),()=>m("div",{ref:d,class:q([e.type])},[e.showHeader?e.sticky?m(it,{container:d.value,offsetTop:_.value,onScroll:he},{default:()=>[ee()]}):ee():null,m(dt,{ref:$,count:v.length,inited:f.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:f.currentIndex,onChange:M},{default:()=>{var t;return[(t=i.default)==null?void 0:t.call(i)]}})])}});const[vt,re]=F("tab"),bt=K({name:vt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:A,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:O},setup(e,{slots:l}){const i=x(()=>{const s={},{type:a,color:o,disabled:u,isActive:d,activeColor:h,inactiveColor:w}=e;o&&a==="card"&&(s.borderColor=o,u||(d?s.backgroundColor=o:s.color=o));const P=d?h:w;return P&&(s.color=P),s}),c=()=>{const s=m("span",{class:re("text",{ellipsis:!e.scrollable})},[l.title?l.title():e.title]);return e.dot||J(e.badge)&&e.badge!==""?m(Ve,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[s]}):s};return()=>m("div",{id:e.id,role:"tab",class:[re([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[c()])}}),[ht,Y]=F("tab"),mt=Ze({},qe,{dot:Boolean,name:A,badge:A,title:String,disabled:Boolean,titleClass:Fe,titleStyle:[String,Object],showZeroBadge:O});var gt=K({name:ht,props:mt,setup(e,{slots:l}){const i=de(),c=S(!1),s=et(),{parent:a,index:o}=Ke(fe);if(!a)return;const u=()=>{var b;return(b=e.name)!=null?b:o.value},d=()=>{c.value=!0,a.props.lazyRender&&z(()=>{a.onRendered(u(),e.title)})},h=x(()=>{const b=u()===a.currentName.value;return b&&!c.value&&d(),b}),w=S(""),$=S("");Ue(()=>{const{titleClass:b,titleStyle:T}=e;w.value=b?Xe(b):"",$.value=T&&typeof T!="string"?Ye(je(T)):T});const P=b=>m(bt,pe({key:i,id:`${a.id}-${o.value}`,ref:a.setTitleRefs(o.value),style:$.value,class:w.value,isActive:h.value,controls:i,scrollable:a.scrollable.value,activeColor:a.props.titleActiveColor,inactiveColor:a.props.titleInactiveColor,onClick:T=>b(s.proxy,o.value,T)},ie(a.props,["type","color","shrink"]),ie(e,["dot","badge","title","disabled","showZeroBadge"])),{title:l.title}),k=S(!h.value);return B(h,b=>{b?k.value=!1:Je(()=>{k.value=!0})}),B(()=>e.title,()=>{a.setLine(),a.scrollIntoView()}),tt(h),G({id:i,renderTitle:P}),()=>{var b;const T=`${a.id}-${o.value}`,{animated:v,swipeable:U,scrollspy:f,lazyRender:L}=a.props;if(!l.default&&!v)return;const W=f||h.value;if(v||U)return m(nt,{id:i,role:"tabpanel",class:Y("panel-wrapper",{inactive:k.value}),tabindex:h.value?0:-1,"aria-hidden":!h.value,"aria-labelledby":T,"data-allow-mismatch":"attribute"},{default:()=>{var _;return[m("div",{class:Y("panel")},[(_=l.default)==null?void 0:_.call(l)])]}});const E=c.value||f||!L?(b=l.default)==null?void 0:b.call(l):null;return Ge(m("div",{id:i,role:"tabpanel",class:Y("panel"),tabindex:W?0:-1,"aria-labelledby":T,"data-allow-mismatch":"attribute"},[E]),[[Qe,W]])}}});const kt=ce(gt),It=ce(ft);export{kt as T,It as a,st as u};
