import{_ as W,v as H,ak as K,u as $,r,a8 as ee,l as le,S as ae,o as f,c as b,g as V,e as l,t as n,f as s,n as x,aW as N,aX as R,d as F,h as P,w,F as se,m as te,s as oe,b as ne,bP as ie}from"./index-14d2cc83.js";/* empty css              *//* empty css               */import{_ as ue,c as re}from"./trade.api-43084cdd.js";import{V as ve}from"./vue-slider-component.umd.min-382ff49e.js";import{D as ce,a as de}from"./index-1945ffde.js";import"./index-2fe68c30.js";import"./use-id-f3e51a3e.js";const pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHXSURBVHgB7Zg9bsJAEIXfbkKUkpskV+AkIRUlcaIcI8FUkdIgTsIVOAolSsCTHRAFApuZ/VGENF+DZQvvftbu+HkAwzAMwzAM41pxiOBz+j0GYcjHBCw99aqqel4hgclk1ie/CfdthmFaKziqX8ejOZSohT4mX0M4Pzu+iVs66g1ipVhm634XDvR4dIFQvVWjGgo8lJDz45NzYSIUJsQTg5JWmd1YeIIStVD4w9lJx0h1ycSiFtpS07quNVISGV7KUKIWusV9HTZe60ASKYkMBRkuNlASVeV2Fcn9LEKF63y65wqFVOYmsshECR0mppUqLbMfMwGNFB+XltmPl4hUqtn9lpXZj5UBiVQXuWSYLEJMrFROGSabEKOVyi3DZBVipFIlZBj1i1VCI3hORQZGgSWnyWapKf38PTMRGzRzS2Ur2ympOadU8lKWxpnUQCslOfpI48zuODLQakgKp9pslpLSpUR/PsQGzdJSaqEcnwAlpfSf4FjXqamZrzm6G1wqFBusX6BEX+Wcf0DrJORxRiLlnf/Pro8+m12SCktSvYf0fTnC9ORcQtDskvIONZREVTnunnLDMeylfkM0505QjlYw78/Dkg4Pbv6u7JoahmEYhmEY180fGrSdRe/GsTMAAAAASUVORK5CYII=",Ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAARDSURBVHgB7Zh/iFRVFMfPeffNGzOWpWBBVkzB/ql/IrYfs29M1zAIhIQKrCgxsPWf3SIVNZuZvTODpqgEGZVBRVCS5B/9Yg1yYcraGQkL+knQH9Za9oNi12xn57373vE8XRd/zX0zszM6C/OB4b2599z7vve+e+495wG0aNGixdUEYQbRLel6A9TNCvyTR2T0m6BsRgzgxhco2vGv6icAyYKv5SKPpe87AaJXQJPTI8mMTng7+TbJ4q3JYoN/t7QBXWdCk1MClQKCpy5XR0BrDWhi7IyX4EuyvAWZTesDdtpbT+Tv0lv5XzblAGLSWY2Ab2iNEMYF0uKmW0KxtFppAL4SYlYE8p/4PGUdbaoB2GnncV4Sr/N2GdUa+n42L6P7gtumWUJ3pNRyYdB+OLvPl4UHly7IiDz3vym20XjaXcrCXibSi2dSLD57fsFVfwOxjBtHHw6HaQlOYRafvrh8qtECSbNuEDDvv/FTo18/1/Y3XAFiGedOw8dPw9Y81+9g8ZsvV4eB8E5SSULaxH+D0MLh6/6RMbH2+PNYhAZxW5JujQjvQ5Y3V2/pb2eHfaZcrdEJbi8hbJkUH8DxBj02r10d6umhhvjIoozTFRFqMEx84LA68QEGAa4pU2eXlrivQZ2JJUo3eb7xPt/O0dmx+K3n7zblMLQdIa6ypbs7voPaoA7Y2YmFaIrB8GWDe2flTAkVELyBIZ0Bz8Q6KrovdUmaDdPAfrY4nzzzEPe4IMT0vSiIvlwOFVSAYZnORt6KftcZ8SAftcBNQ43E5f+dFBFDYeJZx+AYmCtzsjLxAcZnidkjCLQibBDc/YZu6e6EKolL6vQhcoDbLwwxPWiB+cAPEh2ogqlzwE5SNwmPnYs6dA04idhTkNaTUAGcTc1xQH3Ay/B20IqgApwqrRje1fYXVMlUMDecxTxfVnFno6B9GPazY2+FEO7aRh0OqnfDxcN3oj1yfy3iAy6IRvPS/Nj3jT6+dXWNWNQWXk6pcvVdvRRRJfUOxzaLQE8OQS0//DSegBq5JJwuZMy30fcfhjOZv5YBO+NuvLSY0Jqrhnhq79a2Rvjes4oPfiGv+RWmQdkAqluWHuHxvQX6IEsR4prCgPnmVLu0+gSIloH2qfiTXxJLjmzDP2GaaCNAW06sIxC7QY9j8IGnaOyggPa97OQPhdj/CKZ5Tz6Bv0EdCA2nY9INPiYNQCj0C3c3X2+Dx3hClhYkHoM6UVE+UPkgtI+qu/iAinLiyaAqCzVDPzdCfEBVGdnkSbyhmja8546C8BfnU9FvoQFUnVLGpNrDh11fheYn2al55q2voEFU/VmlIM1+QiNsZwo4jh7c20jxATUn9bFUaTsaxqYyvf4DAu7LJyLD0GBq/rDl/mHxR1d88eJynpFRPoxXXwnxATUP4Oir6I6BWM/59GZEHGFvHefiA4ZhLuOY6iNo0aJFixYzgdMo9YC7cK9IxwAAAABJRU5ErkJggg==";const me={class:"open-index"},fe={class:"base-wrapper"},xe={class:"name"},be={class:"font-bold"},_e={class:"tab-wrapper flex-all-center"},ye={key:0,class:"volumn-wrapper"},he={class:"title"},ge={class:"operator"},Be={class:"number flex-all-center"},Ve={class:"volumn-wrapper"},we={class:"title"},ke={class:"operator"},Ce={class:"number flex-all-center"},Se={class:"mainBox"},Ye={key:0,class:"slider"},Ie={class:"open-wrapper"},Ue={class:"label"},Ne={key:1,class:"value"},Re={class:"pop-box mainBackground"},Fe={class:"title"},Pe={class:"content flex-all-center"},Qe={class:"text1"},De={class:"text2"},Oe={__name:"Open",setup(qe){const{t:i}=H.exports.useI18n(),u=K(),Q=$(),A=r(1),o=r("1"),d=r(u.query.closePrice),_=r(!1),y=r([]),m=r(1),v=r({}),D=r({}),h=r("1"),O=a=>a%25===0,g=r(!0),q=[{label:i("lever"),value:"lever"},{label:i("margin"),value:"margin"},{label:i("money"),value:"money"},{label:i("fee"),value:"fee"}],p=r({symbol:"",session_token:"",direction:"buy",price_type:"opponent",lever_rate:1,price:"",amount:""});ee(u,(a,e)=>{console.log("\u5F00\u4ED3\u9875\u9762watch",u.query.closePrice)},{deep:!0}),le(async()=>{await k(),E(v.value)});const k=async()=>{const{symbol:a,type:e}=u.query,c=await ue({symbol:a});v.value=c},E=a=>{var e;a.lever&&a.lever.length?(y.value=(e=a.lever)==null?void 0:e.map(c=>({text:`${c.lever_rate}x`,value:c.lever_rate})),m.value=y.value[0].value):y.value=[{text:"1x",value:1}]},T=a=>{let e;if(v.value.volume)if(a==0)o.value=1;else{const c=a/100;e=v.value.volume*c,o.value=parseInt(e)}},X=async()=>{if(!g.value||(g.value=!1,o.value===0))return;await k();const{symbol:a,type:e}=u.query;p.value.symbol=a,p.value.direction=e,p.value.lever_rate=m.value,p.value.price_type=A.value===2?"limit":"opponent";const c=u.query.closePrice;p.value.price=A.value===2?d.value:c,p.value.session_token=v.value.session_token,p.value.amount=o.value,re(p.value).then(B=>{_.value=!0,g.value=!0}).catch(B=>{g.value=!0,oe(i(B))})},z=a=>{switch(a){case"fee":return Number(o.value*v.value.fee*m.value).toFixed(0);case"lever":return`${m.value}x`;default:return Number(o.value*v.value.amount*m.value).toFixed(0)}},C=a=>{h.value=1,o.value=1,A.value=a},S=(a,e)=>{e==="-"?Number(d.value)>0?d.value=(Number(d.value)-Number(a)).toFixed(4):d.value=0:d.value=(Number(d.value)+Number(a)).toFixed(4)},Y=(a,e)=>{e==="-"?Number(o.value)>0?o.value=Number(o.value)-Number(a):o.value=0:o.value=Number(o.value)+Number(a)},G=()=>{h.value=(o.value/v.value.volume*100).toFixed(2)},I=()=>{_.value=!1},L=()=>{Q.push("/position/index")};return(a,e)=>{var U;const c=ie,B=ce,J=de,M=ae;return f(),b("section",null,[V(c),l("div",me,[l("div",fe,[l("div",xe,n(s(u).query.symbol),1),l("div",be,n((U=D.value)==null?void 0:U.close),1)]),l("div",_e,[l("div",{class:x([{active:A.value===1},"flex-all-center flex-1"]),onClick:e[0]||(e[0]=t=>C(1))},n(s(i)("marketPrice")),3),l("div",{class:x([{active:A.value===2},"flex-all-center flex-1"]),onClick:e[1]||(e[1]=t=>C(2))},n(s(i)("\u9650\u4EF7")),3)]),A.value==2?(f(),b("div",ye,[l("div",he,n(s(i)("price"))+" "+n(`(${s(u).query.closePrice})`),1),l("div",ge,[l("div",{class:"minus btn flex-all-center",onClick:e[2]||(e[2]=t=>S("0.1","-"))},"-"),l("div",Be,[N(l("input",{style:{"text-align":"center"},class:"btn","onUpdate:modelValue":e[3]||(e[3]=t=>d.value=t),type:"number"},null,512),[[R,d.value]])]),l("div",{class:"add btn flex-all-center",onClick:e[4]||(e[4]=t=>S("0.1","+"))},"+")])])):F("",!0),l("div",Ve,[l("div",we,[P(n(s(i)("\u53EF\u5F00\u5F20\u6570"))+" ",1),l("span",null,n(`(${v.value.volume})`),1)]),l("div",ke,[l("div",{class:"minus btn flex-all-center",onClick:e[5]||(e[5]=t=>Y(1,"-"))},"-"),l("div",Ce,[N(l("input",{style:{"text-align":"center"},onInput:G,class:"btn","onUpdate:modelValue":e[6]||(e[6]=t=>o.value=t),type:"number"},null,544),[[R,o.value]])]),l("div",{class:"add btn flex-all-center",onClick:e[7]||(e[7]=t=>Y(1,"+"))},"+")]),l("div",Se,[v.value.volume>1?(f(),b("div",Ye,[V(s(ve),{onChange:T,class:"mainBox",marks:O,modelValue:h.value,"onUpdate:modelValue":e[8]||(e[8]=t=>h.value=t),"hide-label":!0,width:"98%",tooltip:"hover","tooltip-formatter":"{value}%",railStyle:{height:"4px"},processStyle:{background:"#266BFF",height:"4px"}},{step:w(({active:t})=>[l("div",{class:x(["custom-step",{active:t}])},null,2)]),_:1},8,["modelValue"])])):F("",!0)])]),l("div",Ie,[(f(),b(se,null,te(q,(t,Z)=>l("div",{class:"open-item mb-10",key:Z},[l("span",Ue,n(t.label),1),t.value=="lever"?(f(),ne(J,{key:0,class:"value"},{default:w(()=>[V(B,{modelValue:m.value,"onUpdate:modelValue":e[9]||(e[9]=j=>m.value=j),options:y.value},null,8,["modelValue","options"])]),_:1})):(f(),b("span",Ne,n(z(t.value)),1))])),64))]),l("div",{class:x([[o.value>0?s(u).query.type:"disabled"],"btn-wrapper flex-all-center"]),onClick:X},n(s(i)(s(u).query.type)),3),V(M,{round:"",show:_.value,"onUpdate:show":e[10]||(e[10]=t=>_.value=t),position:"bottom","close-on-click-overlay":!1,onClose:I},{default:w(()=>[l("div",Re,[l("img",{src:pe,class:"top-46 close-btn",onClick:I}),l("div",Fe,n(s(i)("Opening")+s(i)("success")),1),l("div",Pe,[e[11]||(e[11]=l("img",{class:"w-12 h-12 mb-4",src:Ae,alt:"avatar"},null,-1)),l("div",Qe,n(s(i)("Finish")),1),l("div",De,n(s(u).query.symbol),1),l("div",{class:x(["text3",s(u).query.type+"-text"])},[P(n(A.value===1?s(i)("marketPrice"):s(i)("\u9650\u4EF7"))+" ",1),l("span",null,n(s(i)("volumn"))+" "+n(o.value),1)],2),l("div",{class:x([s(u).query.type,"btn-wrapper flex-all-center see-btn"]),onClick:L},n(s(i)("viewposition")),3)])])]),_:1},8,["show"])])])}}},Ze=W(Oe,[["__scopeId","data-v-6cedd094"]]);export{Ze as default};
