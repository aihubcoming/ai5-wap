import{S as u,av as E,_ as x,o as c,c as a,e as s,t as i,aW as I,aX as w,d as m,F as C,m as k,g as h,w as g,n as S,h as b,I as v,bK as F,s as p,cm as M,bM as T,ag as H}from"./index-14d2cc83.js";import{_ as O}from"./index-b3de46e1.js";import{A as U}from"./index-db5e9f2d.js";import{F as B}from"./index-75673de3.js";import{_ as Q,a as D,b as P,c as X}from"./fund.api-cc60fbcd.js";import{G as L,a as j}from"./index-c6266493.js";import{L as R}from"./index-48f6c504.js";import{P as V}from"./index-c0ad41d8.js";import{_ as W}from"./icon-close-a4b849b5.js";import{_ as Z}from"./icon_6-f733c3ea.js";import"./index-2fe68c30.js";import"./use-id-f3e51a3e.js";import"./index-691edc31.js";import"./use-tab-status-43fea2a5.js";const Y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAPCAYAAADgbT9oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAENSURBVHgBxZNBSsNQEIb/mdKNK4/gFbqUZmHABNPdO4F4A3sC0xvoDXqLVIjURYtLe4R3hCyELiIzZoRACemD1oDfaubN+//F8A+9vm2fVJFjQIg4p1W5VQwMARUD+o6hUXjWevTQlB7D4eWbHVlVFB9XPJbPZieX+Btea46z7NqzdVaQaGy7wZkQtGJRZ17WcztI02gnonOciQjm5tH2fDjM0mgperp5E9eFaQ/fuPtplkTPqrLAKabJNO++0zFBUW6WBLpHAIG+zG6jx74ZhYSrcrNuvtz0DhW7u2Q6OaZlBNiPaof+jPv910Uc0gaNXRxXlsuO+W9WnZsEoxlcRYsdEI1lbXV7APgvfgBiC2gync8awgAAAABJRU5ErkJggg==";const G={name:"MiningExchangeInput",components:{[U.name]:U,[u.name]:u,[B.name]:B},computed:{},created(){this.currencyList=this.actions,this.allCurrencyList=this.actions,console.log(this.iconImg1,this.iconImg2)},props:{actions:{type:Array,default(){return[]}},title:{type:String,default:""},disabled:{type:Boolean,default:!1},value:{type:[Number,String],default:0},getval:{type:String,default:""},coin:{type:String,default:"user"},coin1:{type:String,default:"AAPL"},showMax:{type:Boolean,default:!0},tips:{type:Array,default(){return[]}},type:{type:Number,default:1},value1:{type:[Number,String],default:0},iconImg2:{type:String,default:""},iconImg1:{type:String,default:""}},watch:{actions(e){this.currencyList=e,this.allCurrencyList=e},value1(e){this.oneValue=e}},data(){return{HOST_URL:E,show:!1,searchValue:"",activeIndex:0,currencyList:[],allCurrencyList:[],oneValue:""}},methods:{onInput(e){this.$emit("input",e)},onMax(){this.$emit("max")},onShowActionSheet(){this.type==1?this.activeIndex=0:this.activeIndex=1,this.actions.length&&(this.show=!0)},onSelect(e){let t={item:e,type:this.activeIndex};this.searchValue="",this.$emit("select",t),this.show=!1},checkActive(e){this.activeIndex=e},searchFun(){this.searchValue?this.currencyList=this.currencyList.filter(e=>e.symbol.toUpperCase().indexOf(this.searchValue.toUpperCase())!=-1):this.currencyList=this.allCurrencyList}}},K={id:"cryptos"},J={class:"flex mt-8 items-center"},z={class:"text-28 flex-1 textColor"},q={style:{"box-sizing":"border-box"},class:"w-full rounded mt-5 px-3 flex items-center box-border py-3 inputBackground"},$=["src"],tt={class:"text-26 mr-5 w-16 textColor"},et={class:"input-wrap flex justify-between flex-1 items-center ml-3"},st=["disabled"],ot=["value","disabled"],nt={class:"flex justify-between text-26 mt-4 text-grey"},it={class:"px-8 py-8 exchange-pop"},lt={class:"tab-list flex"},rt={class:"mt-5 text-30"},ct={class:"flex items-center justify-center mt-5"},at=["src"],mt={class:"mt-5 text-30"},ut={class:"flex items-center justify-center mt-5"},ht=["src"],dt={class:"title"},ft=["placeholder"],_t={class:"list mt-10"},yt=["onClick"],gt={class:"flex-1 flex items-center"},pt=["src"],bt={class:"item-title textColor"},vt={key:0,class:"text-right"},xt={class:"item-title textColor"},At={class:"item-text"};function It(e,t,l,y,o,r){const d=u;return c(),a("div",K,[s("div",J,[s("p",z,i(l.title),1)]),s("div",q,[s("div",{class:"flex border-r-gray border-white items-center",onClick:t[0]||(t[0]=(...n)=>r.onShowActionSheet&&r.onShowActionSheet(...n))},[s("img",{src:`${o.HOST_URL}/symbol/${l.type==1?l.iconImg1:l.iconImg2}.png`,alt:"logo",class:"rounded-full mr-5 currency-icon"},null,8,$),s("span",tt,i(l.type==1?l.coin.toUpperCase():l.coin1.toUpperCase()),1),t[10]||(t[10]=s("img",{src:Y,alt:"logo",class:"icon-arrow"},null,-1))]),s("div",et,[l.type==1?I((c(),a("input",{key:0,placeholder:"",type:"number",class:"h-14 pl-3 border-none inputBackground textColor","onUpdate:modelValue":t[1]||(t[1]=n=>o.oneValue=n),onInput:t[2]||(t[2]=(...n)=>r.onInput&&r.onInput(...n)),disabled:l.disabled},null,40,st)),[[w,o.oneValue]]):m("",!0),l.type==2?(c(),a("input",{key:1,placeholder:"",type:"number",class:"h-14 pl-3 border-none inputBackground textColor",value:l.value,onInput:t[3]||(t[3]=(...n)=>r.onInput&&r.onInput(...n)),disabled:l.disabled},null,40,ot)):m("",!0)]),l.showMax?(c(),a("div",{key:0,class:"text-blue max-title pr-5",onClick:t[4]||(t[4]=(...n)=>r.onMax&&r.onMax(...n))},i(e.$t("\u6700\u5927")),1)):m("",!0)]),s("div",nt,[(c(!0),a(C,null,k(l.tips,(n,_)=>(c(),a("p",{key:_},i(n),1))),128))]),h(d,{show:o.show,"onUpdate:show":t[9]||(t[9]=n=>o.show=n),position:"bottom",class:"mainBackground",style:{height:"80%"}},{default:g(()=>[s("div",it,[s("div",lt,[s("div",{class:S(["tab-item flex-1 textColor",[o.activeIndex==0?"active":""]]),onClick:t[5]||(t[5]=n=>r.checkActive(0))},[s("div",rt,i(e.$t("\u4ECE")),1),s("div",ct,[s("img",{src:`${o.HOST_URL}/symbol/${l.iconImg1}.png`,alt:"logo",class:"w-8 h-8 rounded-full mr-5 currency-icon"},null,8,at),b(" "+i(l.coin.toUpperCase()),1)])],2),s("div",{class:S(["tab-item flex-1 textColor",[o.activeIndex==1?"active":""]]),onClick:t[6]||(t[6]=n=>r.checkActive(1))},[s("div",mt,i(e.$t("\u81F3")),1),s("div",ut,[s("img",{src:`${o.HOST_URL}/symbol/${l.iconImg2}.png`,alt:"logo",class:"w-8 h-8 rounded-full mr-5 currency-icon"},null,8,ht),b(" "+i(l.coin1.toUpperCase()),1)])],2)]),s("div",dt,i(e.$t("\u95EA\u5151\u81F3")),1),s("div",null,[I(s("input",{"onUpdate:modelValue":t[7]||(t[7]=n=>o.searchValue=n),onInput:t[8]||(t[8]=(...n)=>r.searchFun&&r.searchFun(...n)),class:"search-input",placeholder:e.$t("\u641C\u7D22")},null,40,ft),[[w,o.searchValue]])]),s("div",_t,[(c(!0),a(C,null,k(o.currencyList,(n,_)=>(c(),a("div",{class:"list-item flex mb-8",key:_,onClick:A=>r.onSelect(n)},[s("div",gt,[s("div",null,[s("img",{src:`${o.HOST_URL}/symbol/${n.symbol.toLowerCase()}.png`,alt:"logo",class:"w-8 h-9 rounded-full mr-5 currency-icon"},null,8,pt)]),s("div",null,[s("div",bt,i(n.symbol.toUpperCase()),1)])]),o.activeIndex==0?(c(),a("div",vt,[s("div",xt,i(n.usable),1),s("div",At,"$"+i(n.usdt),1)])):m("",!0)],8,yt))),128))])])]),_:1},8,["show"])])}const N=x(G,[["render",It],["__scopeId","data-v-bbcdebaf"]]),wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEnSURBVHgBtZThUcMwDIUVXQcIE1A26Ahlg24ATEC6QOom+U+YgK7ABHSEbEA2wAsk4Ymz73rGhjss3p3Osq18kRXFBUVkjFkz88uyLNuiKPq6rveX+23bHuZ5NnAHxNwi3oYMjkEBexOozDFWWNtcQLcOKtogtqKIOAaFuw7iSkoI8dc/giWrBPRPWgXQkpTEgO60oV9gQJ8iUEuZ4hCKLjhieKVMsQOJLPwHlMaQgqTGPYBXsBv4J1KS74rsmoZi+iepgnHyUkwV3HXdHVr3HfbRNE2lAsbF9DhN04lc66IRDivKFCA72H2wbDUy/vbX4kX77IwjULn4B82uGD1UJloZe+joF1IZjykCvr79DZoEI7DHMDj/iIfOfs8d9Vl89Ow5BhV9Auegm6+XSEBMAAAAAElFTkSuQmCC";const Ct={name:"MiningAcccount",components:{[L.name]:L,[j.name]:j,[u.name]:u,[v.name]:v,MiningExchangeInput:N,[R.name]:R,[V.name]:V},props:{show:{type:Boolean,default:!1}},computed:{...F("user",["userInfo"]),tabList(){return[{id:1,text:this.$t("\u63D0\u5E63")},{id:2,text:this.$t("\u4EA4\u6613\u8A18\u9304")}]},addr(){const e=this.userInfo.account;return e&&e.substr(0,5)+"********"+e.substr(e.length-5)},amountAvailable(){console.log(this.form.symbol),console.log(this.wallets);let e,t=this.wallets.find(l=>l.symbol.toUpperCase()===this.form.symbol.toUpperCase());return t?e=t.usable:e=0,e}},data(){return{showPopup:!1,activeRecord:"exchange",valueTwo:0,rate:0,form:{symbol:"ETH",symbol_to:"USDT",volume:"",rate:0,iconImg2:"",iconImg1:"",symbol_ex:"",symbol_to_ex:""},interval:null,actions:[],balance:0,page:1,loading:!1,finished:!1,noData:!1,wallets:[],active:0}},created(){Q({symbolType:"cryptos"}).then(t=>{this.actions=[],t.extends.map(l=>{this.actions.push({symbol:l.symbol,name:l.symbol,symbol_data:l.symbol,usable:l.usable,usdt:l.usdt,symbol_data:l.symbol_data})}),this.wallets=t.extends,this.form.symbol_to=this.actions[2].symbol_data,this.form.symbol=this.actions[0].symbol_data,this.form.iconImg1=this.actions[0].symbol_data,this.form.iconImg2=this.actions[2].symbol_data,this.form.symbol_ex=this.actions[0].symbol,this.form.symbol_to_ex=this.actions[2].symbol})},methods:{onMax(){this.amountAvailable/1?(this.form.volume=this.amountAvailable,this.debounceFn()):p(this.$t("\u4F60\u6CA1\u6709\u53EF\u63D0\u6570\u91CF"))},onInput(e){this.form.volume=e.target.value,this.clearInterval(),this.form.volume==""?this.form.get_volume="":this.debounceFn()},debounceFn:M(function(){if(this.form.volume<=0){p(this.$t("\u4EA4\u6613\u4EF7\u683C\u4E0D\u80FD\u5C0F\u4E8E\u7B49\u4E8E0"));return}else this.fetchRate(!0)},300),fetchRate(e){let t={symbol:this.form.symbol,symbol_to:this.form.symbol_to,volume:this.form.volume};D(t).then(l=>{const{get_rate:y}=l;this.form.rate=y,this.clearInterval(),e&&typeof e=="function"&&e()})},onSwitch(){const e=this.form.symbol;this.form.symbol=this.form.symbol_to,this.form.symbol_to=e;const t=this.form.iconImg1;this.form.iconImg1=this.form.iconImg2,this.form.iconImg2=t,this.form.volume="",this.clearInterval()},onSelect(e,t){t.type==0?(this.form.symbol=t.item.symbol_data,this.form.iconImg1=t.item.symbol_data,this.form.symbol_ex=t.item.symbol):(this.form.symbol_to=t.item.symbol_data,this.form.iconImg2=t.item.symbol_data,this.form.symbol_to_ex=t.item.symbol),this.form.symbol!==this.form.symbol_to&&(this.form.volume=""),this.clearInterval()},onConfirm(){this.clearInterval(),this.form.volume==""?p(this.$t("\u8BF7\u8F93\u5165\u6570\u91CF")):this.fetchRate(()=>{this.$emit("exchange",this.form)})},clearInterval(){clearInterval(this.interval),this.interval=null}},beforeUnmount(){this.clearInterval()}},kt={id:"cryptos"},St={id:"mining-account"},Ut={style:{position:"relative"},class:"px-8 pb-24"},Bt={key:0,class:"text-28 text-grey"},Lt={class:"textColor"},jt={class:"flex justify-center convert-box my-42 w-16 h-16"},Rt={class:"exchange-btn w-full flex justify-center mt-28"};function Vt(e,t,l,y,o,r){const d=N;return c(),a("div",kt,[s("div",St,[s("div",Ut,[h(d,{title:e.$t("\u4ECE"),value1:o.form.volume,actions:o.actions,onSelect:t[0]||(t[0]=n=>r.onSelect("symbol",n)),onInput:r.onInput,type:1,onMax:r.onMax,coin:o.form.symbol,coin1:o.form.symbol_to,tips:[],iconImg1:o.form.iconImg1,iconImg2:o.form.iconImg2,showMax:!0},null,8,["title","value1","actions","onInput","onMax","coin","coin1","iconImg1","iconImg2"]),l.show?(c(),a("div",Bt,[b(i(e.$t("\u53EF\u7528\u6570\u91CF"))+"\uFF1A",1),s("span",Lt,i(r.amountAvailable)+"\xA0"+i(o.form.symbol.toUpperCase()),1)])):m("",!0),s("div",jt,[s("img",{src:wt,alt:"",class:"w-6 h-6",onClick:t[1]||(t[1]=(...n)=>r.onSwitch&&r.onSwitch(...n))})]),h(d,{title:e.$t("\u81F3"),value:o.form.volume?(o.form.volume*o.form.rate).toFixed(5):"",actions:o.actions,onSelect:t[2]||(t[2]=n=>r.onSelect("symbol_to",n)),disabled:!0,type:2,coin:o.form.symbol,coin1:o.form.symbol_to,tips:[],showMax:!1,iconImg1:o.form.iconImg1,iconImg2:o.form.iconImg2},null,8,["title","value","actions","coin","coin1","iconImg1","iconImg2"]),s("div",Rt,[s("p",{class:"h-24 btnMain mx-auto flex justify-center items-center text-white w-full",onClick:t[3]||(t[3]=(...n)=>r.onConfirm&&r.onConfirm(...n))},i(e.$t("\u8BE2\u4EF7")),1)])])])])}const Et=x(Ct,[["render",Vt],["__scopeId","data-v-e9299180"]]);const Nt={components:{assetsHead:O,ListAccount:Et,[u.name]:u},data(){return{show:!1,session_token:"",detail:{},interval:null,count:10,HOST_URL:E}},created(){this.getSessionToken()},methods:{getSessionToken(){P().then(e=>{const{session_token:t}=e;this.session_token=t})},onPopup(e){console.log(e),this.clearInterval(),this.detail=e,this.show=!0,this.count=10,this.interval=setInterval(()=>{this.count--,this.count<=0&&(this.clearInterval(),p(this.$t("\u6C47\u7387\u5DF2\u53D8\u5316,\u8BF7\u91CD\u65B0\u786E\u8BA4")),this.show=!1)},1e3)},onClose(){this.$refs.exchange.fetchRate(!0),this.clearInterval()},onClickLeft(){this.$router.go(-1)},onConfirm(){this.clearInterval();let e={symbol:this.detail.symbol,symbol_to:this.detail.symbol_to,volume:this.detail.volume};X({...e,session_token:this.session_token}).then(()=>{this.$router.push("/cryptos/exchangeSubmit?data="+JSON.stringify(this.detail)),this.getSessionToken(),this.show=!1}).catch(()=>{this.getSessionToken(),this.show=!1})},clearInterval(){this.interval&&(clearInterval(this.interval),this.interval=null)}},beforeRouteLeave(e,t,l){this.clearInterval(),l()}},Ft={id:"cryptos"},Mt={class:"flex items-center"},Tt={class:"fee ex-bg"},Ht={class:"exchange-page"},Ot={class:"pop-box relative"},Qt={class:"text-38 text-center pt-14 textColor"},Dt={class:"px-8 flex items-center mt-8"},Pt={class:"flex-1 textColor text-center"},Xt={class:"text-center flex justify-center"},Wt=["src"],Zt={class:"text-grey text-28 mt-5"},Yt={class:"text-30 mt-8"},Gt={class:"flex-1 textColor text-center"},Kt={class:"text-center flex justify-center"},Jt=["src"],zt={class:"text-grey text-28 mt-5"},qt={key:0,class:"text-30 mt-8"},$t={class:"mx-8 px-8 pt-5 pb-8 tab_background mt-13 rounded"},te={class:"flex justify-between text-28 mt-6"},ee={class:"text-grey"},se={class:"textColor"},oe={class:"flex justify-between text-28 mt-6"},ne={class:"text-grey"},ie={class:"textColor"},le={class:"h-24 text-30 rounded flex justify-between px-8 box-border items-center mt-14 mb-12 text-white w-full"};function re(e,t,l,y,o,r){const d=v,n=T,_=H("list-account"),A=u;return c(),a("div",Ft,[h(n,{"left-arrow":"",onClickLeft:r.onClickLeft},{right:g(()=>[h(d,{class:"exchange-icon",onClick:t[0]||(t[0]=f=>e.$router.push("/cryptos/exchangeHistory")),name:"clock-o"})]),title:g(()=>[s("div",Mt,[b(i(e.$t("\u95EA\u5151"))+" ",1),s("div",Tt,i(e.$t("0\u624B\u7EED\u8D39")),1)])]),_:1},8,["onClickLeft"]),s("div",Ht,[h(_,{show:"",class:"mt-24",type:"exchange",onExchange:r.onPopup,ref:"exchange"},null,8,["onExchange"]),h(A,{class:"tabBackground",show:o.show,"onUpdate:show":t[4]||(t[4]=f=>o.show=f),position:"bottom","close-on-click-overlay":!1,onClose:r.onClose},{default:g(()=>[s("div",Ot,[s("img",{src:W,class:"currency-icon absolute right-20 top-20",onClick:t[1]||(t[1]=f=>o.show=!1)}),s("p",Qt,i(e.$t("\u786E\u8BA4\u62A5\u4EF7")),1),s("div",Dt,[s("div",Pt,[s("div",Xt,[o.detail.symbol?(c(),a("img",{key:0,src:`${o.HOST_URL}/symbol/${o.detail.iconImg1}.png`,alt:"logo",class:"w-16 h-16 rounded-full"},null,8,Wt)):m("",!0)]),s("div",Zt,i(e.$t("\u4ECE")),1),s("div",Yt,i(o.detail.volume)+" "+i(o.detail.symbol),1)]),t[5]||(t[5]=s("img",{src:Z,class:"w-8 h-5",style:{"margin-top":"-65px"}},null,-1)),s("div",Gt,[s("div",Kt,[o.detail.symbol_to?(c(),a("img",{key:0,src:`${o.HOST_URL}/symbol/${o.detail.iconImg2}.png`,alt:"logo",class:"w-16 h-16 rounded-full"},null,8,Jt)):m("",!0)]),s("div",zt,i(e.$t("\u81F3")),1),o.detail.volume?(c(),a("div",qt,i((o.detail.volume*o.detail.rate).toFixed(5))+" "+i(o.detail.symbol_to),1)):m("",!0)])]),s("ul",$t,[s("li",te,[s("span",ee,i(e.$t("\u7C7B\u578B")),1),s("span",se,i(e.$t("\u5E02\u4EF7")),1)]),s("li",oe,[s("span",ne,i(e.$t("\u6C47\u7387")),1),s("span",ie,"1 "+i(o.detail.symbol&&o.detail.symbol.toUpperCase())+"\u2248"+i((o.detail.rate*1).toFixed(5))+" "+i(o.detail.symbol_to&&o.detail.symbol_to.toUpperCase()),1)])]),s("div",le,[s("p",{class:"w-80 h-20 rounded flex justify-center items-center bgDark",onClick:t[2]||(t[2]=f=>o.show=!1)},i(e.$t("\u8FD4\u56DE")),1),s("p",{class:"w-80 h-20 rounded btnMain text-white flex justify-center items-center",onClick:t[3]||(t[3]=(...f)=>r.onConfirm&&r.onConfirm(...f))},i(e.$t("\u95EA\u5151"))+"\uFF08"+i(o.count)+i(e.$t("\u79D2"))+"\uFF09",1)])])]),_:1},8,["show","onClose"])])])}const Ae=x(Nt,[["render",re],["__scopeId","data-v-106690dd"]]);export{Ae as default};
