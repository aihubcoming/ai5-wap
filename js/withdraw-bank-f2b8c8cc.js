import{_ as K,v as Q,r as o,bR as X,l as Y,u as Z,cc as ee,I as te,o as y,c as k,g as l,w as i,e as t,t as s,s as $,h as W,F as ae,m as se,n as oe,d as ne,f as le,bi as ie,cm as ue,bP as re}from"./index-14d2cc83.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{f as ce}from"./confirm-order-a32b7bdc.js";import{o as de}from"./trade.api-43084cdd.js";import{a as pe}from"./recharge.api-b7511e73.js";import{_ as me}from"./withdraw.api-63ff06f4.js";import{C as ve}from"./index-63de06b3.js";import{F as _e}from"./index-c81273af.js";import{s as he}from"./function-call-7c091f7b.js";import{S as fe}from"./index-fc704cc7.js";import{A as we}from"./index-db5e9f2d.js";import{F as be}from"./index-75673de3.js";import{B as ye}from"./index-e68322b9.js";import"./close-36033e05.js";import"./Dialog-c05593b7.js";import"./index-2fe68c30.js";import"./use-id-f3e51a3e.js";const ke={class:"charge-bank pb-20"},$e={class:"pt-6"},ge={class:"px-4 title"},Ce={class:"px-4 ahs pt-2 pb-2 text-sm"},Ve={class:"pt-6 pb-2"},xe={class:"pt-6 pb-2"},Fe={key:0,class:"bankList"},Ie=["onClick"],Be={class:"pt-6 pb-2"},Ae={class:"currency-title"},Te={class:"flex px-4 pt-4 pb-8 justify-between"},Se={class:"ahs text-base"},We={class:"money text-base"},Me={class:"mr-1 font-semibold"},Ue={class:"mx-4 pb-10 pt-10 quantity-wrap"},Ne={class:"flex justify-between items-center"},Re={class:"ahs"},je={class:"money"},Le={class:"mr-1 text-xl font-semibold"},Pe={class:"text-base"},De={class:"flex justify-between pt-10"},ze={class:"ahs"},qe={class:"money text-base"},Ee={class:"mr-1 font-semibold"},Ge={class:"px-4 mt-4 centent"},Oe={class:"mt-2 text-xs"},He={class:"mt-2 text-xs"},Je={class:"mt-2 text-xs"},Ke={class:"mt-2 text-xs"},Qe={class:"px-4 mt-6"},Xe={__name:"withdraw-bank",setup(Ye){const{t:d}=Q.exports.useI18n(),F=o([]),I=o([]),_=o(!1),h=o(!1),B=o(""),f=o(0);X().then(e=>{f.value=e.money});const A=o([]),c=o({});o([]),Y(async()=>{U(),de().then(e=>{A.value=e.map(a=>({name:a.currency,rate:a.rate})),F.value=A.value}),pe().then(e=>{c.value.session_token=e.session_token})});const u=o(""),p=o(1),w=o(""),r=o(""),T=Z(),b=o(!1),m=o(0),g=o(0),M=()=>{ie("recordId",3),T.push("/Record/DepositAndWithdrawal")},U=()=>{ee().then(e=>{e.length===0?he({title:d("tip"),message:d("Bindbankcard"),confirmButtonText:d("confirm")}).then(()=>{T.push("/payMentMethod/list")}):e.map(a=>{let v={name:a.methodName+" "+a.paramValue1,value:a.uuid};I.value.push(v)})})},N=ue(function(){R()},500),R=()=>{if(r.value===""){m.value="";return}me({amount:r.value,channel:"USDT_"}).then(e=>{e.withdraw_fee_type=="rate"?(m.value=e.fee,g.value=e.volume_last):(m.value=e.fee*p.value,g.value=r.value-m.value),c.value.fee=m.value})};o("fiat");const j=e=>{console.log("failed",e)},L=()=>{r.value=f.value*p.value},S=e=>{e=="fiat"?_.value=!0:h.value=!h.value},P=e=>{u.value=e.name,p.value=e.rate,_.value=!1},D=(e,a)=>{B.value=a,c.value.payment_method_id=e.value,w.value=e.name,h.value=!1},z=()=>{if(!u.value){$(d("selectFrenchCurrency"));return}if(!r.value){$(d("enterWithdrawalAmount"));return}if(!w.value){$(d("selectWithdrawalMethod"));return}if(!/^[0-9]+([.]{1}[0-9]+){0,1}$/.test(r.value)){$(d("enterWithdrawalAmountNumber"));return}c.value.direction="withdraw",c.value.currency=u.value,c.value.coin_amount=r.value/p.value,c.value.fa_amount=r.value,b.value=!0},q=()=>{b.value=!1};return(e,a)=>{const v=te,E=re,G=fe,O=we,C=be,V=ve,H=_e,J=ye;return y(),k("div",ke,[l(G,null,{default:i(()=>[l(E,null,{title:i(()=>[W(s(e.$t("Bankcardwithdrawal")),1)]),right:i(()=>[l(v,{name:"orders-o",onClick:M})]),_:1})]),_:1}),t("div",$e,[t("h1",ge,s(e.$t("Bankcardwithdrawal")),1),t("h4",Ce,s(e.$t("WithdrawUsdBank")),1),l(O,{show:_.value,"onUpdate:show":a[0]||(a[0]=n=>_.value=n),actions:F.value,onSelect:P},null,8,["show","actions"]),l(H,{onFailed:j},{default:i(()=>[l(V,{inset:""},{default:i(()=>[t("p",Ve,s(e.$t("FrenchCurrency")),1),l(C,{class:"select-item",onClick:a[1]||(a[1]=n=>S("fiat")),readonly:"",modelValue:u.value,"onUpdate:modelValue":a[2]||(a[2]=n=>u.value=n),name:"pattern",placeholder:e.$t("selectFrenchCurrency")},{extra:i(()=>[l(v,{name:"arrow-down",color:"#878A96",size:"18"})]),_:1},8,["modelValue","placeholder"])]),_:1}),l(V,{style:{position:"relative"},inset:""},{default:i(()=>[t("p",xe,s(e.$t("WithdrawalMethod")),1),h.value?(y(),k("div",Fe,[t("ul",null,[(y(!0),k(ae,null,se(I.value,(n,x)=>(y(),k("li",{class:oe([x==B.value?"active":""]),onClick:Ze=>D(n,x),key:x},s(n.name),11,Ie))),128))])])):ne("",!0),l(C,{class:"select-item",onClick:a[3]||(a[3]=n=>S("payType")),modelValue:w.value,"onUpdate:modelValue":a[4]||(a[4]=n=>w.value=n),readonly:"",name:"picker",placeholder:e.$t("selectWithdrawalMethod")},{extra:i(()=>[l(v,{name:"arrow-down",color:"#878A96",size:"18"})]),_:1},8,["modelValue","placeholder"])]),_:1}),l(V,{inset:""},{default:i(()=>[t("p",Be,s(e.$t("withdrawalAmount")),1),l(C,{class:"select-item",name:"picker",type:"number",onInput:le(N),modelValue:r.value,"onUpdate:modelValue":a[6]||(a[6]=n=>r.value=n),placeholder:e.$t("enterwithdrawalAmount")},{extra:i(()=>[t("span",Ae,s(u.value),1),t("span",{class:"ml-2 all",onClick:a[5]||(a[5]=n=>L())},s(e.$t("all")),1)]),_:1},8,["onInput","modelValue","placeholder"])]),_:1})]),_:1}),t("div",Te,[t("div",Se,s(e.$t("available")),1),t("div",We,[t("span",Me,s(f.value*p.value),1),t("span",null,s(u.value),1)])]),t("div",Ue,[t("div",Ne,[t("div",Re,s(e.$t("AvailableaccountAmount")),1),t("div",je,[t("span",Le,s(f.value*p.value),1),t("span",Pe,s(u.value),1)])]),t("div",De,[t("div",ze,s(e.$t("WithdrawalFee")),1),t("div",qe,[t("span",Ee,s(m.value||"0.00"),1),t("span",null,s(u.value),1)])])])]),t("div",Ge,[t("h2",null,s(e.$t("WithdrawalInstructions")),1),t("p",Oe,s(e.$t("bankTips1")),1),t("p",He,s(e.$t("bankTips2")),1),t("p",Je,s(e.$t("bankTips3")),1),t("p",Ke,s(e.$t("bankTips4")),1)]),t("div",Qe,[l(J,{class:"w-full",type:"primary",onClick:z},{default:i(()=>[W(s(e.$t("submit")),1)]),_:1})]),l(ce,{show:b.value,"onUpdate:show":a[7]||(a[7]=n=>b.value=n),payInfo:c.value,onClose:q,fee:m.value,rate:p.value,fiatValue:u.value,volume_last:g.value},null,8,["show","payInfo","fee","rate","fiatValue","volume_last"])])}}},$t=K(Xe,[["__scopeId","data-v-dacfb1e7"]]);export{$t as default};
