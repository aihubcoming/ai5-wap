import{p as S,z as T,y as g,$ as h,J as N,bN as A,B as F,a4 as k,a8 as W,bk as C,bl as x,g as o,bF as I,X as v,H as L}from"./index-a1ce0b9b.js";const[O,d]=S("circle");let _=0;const P=t=>Math.min(Math.max(+t,0),100);function z(t,c){const l=t?1:0;return`M ${c/2} ${c/2} m 0, -500 a 500, 500 0 1, ${l} 0, 1000 a 500, 500 0 1, ${l} 0, -1000`}const G={text:String,size:T,fill:g("none"),rate:h(100),speed:h(0),color:[String,Object],clockwise:N,layerColor:String,currentRate:A(0),strokeWidth:h(40),strokeLinecap:String,startPosition:g("top")};var j=F({name:O,props:G,emits:["update:currentRate"],setup(t,{emit:c,slots:l}){const y=`van-circle-${_++}`,f=k(()=>+t.strokeWidth+1e3),R=k(()=>z(t.clockwise,f.value)),$=k(()=>{const e={top:0,right:90,bottom:180,left:270}[t.startPosition];if(e)return{transform:`rotate(${e}deg)`}});W(()=>t.rate,r=>{let e;const s=Date.now(),a=t.currentRate,n=P(r),i=Math.abs((a-n)*1e3/+t.speed),u=()=>{const w=Date.now(),m=Math.min((w-s)/i,1)*(n-a)+a;c("update:currentRate",P(parseFloat(m.toFixed(1)))),(n>a?m<n:m>n)&&(e=x(u))};t.speed?(e&&C(e),e=x(u)):c("update:currentRate",n)},{immediate:!0});const E=()=>{const{strokeWidth:e,currentRate:s,strokeLinecap:a}=t,n=3140*s/100,i=v(t.color)?`url(#${y})`:t.color,u={stroke:i,strokeWidth:`${+e+1}px`,strokeLinecap:a,strokeDasharray:`${n}px ${3140}px`};return o("path",{d:R.value,style:u,class:d("hover"),stroke:i},null)},b=()=>{const r={fill:t.fill,stroke:t.layerColor,strokeWidth:`${t.strokeWidth}px`};return o("path",{class:d("layer"),style:r,d:R.value},null)},p=()=>{const{color:r}=t;if(!v(r))return;const e=Object.keys(r).sort((s,a)=>parseFloat(s)-parseFloat(a)).map((s,a)=>o("stop",{key:a,offset:s,"stop-color":r[s]},null));return o("defs",null,[o("linearGradient",{id:y,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[e])])},M=()=>{if(l.default)return l.default();if(t.text)return o("div",{class:d("text")},[t.text])};return()=>o("div",{class:d(),style:I(t.size)},[o("svg",{viewBox:`0 0 ${f.value} ${f.value}`,style:$.value},[p(),b(),E()]),M()])}});const H=L(j);export{H as C};
