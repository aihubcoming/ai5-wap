import{cB as h,L as b,_ as x,o,c as a,e as y,F as d,m as u,n as g,t as m,d as p,g as v}from"./index-16c70849.js";import{k as w}from"./index-944c6ec7.js";import{a as C}from"./trade.api-0e1913aa.js";const j="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF4SURBVHgB7ZdBasJQFEXv+6adtjtolpAlZAfNDhyKdCTFSaUYKTpRcFSK7aRL0B1kCS4h3YHzxrz+6sT8GFHxIYF3Bgnc5P2cwCeXAIpSgHBF4umH38g8fzdbe1kad9pp1YyHK3KbmRjEzd3MZGZgT3HVjEHNUGFpVFgaFZbmYHEMp+8B8pugEJrfZa/ztMQJvE1mkSG6d3PDaDIQFoV4nhMt3HvzfJ2+dtvJ4eLIvIgI/d2IM+//w36ScIMwBcN3c95zL4MiYkRubqiR2FOie1gaFZZGhaWpnfDmOzyafPWZ2Xcv2lYJyhk9DsefD6Xc8OrludWBMBthBoe2IMKjJgjBvhexF1J7EBfWPSyNCkujwtKosDT1rGZiXvC2qQpsGo2cVmMsec8vEhGvUIGt/QWY7srrc2gH/WPWR84/25kDDMezmIj6zsMHvW4rxgUYjWffVrh5yvq6h6VRYWlUWJp6FkcVOfLEsClluBBrwtwwp1LrK+fwB0EucpSI80v3AAAAAElFTkSuQmCC",A={grid:{show:!0,horizontal:{show:!0,size:1,color:"rgba(68,75,88,0.04)",style:"solid",dashValue:[2,2]},vertical:{show:!0,size:1,color:"rgba(68,75,88,0.04)",style:"solid",dashValue:[2,2]}},candle:{margin:{top:.5,bottom:.1},type:"candle_solid",bar:{upColor:"#2dbd83",downColor:"#f24760",noChangeColor:"#888888"},area:{lineSize:2,lineColor:"#e7bb41",value:"close",backgroundColor:[{offset:0,color:"rgba(230, 186, 65, 0.01)"},{offset:1,color:"rgba(230, 186, 65, 0.2)"}]},priceMark:{show:!0,high:{show:!0,textMargin:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"},low:{show:!0,textMargin:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"},last:{show:!0,line:{show:!0,style:"dash",dashValue:[4,4],size:1},text:{show:!0,size:12,paddingLeft:2,paddingTop:2,paddingRight:2,paddingBottom:2,family:"Helvetica Neue",weight:"normal",borderRadius:2}}},tooltip:{showRule:"none",showType:"standard",labels:[h.global.t("\u65F6\u95F4")+" ",h.global.t("\u5F00")+" ",h.global.t("\u6536")+" ",h.global.t("\u9AD8")+" ",h.global.t("\u4F4E")+" ",h.global.t("\u6210\u4EA4\u91CF")+" "],values:null,defaultValue:"n/a",rect:{paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:6,offsetLeft:8,offsetTop:8,offsetRight:8,borderRadius:4,borderSize:1},text:{size:12,family:"Helvetica Neue",weight:"normal",marginLeft:8,marginTop:6,marginRight:8,marginBottom:0}}},technicalIndicator:{margin:{top:100,bottom:.1},bar:{},line:{size:1},circle:{},lastValueMark:{show:!1,text:{show:!1,size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:3,paddingTop:2,paddingRight:3,paddingBottom:2,borderRadius:2}},tooltip:{showRule:"always",showType:"standard",showName:!0,showParams:!0,defaultValue:"n/a",text:{size:10,family:"Helvetica Neue",weight:"normal",marginTop:6,marginRight:8,marginBottom:0,marginLeft:8}}},xAxis:{show:!0,height:null,axisLine:{show:!0,color:"rgba(68,75,88,0.2)",size:1},tickText:{show:!0,family:"Helvetica Neue",weight:"normal",size:12,paddingTop:3,paddingBottom:6},tickLine:{show:!0,size:1,length:3}},yAxis:{show:!0,width:null,position:"right",type:"normal",inside:!1,reverse:!1,axisLine:{show:!1,color:"rgba(68,75,88,0.2)",size:1},tickText:{show:!0,family:"Helvetica Neue",weight:"normal",size:12,paddingLeft:3,paddingRight:6},tickLine:{show:!1,size:1,length:3}},separator:{size:1,color:"rgba(68,75,88,0.2)",fill:!0,activeBackgroundColor:"rgba(230, 230, 230, .15)"},crosshair:{show:!0,horizontal:{show:!0,line:{show:!0,style:"dash",dashValue:[4,2],size:1,color:"#888888"},text:{show:!0,color:"#D9D9D9",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:2,borderSize:1,borderColor:"#505050",borderRadius:2,backgroundColor:"#505050"}},vertical:{show:!0,line:{show:!0,style:"dash",dashValue:[4,2],size:1,color:"#888888"},text:{show:!0,color:"#D9D9D9",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:2,borderSize:1,borderColor:"#505050",borderRadius:2,backgroundColor:"#505050"}}},shape:{point:{backgroundColor:"#2196F3",borderColor:"#2196F3",borderSize:1,radius:4,activeBackgroundColor:"#2196F3",activeBorderColor:"#2196F3",activeBorderSize:1,activeRadius:6},line:{style:"solid",color:"#2196F3",size:1,dashValue:[2,2]},polygon:{style:"stroke",stroke:{style:"solid",size:1,color:"#2196F3",dashValue:[2,2]},fill:{color:"rgba(33, 150, 243, 0.1)"}},arc:{style:"stroke",stroke:{style:"solid",size:1,color:"#2196F3",dashValue:[2,2]},fill:{color:"#2196F3"}},text:{style:"fill",color:"#2196F3",size:12,family:"Helvetica Neue",weight:"normal",offset:[0,0]}},annotation:{position:"top",offset:[20,0],symbol:{type:"diamond",size:8,color:"#2196F3",activeSize:10,activeColor:"#FF9600"}},tag:{position:"point",offset:0,line:{show:!0,style:"DASH",dashValue:[4,2],size:1,color:"#2196F3"},text:{color:"#FFFFFF",backgroundColor:"#2196F3",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:2,borderRadius:2,borderSize:1,borderColor:"#2196F3"},mark:{offset:0,color:"#FFFFFF",backgroundColor:"#2196F3",size:12,family:"Helvetica Neue",weight:"normal",paddingLeft:2,paddingRight:2,paddingTop:2,paddingBottom:2,borderRadius:2,borderSize:1,borderColor:"#2196F3"}}};let r=null;const _={name:"KlineCharts",data(){return{dealInfo:{},timeValue:{},subTechnicalIndicatorTypes:["MA","EMA","BOLL","VOL","MACD","KDJ","RSI"],typeValue:"VOL",klinecharts:null,chart:null,chartLoading:!0,paneId:"",chartData:[],timer:null}},computed:{timeList(){return[{id:"1min",time:"1min",text:this.$t("\u5206\u65F6"),ts:1*60*1e3},{id:"1mins",time:"1min",text:"1"+this.$t("\u5206"),ts:1*60*1e3},{id:"5min",time:"5min",text:"5"+this.$t("\u5206"),ts:5*60*1e3},{id:"15min",time:"15min",text:"15"+this.$t("\u5206"),ts:15*60*1e3},{id:"30min",time:"30min",text:"30"+this.$t("\u5206"),ts:30*60*1e3},{id:"60min",time:"60min",text:"1"+this.$t("\u5C0F\u65F6"),ts:60*60*1e3},{id:"4hour",time:"4hour",text:"4"+this.$t("\u5C0F\u65F6"),ts:4*60*60*1e3},{id:"1day",time:"1day",text:"1"+this.$t("\u5929"),ts:24*60*60*1e3},{id:"1week",time:"1week",text:"1"+this.$t("\u5468"),ts:7*24*60*60*1e3},{id:"1mon",time:"1mon",text:"1"+this.$t("\u6708"),ts:30*24*60*60*1e3}]}},components:{[b.name]:b},props:{symbol:{type:String,default:""},updateKey:{type:Number,default:0},updateData:{type:Object,default(){return{}}},showBottom:{type:Boolean,default:!0},isChangeLine:{type:Boolean,default:!1},isNight:{type:Boolean,defalult:!0},isChange:{type:Boolean,defalult:!1}},mounted(){this.initData()},beforeUnmount(){w.exports.dispose("kline")},watch:{isChangeLine(s){this.clearTimer(),this.fetchData()},updateKey(){const s=r.getDataList();if(s.length>0){const t=s[s.length-1],i=this.updateData,c=this.timeValue,l={close:i.close/1,current_time:t.current_time,high:t.high>i.close/1?t.high:i.close/1,line:c.id,low:t.low<i.close/1?t.low:i.close/1,open:t.open,symbol:t.symbol,ts:t.ts,timestamp:i.ts-t.ts<c.ts?t.ts:t.ts+c.ts,volume:t.volume/1};this.$nextTick(()=>{this.setChartType(),r.updateData(l)})}}},methods:{initData(){this.timeValue=this.timeList[0],r=w.exports.init("kline",A),r.setOffsetRightSpace(25),r.setDataSpace(10),r.setPriceVolumePrecision(4,2),r.createTechnicalIndicator("MA",!1,{id:"candle_pane"}),this.paneId=r.createTechnicalIndicator("VOL"),this.fetchData()},fetchData(s){this.chartLoading=!0,C(this.symbol,this.timeValue.time||"1min").then(t=>{this.chartLoading=!1,t.map(c=>{c.timestamp=c.ts});let i=2;t[0].decimals&&(i=t[0].decimals),r.setPriceVolumePrecision(i,2),this.setChartType(),r.applyNewData(t),this.$emit("updataLine",!1)})},setChartType(){let s="area";this.timeValue.id==="1min"?s="area":s="candle_solid",r.setStyleOptions({candle:{type:s}})},choiceTime(s){this.timeValue=s,this.clearTimer(),this.fetchData()},choiceType(s){this.typeValue=s,r.createTechnicalIndicator(s,!1,{id:this.paneId})},clearTimer(){clearInterval(this.timer),this.timer=null}},deactivated(){this.clearTimer()}},z={id:"cryptos"},F={class:"kline-charts"},T={class:"flex px-8 pb-5 box-border justify-between text-grey fontStyle text-26",style:{"border-bottom":"1px solid rgba(68,75,88,0.2)"}},B=["onClick"],V=["onClick"],L=["onClick"],D={class:"relative"},R={key:0,class:"flex justify-center items-center text-center text-grey absolute left-0 top-0 w-full h-full z-10 mainBackground"},S={key:0,class:"flex px-8 py-5 box-border justify-between text-grey text-26",style:{"border-top":"1px solid rgba(68,75,88,0.2)"}},N=["onClick"],I=["onClick"],H=["onClick"];function M(s,t,i,c,l,n){const k=b;return o(),a("div",z,[y("div",F,[y("ul",T,[i.isChange?(o(),a(d,{key:1},[i.isNight?(o(!0),a(d,{key:0},u(n.timeList,e=>(o(),a("li",{key:e.id,class:g(["mr-2",{"text-white":e.id===l.timeValue.id}]),onClick:f=>n.choiceTime(e)},m(e.text),11,V))),128)):p("",!0),i.isNight?p("",!0):(o(!0),a(d,{key:1},u(n.timeList,e=>(o(),a("li",{key:e.id,class:g(["mr-2",{"text-black":e.id===l.timeValue.id}]),onClick:f=>n.choiceTime(e)},m(e.text),11,L))),128))],64)):(o(!0),a(d,{key:0},u(n.timeList,e=>(o(),a("li",{key:e.id,class:g(["mr-2",{textColor:e.id===l.timeValue.id}]),onClick:f=>n.choiceTime(e)},m(e.text),11,B))),128))]),y("div",D,[t[0]||(t[0]=y("div",{id:"kline",class:"h-192"},null,-1)),l.chartLoading?(o(),a("div",R,[v(k,{type:"spinner"})])):p("",!0)]),i.showBottom?(o(),a("ul",S,[i.isChange?(o(),a(d,{key:1},[i.isNight?(o(!0),a(d,{key:0},u(l.subTechnicalIndicatorTypes,e=>(o(),a("li",{key:e,class:g(["mr-5",{"text-white":l.typeValue===e}]),onClick:f=>n.choiceType(e)},m(e),11,I))),128)):p("",!0),i.isNight?p("",!0):(o(!0),a(d,{key:1},u(l.subTechnicalIndicatorTypes,e=>(o(),a("li",{key:e,class:g(["mr-5",{"text-black":l.typeValue===e}]),onClick:f=>n.choiceType(e)},m(e),11,H))),128))],64)):(o(!0),a(d,{key:0},u(l.subTechnicalIndicatorTypes,e=>(o(),a("li",{key:e,class:g(["mr-5",{textColor:l.typeValue===e}]),onClick:f=>n.choiceType(e)},m(e),11,N))),128))])):p("",!0)])])}const Y=x(_,[["render",M],["__scopeId","data-v-a2491057"]]);export{Y as K,j as _};
