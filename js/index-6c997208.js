import{aj as _,_ as m,bA as b,by as D,aZ as v,o as c,c as l,F as f,m as p,aY as g,e as s,t as i}from"./index-a1ce0b9b.js";const y=_(),h=5,x=y.theme,S={name:"TradeDeepData",props:{symbol:{type:String},price:{type:[Number,String],default:"0.00"},isAddBlank:{type:Boolean,default:!1}},data(){const t=[];for(let o=0;o<h;o++)t.push({amount:"",price:""});return{THEME:x,fixDate:b,formatMoney:D,greenData:t,redData:t,socket:null}},mounted(){},watch:{symbol(t){this.startDeepSocket()}},methods:{startDeepSocket(){this.closeSocket(),this.socket=new WebSocket(`${v}/3/${this.symbol}`),this.socket.onmessage=t=>{const{data:o}=t,{code:d,data:n}=JSON.parse(o);if(d/1===0){this.handleDeep(n);const e=(n==null?void 0:n.bids)&&(n==null?void 0:n.bids[0].price)||"0";this.$emit("newPrice",e)}}},handleDeep(t={}){this.deepData=t;const{asks:o=[],bids:d=[]}=t||{};this.redData=o.sort((n,e)=>e.price-n.price).slice(0,h),this.greenData=d.sort((n,e)=>e.price-n.price).slice(0,h)},onPrice(t){this.$emit("price",t)},closeSocket(){this.socket&&this.socket.close(),this.socket=null}},activated(){this.startDeepSocket()},deactivated(){this.closeSocket()},beforeUnmount(){this.socket&&this.socket.close(),this.socket=null}},E={class:"deep-data"},M=["onClick"],w={class:"text"},T={class:"justify-between flex flex-1"},C={class:"text-red"},P={class:"text-right textColor"},B=["onClick"],j={class:"text"},A={class:"justify-between flex flex-1"},H={class:"text-green"},N={class:"text-right textColor"};function L(t,o,d,n,e,u){return c(),l("div",E,[(c(!0),l(f,null,p(e.redData,(r,a)=>(c(),l("div",{class:"flex justify-between text-22 orderbook buy",key:r+a,onClick:k=>u.onPrice(r.price),style:g({background:`linear-gradient(to right,${e.THEME=="dark"?"#131A2E":"#ffffff"} 0%`+r.amount/e.greenData[e.greenData.length-1].amount*100+"%,rgba(246,70,93,.1) "+r.amount/e.greenData[e.greenData.length-1].amount*100+"%,rgba(246,70,93,.1) 100%)"})},[s("div",w,i(t.$t("\u5356\u51FA"))+i(5-a),1),o[0]||(o[0]=s("div",null,"\xA0\xA0",-1)),s("div",T,[s("div",C,i(e.formatMoney(r.price)),1),s("div",P,i(e.formatMoney(r.amount)),1)])],12,M))),128)),o[2]||(o[2]=s("div",{class:"text-red pt-2 pb-2 text-24 font-bold text-center middle-box"},[s("div",{class:"rect-box"},[s("div",{class:"red"}),s("div",{class:"green"})])],-1)),(c(!0),l(f,null,p(e.greenData,(r,a)=>(c(),l("div",{class:"flex text-22 orderbook sell",key:a,onClick:k=>u.onPrice(r.price),style:g({background:`linear-gradient(to right,${e.THEME=="dark"?"#131A2E":"#ffffff"} 0%`+r.amount/e.greenData[e.greenData.length-1].amount*100+"%,rgba(94,186,137,.1) "+r.amount/e.greenData[e.greenData.length-1].amount*100+"%,rgba(94,186,137,.1) 100%)"})},[s("div",j,i(t.$t("\u4E70\u5165"))+i(a+1),1),o[1]||(o[1]=s("div",null,"\xA0\xA0",-1)),s("div",A,[s("div",H,i(e.formatMoney(r.price)),1),s("div",N,i(e.formatMoney(r.amount)),1)])],12,B))),128))])}const U=m(S,[["render",L]]);export{U as T};
