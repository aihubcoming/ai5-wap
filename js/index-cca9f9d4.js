import{C as Q,c as N}from"./c2cBuy-15a9282c.js";import{cI as p,s as V,cO as B,bK as k,I as f,_ as w,ag as v,o as n,c as r,b as c,w as _,e as s,n as g,t as i,aW as u,bb as b,aX as x,d as M,g as C,L as I}from"./index-14d2cc83.js";/* empty css              */import{_ as T}from"./fund.api-cc60fbcd.js";import{B as D}from"./index-e68322b9.js";import"./index-e91cace0.js";import"./use-sync-prop-ref-062ad22b.js";import"./Group41-cadfc216.js";import"./index-f7e426e4.js";import"./index-1945ffde.js";import"./index-2fe68c30.js";import"./use-id-f3e51a3e.js";import"./index-75673de3.js";import"./index-c9072a9d.js";import"./index-691edc31.js";const U={name:"c2cSell",props:["type"],data(){return{id:"",genre:"amount",amount:"",num:"",session_token:"",usableVolume:"",data:{},passwd:"",tips:"",money:"",quantity:"",totalMoney:"-",totalQuantity:"-",loading:!1,reciveInfo:{}}},created(){this.id=this.$store.state.c2c.adv_id;let{reciveType:t}=this.$route.query;t&&(t=JSON.parse(t),this.reciveInfo=t,this.data=JSON.parse(this.$route.query.data),this.$route.query.type=="amount"?(this.money=this.$route.query.total,this.totalMoney=this.money*1,this.symbol!=="USDT"?(console.log(this.data.symbol_value),this.totalQuantity=Math.floor(this.totalMoney/this.data.symbol_value*1e6)/1e6):this.totalQuantity=Math.floor(this.totalMoney/this.data.symbol_value*100)/100):(this.quantity=this.$route.query.total*1,this.totalQuantity=this.quantity,this.symbol!=="USDT"?(console.log(this.quantity),console.log(this.data.symbol_value),this.totalMoney=(this.quantity*this.data.symbol_value).toFixed(6)):this.totalMoney=(this.quantity*this.data.symbol_value).toFixed(2)),this.genre=this.$route.query.type),this.initData(),T().then(o=>{let m=o.extends.find(e=>e.symbol.toLowerCase()==this.$store.state.c2c.symbol.toLowerCase());this.usableVolume=m.usable})},mounted(){},beforeUnmount(){},methods:{toc2cCollection(){let t="";this.genre=="amount"?t=this.money:t=this.quantity,this.$router.replace({path:"/cryptos/c2cCollection",query:{id:this.data.id,type:this.genre,total:t,data:JSON.stringify(this.data)}})},initData(){p.ctcAdvertGetDetail({id:this.id,language:this.$i18n.locale}).then(t=>{this.data=t})},typeSwitch(t){this.genre=t,this.tips="",this.money="",this.quantity="",this.totalMoney="-",this.totalQuantity="-"},changeVal(t){this.money==""?(this.tips="",this.totalMoney="-",this.totalQuantity="-"):this.money*1<this.data.investment_min*1?(this.tips=this.$t("\u6700\u5C0F\u91D1\u989D")+this.data.investment_min+" "+this.exchangeCurrency,this.totalMoney="-",this.totalQuantity="-"):this.money*1>this.data.investment_max*1?(this.tips=this.$t("\u6700\u5927\u91D1\u989D")+this.data.investment_max+" "+this.exchangeCurrency,this.totalMoney="-",this.totalQuantity="-"):(this.tips="",this.totalMoney=this.money,this.symbol!=="USDT"?this.totalQuantity=Math.floor(this.totalMoney/this.data.symbol_value*1e6)/1e6:this.totalQuantity=Math.floor(this.totalMoney/this.data.symbol_value*100)/100)},changeValNum(){if(this.quantity=="")this.tips="",this.totalMoney="-",this.totalQuantity="-";else{let t=Math.floor(this.data.investment_min/this.data.symbol_value*1e6)/1e6,o=Math.floor(this.data.investment_max/this.data.symbol_value*1e6)/1e6;this.quantity*1<t*1?(this.tips=this.$t("\u6700\u5C0F\u6570\u91CF")+t+" ",this.totalMoney="-",this.totalQuantity="-"):this.quantity*1>o*1?(this.tips=this.$t("\u6700\u5927\u6570\u91CF")+o+" ",this.totalMoney="-",this.totalQuantity="-"):(this.tips="",this.totalQuantity=this.quantity,this.symbol!=="USDT"?this.totalMoney=(this.quantity*this.data.symbol_value).toFixed(6):this.totalMoney=(this.quantity*this.data.symbol_value).toFixed(2))}},async SellClick(){if(!this.reciveInfo.uuid){V(this.$t("\u8BF7\u9009\u62E9\u6536\u6B3E\u65B9\u5F0F"));return}console.log(this.exchangeCurrency),this.loading=!0;let t=await p.getSessionToken({currency:this.exchangeCurrency});this.session_token=t.session_token;const o={session_token:this.session_token,c2c_advert_id:this.data.id,payment_method_id:this.reciveInfo.uuid,direction:"sell",order_type:this.genre==="amount"?"by_amount":"by_num",amount:this.genre==="amount"?this.totalMoney/1:"",coin_amount:this.genre==="amount"?"":this.totalQuantity/1,remark:this.data.remark};p.ctcOrderOpen(o).then(h=>{this.loading=!1,this.$store.commit("c2c/SET_ORDER_NO",h.order_no),this.$router.push({path:"/cryptos/sellGenerate"})}).catch(h=>{this.loading=!1})},all(){this.tips="";let t=(Math.floor(this.usableVolume*1e5)/1e5*this.data.symbol_value/1).toFixed(2);t*1<=this.data.investment_max?(this.money=t,this.totalMoney=t,this.symbol!=="USDT"?(this.quantity=Math.floor(t/this.data.symbol_value*1e6)/1e6,this.totalQuantity=Math.floor(t/this.data.symbol_value*1e6)/1e6):(this.quantity=Math.floor(t/this.data.symbol_value*100)/100,this.totalQuantity=Math.floor(t/this.data.symbol_value*100)/100)):(this.money=this.data.investment_max,this.totalMoney=this.data.investment_max,this.symbol!=="USDT"?(this.quantity=Math.floor(this.data.investment_max/this.data.symbol_value*1e6)/1e6,this.totalQuantity=Math.floor(this.data.investment_max/this.data.symbol_value*1e6)/1e6):(this.quantity=Math.floor(this.data.investment_max/this.data.symbol_value*100)/100,this.totalQuantity=Math.floor(this.data.investment_max/this.data.symbol_value*100)/100))}},watch:{},computed:{...B("home",["currency"]),...k("c2c",["symbol","currencySymbol","exchangeCurrency"]),fullMethodName(){return this.paymentMethod?this.paymentMethod.methodName:""},fullBankCarNumber(){if(!!this.reciveInfo.id)return this.reciveInfo.paramValue1.replace(/^([0-9]{4})[0-9]*([0-9]{4})$/,"$1******$2")}},components:{[f.name]:f,C2cTrade:Q}},O={id:"c2cSellPage"},$={class:"buy-item mt-10 w-full mainBackground c2cColor"},F={class:"buy-item-title flex justify-between text-28 py-8 border-b-1 border-light-grey"},L={class:"px-8 mt-10"},j={class:"w-full buy-item-input relative box-border"},E={class:"text-28 absolute left-7 text font-bold"},A=["placeholder"],G={class:"w-full mb-10 buy-item-input relative box-border"},J=["placeholder"],R={class:"text-28 absolute right-5 text"},W={class:"mr-4",style:{color:"#b8bcc5"}},z={key:0,class:"flex mt-3 text-red text-28"},K={key:0,class:"text-32",style:{color:"#b8bcc5"}},P={key:1,class:"flex items-center text-30 c2cColor"},X={class:"mx-5"},H={class:"flex justify-between mb-3"},Y={class:"text-grey"},Z={class:"flex justify-between"},tt={class:"text-grey"},et={class:"w-full mt-6 pb-8"},st={key:0},ot={class:"mt-9"},it={class:"text-28 font-normal c2cColor"},at={class:"mt-8 text-26 text-grey"};function lt(t,o,h,m,e,a){const y=f,d=I,q=D,S=v("c2c-trade");return n(),r("div",O,[e.data.id?(n(),c(S,{key:0,title:t.$t("\u51FA\u552E")+" "+t.$store.state.c2c.symbol,detail:e.data},{trade:_(()=>[s("div",$,[s("div",F,[s("div",{class:g(["flex-1 text-center",{"text-grey":e.genre==="num"}]),onClick:o[0]||(o[0]=l=>a.typeSwitch("amount"))},i(t.$t("\u6309\u91D1\u989D\u51FA\u552E")),3),s("div",{class:g(["flex-1 text-center",{"text-grey":e.genre==="amount"}]),onClick:o[1]||(o[1]=l=>a.typeSwitch("num"))},i(t.$t("\u6309\u6570\u91CF\u51FA\u552E")),3)]),s("div",L,[u(s("div",j,[s("span",E,i(t.currencySymbol),1),u(s("input",{class:"w-full text-36 h-28 border-none box-border pl-32",type:"text",placeholder:`${e.data.investment_min} - ${e.data.investment_max}`,"onUpdate:modelValue":o[2]||(o[2]=l=>e.money=l),onInput:o[3]||(o[3]=(...l)=>a.changeVal&&a.changeVal(...l))},null,40,A),[[x,e.money]]),s("span",{class:"text-28 absolute right-5 text",style:{color:"#1a6ebd"},onClick:o[4]||(o[4]=(...l)=>a.all&&a.all(...l))},i(t.$t("\u5168\u90E8")),1)],512),[[b,e.genre==="amount"]]),u(s("div",G,[u(s("input",{class:"w-full text-36 h-28 border-none box-border pl-8 font-normal",type:"number",placeholder:t.$t("\u8BF7\u8F93\u5165\u6570\u91CF"),"onUpdate:modelValue":o[5]||(o[5]=l=>e.quantity=l),onInput:o[6]||(o[6]=(...l)=>a.changeValNum&&a.changeValNum(...l))},null,40,J),[[x,e.quantity]]),s("span",R,[s("span",W,i(t.$store.state.c2c.symbol),1),s("span",{style:{color:"#1a6ebd"},onClick:o[7]||(o[7]=(...l)=>a.all&&a.all(...l))},i(t.$t("\u5168\u90E8")),1)])],512),[[b,e.genre==="num"]]),e.tips?(n(),r("div",z,i(e.tips),1)):M("",!0),u(s("div",{class:"mt-4 text-24 text-grey"},i(t.$t("\u53EF\u7528\u4F59\u989D"))+" "+i(Math.floor(e.usableVolume*1e6)/1e6)+" "+i(t.$store.state.c2c.symbol)+" \u2248 "+i((Math.floor(e.usableVolume*1e5)/1e5*e.data.symbol_value/1).toFixed(2))+" "+i(t.currencySymbol),513),[[b,e.genre==="amount"]]),s("div",{class:"flex justify-between items-center w-full py-5 my-9 pl-8 pr-9 box-border rounded-md tabBackground",onClick:o[8]||(o[8]=(...l)=>a.toc2cCollection&&a.toc2cCollection(...l))},[s("div",null,[e.reciveInfo.uuid?(n(),r("div",P,[o[9]||(o[9]=s("div",{class:"w-2 h-8 rounded-full",style:{background:"#e7bb41"}},null,-1)),s("span",X,i(e.reciveInfo.methodName),1),s("span",null,i(a.fullBankCarNumber),1)])):(n(),r("span",K,i(t.$t("\u9009\u62E9\u6536\u6B3E\u65B9\u5F0F")),1))]),C(y,{class:"font-bold",color:"#B8BCC5",name:"arrow"})]),s("div",H,[s("span",Y,i(t.$t("\u6570\u91CF")),1),s("span",null,i(e.totalQuantity)+" "+i(e.data.symbol&&e.data.symbol.toUpperCase()),1)]),s("div",Z,[s("span",tt,i(t.$t("\u603B\u989D")),1),s("span",null,i(e.totalMoney)+" "+i(t.currencySymbol),1)]),s("div",et,[C(q,{color:"#E35461",onClick:a.SellClick,class:"w-full text-30 buy-button",disabled:e.loading,type:"primary"},{default:_(()=>[e.loading?(n(),c(d,{key:1,type:"spinner"})):(n(),r("span",st,i(t.$t("\u51FA\u552E"))+"\xA0"+i(e.data.symbol&&e.data.symbol.toUpperCase()),1))]),_:1},8,["onClick","disabled"])])])])]),desc:_(()=>[s("div",ot,[s("h2",it,i(t.$t("\u4EA4\u6613\u6761\u6B3E")),1),s("div",at,[s("p",null,i(e.data.transaction_terms),1)])])]),_:1},8,["title","detail"])):M("",!0)])}const nt=w(U,[["render",lt],["__scopeId","data-v-e222a362"]]),rt={name:"c2cTradeBridge",computed:{...k("c2c",["direction"])},components:{c2cBuy:N,c2cSell:nt},created(){console.log(this.direction)}},ht={class:"w-full"};function ut(t,o,h,m,e,a){const y=v("c2c-buy"),d=v("c2c-sell");return n(),r("div",ht,[t.direction==="buy"?(n(),c(y,{key:0})):(n(),c(d,{key:1}))])}const qt=w(rt,[["render",ut]]);export{qt as default};
