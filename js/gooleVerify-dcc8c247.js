import{_ as B,v as S,u as I,r as u,l as T,d1 as N,s as i,a8 as j,o as G,c as R,e as o,t as s,g as d,aW as _,bb as g,h as f,w as K,d2 as M}from"./index-a1ce0b9b.js";/* empty css              */import{P as A,N as D,_ as F}from"./reload-85ed48c8.js";import{_ as P}from"./left-arrow-2dc2678c.js";import{S as Q}from"./step-0b6e263e.js";import{u as E}from"./index-85994595.js";import{B as U}from"./index-b2caa79d.js";const W={class:"gooleVerify"},q={class:"header"},z={class:"title textColor"},H={class:"pl-30 pr-30 text-center flex flex-col items-center justify-center mt40"},J={class:"imgbox"},L={id:"QRcodeCanvas"},O=["src"],X={class:"code flex items-center justify-center textColor"},Y={class:"tips"},Z={class:"flex justify-between mt-6 mb-3"},ee={class:"textColor"},oe={class:"flex items-center"},te={class:"mt-5 bottom tabBackground textColor"},se={__name:"gooleVerify",setup(le){const{t:a}=S.exports.useI18n(),{toClipboard:h}=E(),y=I(),c=u(""),v=u(!0),p=u(""),l=u(""),r=u(!1);T(()=>{m()});const b=async()=>{try{await h(c.value),i(a("copySuccess"))}catch(e){console.error(e)}},m=()=>{N({}).then(e=>{c.value=e.googleAuthSecret,p.value=e.googleAuthImg}).catch(e=>{i(a(e.msg))})},C=()=>{M({secret:c.value,code:l.value}).then(e=>{console.log(e),e.google_auth_bind?(i(a("bindSuccess")),y.push("/finish")):i(a("bindFailed"))}).catch(e=>{i(a(e.msg))})},$=()=>{if(l.value.length<6)return i(a("entryVerifyCode")),!1;C()},w=async()=>{l.value=await navigator.clipboard.readText()};return j(l,(e,t)=>{l.value.length===6&&(r.value=!1)}),(e,t)=>{const k=A,V=D,x=U;return G(),R("div",W,[o("div",q,[o("div",{class:"flex items-center",onClick:t[0]||(t[0]=n=>e.$router.go(-1))},[...t[6]||(t[6]=[o("img",{src:P,alt:"",class:"leftReturn"},null,-1)])]),o("div",{class:"textColor",onClick:t[1]||(t[1]=n=>e.$router.push("/finish"))},s(e.$t("skip")),1)]),d(Q,{step:3}),o("div",z,s(e.$t("safeBind")),1),o("div",H,[o("div",J,[_(o("canvas",L,null,512),[[g,!v.value]]),_(o("img",{src:p.value,alt:"",class:"QRcodeImg"},null,8,O),[[g,v.value]])]),o("div",X,[f(s(c.value)+" ",1),o("img",{src:F,onClick:m,alt:""})]),o("p",Y,s(e.$t("saveKeyTips")),1),o("div",{class:"copy textColor",onClick:b},s(e.$t("copy")),1)]),o("div",Z,[o("div",ee,s(e.$t("googleVerificationCode")),1),o("div",oe,[o("div",{class:"colorMain",onClick:t[2]||(t[2]=n=>l.value="")},s(e.$t("clear")),1),o("div",{class:"colorMain ml-30",onClick:w},s(e.$t("paste")),1)])]),d(k,{value:l.value,gutter:16,focused:r.value,onFocus:t[3]||(t[3]=n=>r.value=!0),mask:!1},null,8,["value","focused"]),d(V,{modelValue:l.value,"onUpdate:modelValue":t[4]||(t[4]=n=>l.value=n),show:r.value,onBlur:t[5]||(t[5]=n=>r.value=!1)},null,8,["modelValue","show"]),t[7]||(t[7]=o("div",{class:"mt-2"},null,-1)),o("div",te,[o("p",null,s(e.$t("precautions")),1),o("p",null,s(e.$t("precautionsTips1")),1),o("p",null,s(e.$t("precautionsTips2")),1)]),d(x,{class:"w-full",style:{"margin-top":"10px"},type:"primary",onClick:$},{default:K(()=>[f(s(e.$t("sure")),1)]),_:1})])}}},ve=B(se,[["__scopeId","data-v-13074429"]]);export{ve as default};
