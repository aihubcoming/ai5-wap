import{_ as M,v as W,u as N,ak as Q,al as z,r,l as Y,ax as J,at as P,o as l,c,e as s,g as U,t as a,f as p,F as x,m as C,ay as X,az as H,aA as v,av as q}from"./index-8f557042.js";/* empty css               *//* empty css               */import{S as Z}from"./index-003d2240.js";import{_ as O}from"./add-icon-270b70fa.js";import{_ as ss}from"./del-75675fff.js";import{_ as es}from"./index-a0ac39a2.js";import{_ as os}from"./etf.api-aa9d1a3d.js";import"./index-d7356a31.js";import"./index-158dc407.js";import"./use-id-df8c351b.js";/* empty css              */import"./index-5da15475.js";import"./index-e320f5ce.js";import"./index-f30e4bd7.js";const ts={class:"pb-fix"},ls={class:"container-box"},cs={class:"search-container flex items-center"},as={class:"hot-search"},ns={class:"title"},is={class:"hot-box"},rs=["onClick"],_s={class:"num"},us={key:0,class:"search-result"},ps={class:"title-box flex"},ds={class:"title"},ms={class:"symbol-table"},ys=["onClick"],hs={class:"flex-l"},vs={class:"flex-l-item logo"},bs=["src"],fs={class:"flex-l-item"},ks={class:"name-short"},xs={class:"name"},Cs={class:"flex-r"},gs={class:"flex-r-item data-box"},Ss={class:"data-item"},Ts={key:0},$s=["onClick"],As={key:1,class:"search-result"},Ls={class:"title-box flex"},Is={class:"title"},Us={class:"symbol-table"},Hs=["onClick"],qs={class:"flex-l"},Os={class:"flex-l-item logo"},Ds=["src"],Rs={class:"flex-l-item"},ws={class:"name-short"},Gs={class:"name"},Vs={class:"flex-r"},Bs={class:"flex-r-item data-box"},js={class:"data-item"},Es={key:0},Fs=["onClick"],Ks={__name:"Search",setup(Ms){var I;const{t:n}=W.exports.useI18n(),_=N(),g=Q(),m=z(),S=r([]);console.log(g.query,"route.query");const D=((I=g.query)==null?void 0:I.symbolType)||"US-stocks",R=r([]),d=r(""),T=r([]),$=r([]),y=r([]),A=r(null),b=r({}),u=r([]);Y(()=>{w(),S.value=m.coins,R.value=S.value,u.value=m.historyList,u.value.length>0&&u.value.map(e=>{let o={symbol:e.symbol};J(o).then(i=>{e.hasAddGlobal=i})})});const w=()=>{os({type:D}).then(e=>{if(e===null&&(e=[]),e.length>0){const o=e.slice(0,9).map(i=>i.symbol)||[];T.value=o,E()}})},G=()=>{d.value="",y.value=[]},f=e=>{u.value.filter(i=>i.symbol==e.symbol).length==0&&u.value.push(e),m[H](u.value),e.type=="cryptos"?_.push("/cryptos/trendDetails/"+e.symbol+"?isOptional=2&type=cryptos"):e.type=="indices"?_.push("/quotes/detail?symbol="+e.symbol+"&isOptional=2&symbolType=indices&type=indices"):e.type=="US-stocks"?_.push(`/quotes/usStockDetail?symbol=${e.symbol}&isOptional=2&symbolType=US-stocks`):e.type=="HK-stocks"?_.push(`/quotes/usStockDetail?symbol=${e.symbol}&isOptional=2&symbolType=HK-stocks`):e.type=="TW-stocks"?_.push(`/quotes/detail?symbol=${e.symbol}&isOptional=2&symbolType=TW-stocks&type=TW-stocks`):e.type=="A-stocks"?_.push(`/quotes/detail?symbol=${e.symbol}&isOptional=2&symbolType=A-stocks&type=A-stocks`):_.push("/foreign/coinChart?symbol="+e.symbol+"&isOptional=2")},V=()=>{if(!d.value){y.value=[];return}let e={name:d.value};X(e).then(o=>{console.log(o),y.value=o})},B=()=>{b.value.hasAddGlobal=!0},L=e=>{b.value=e,A.value.openCurrency(b.value.symbol)},j=()=>{u.value=[],m[H]([])},E=()=>{let e=[];T.value.map(o=>{let i={symbol:o};e.push(i)}),P(e).then(o=>{$.value=o})},F=e=>{let o="";switch(e.type){case"forex":o=n("\u5916\u6C47");break;case"US-stocks":o=n("UsStocks");break;case"HK-stocks":o=n("HkStocks");break;case"TW-stocks":o=n("TwStocks");break;case"A-stocks":o=n("AStocks");break}return o},K=()=>{_.go(-1)};return(e,o)=>{const i=Z;return l(),c("div",ts,[s("div",ls,[s("div",cs,[U(i,{class:"search-input",modelValue:d.value,"onUpdate:modelValue":[o[0]||(o[0]=t=>d.value=t),V],placeholder:e.$t("searchKeys"),onClear:G,onCancel:o[1]||(o[1]=t=>K()),shape:"round","show-action":"","action-text":e.$t("Cancel")},null,8,["modelValue","placeholder","action-text"])]),s("div",as,[s("p",ns,a(p(n)("hotSearch")),1),s("ul",is,[(l(!0),c(x,null,C($.value,(t,k)=>(l(),c("li",{class:"hot-item",key:k,onClick:h=>f(t)},[s("p",null,[s("span",_s,a(t.symbol.toUpperCase()),1),s("span",null,a(t.name),1)]),s("p",null,a(F(t)),1)],8,rs))),128))])]),d.value?(l(),c("div",us,[s("div",ps,[s("p",ds,a(p(n)("searchResult")),1)]),s("div",ms,[s("ul",null,[(l(!0),c(x,null,C(y.value,(t,k)=>(l(),c("li",{class:"flex",onClick:v(h=>f(t),["stop"])},[s("div",hs,[s("div",vs,[s("img",{src:`${p(q)}/symbol/${t.symbol.toLowerCase()}.png`,alt:""},null,8,bs)]),s("div",fs,[s("p",ks,a(t.symbol.toUpperCase()),1),s("p",xs,a(t.name),1)])]),s("div",Cs,[s("div",gs,[s("div",Ss,[t.hasAddGlobal?(l(),c("span",Ts,a(p(n)("alreadyMyfavorites")),1)):(l(),c("img",{key:1,src:O,onClick:v(h=>L(t),["stop"]),alt:""},null,8,$s))])])])],8,ys))),256))])])])):(l(),c("div",As,[s("div",Ls,[s("p",Is,a(p(n)("\u5386\u53F2\u8BB0\u5F55")),1),s("div",{class:"icon"},[s("img",{src:ss,onClick:j,alt:""})])]),s("div",Us,[s("ul",null,[(l(!0),c(x,null,C(u.value,(t,k)=>(l(),c("li",{class:"flex",onClick:v(h=>f(t),["stop"])},[s("div",qs,[s("div",Os,[s("img",{src:`${p(q)}/symbol/${t.symbol.toLowerCase()}.png`,alt:""},null,8,Ds)]),s("div",Rs,[s("p",ws,a(t.symbol.toUpperCase()),1),s("p",Gs,a(t.name),1)])]),s("div",Vs,[s("div",Bs,[s("div",js,[t.hasAddGlobal?(l(),c("span",Es,a(p(n)("alreadyMyfavorites")),1)):(l(),c("img",{key:1,src:O,onClick:v(h=>L(t),["stop"]),alt:""},null,8,Fs))])])])],8,Hs))),256))])])]))]),U(es,{onUpdateItem:B,ref_key:"addCurrencyRef",ref:A},null,512)])}}},ae=M(Ks,[["__scopeId","data-v-7441f003"]]);export{ae as default};
