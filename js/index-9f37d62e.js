import{p as R,J as O,z as V,$ as J,y as M,B as A,r as k,ah as j,b2 as F,a4 as E,aa as Q,K as _,aJ as U,a9 as Y,g as r,aK as B,b7 as Z,T as q,Q as G,a0 as W,a1 as X,a2 as ee,b9 as te,b4 as oe,ba as ae,aW as ne,bb as se,S as le,O as re,I as ie,H as K}from"./index-16c70849.js";import{C as ce}from"./index-2ad682be.js";import{u as de}from"./use-id-8bfa17e8.js";const[N,P]=R("dropdown-menu"),ue={overlay:O,zIndex:V,duration:J(.2),direction:M("down"),activeColor:String,autoLocate:Boolean,closeOnClickOutside:O,closeOnClickOverlay:O,swipeThreshold:V},H=Symbol(N);var pe=A({name:N,props:ue,setup(t,{slots:i}){const c=de(),v=k(),o=k(),d=k(0),{children:n,linkChildren:I}=j(H),m=F(v),u=E(()=>n.some(e=>e.state.showWrapper)),h=E(()=>t.swipeThreshold&&n.length>+t.swipeThreshold),x=E(()=>{if(u.value&&Q(t.zIndex))return{zIndex:+t.zIndex+1}}),b=()=>{n.forEach(e=>{e.toggle(!1)})},S=()=>{t.closeOnClickOutside&&b()},C=()=>{if(o.value){const e=B(o);t.direction==="down"?d.value=e.bottom:d.value=Z.value-e.top}},$=()=>{u.value&&C()},z=e=>{n.forEach((a,s)=>{s===e?a.toggle():a.state.showPopup&&a.toggle(!1,{immediate:!0})})},g=(e,a)=>{const{showPopup:s}=e.state,{disabled:l,titleClass:f}=e;return r("div",{id:`${c}-${a}`,role:"button",tabindex:l?void 0:0,"data-allow-mismatch":"attribute",class:[P("item",{disabled:l,grow:h.value}),{[q]:!l}],onClick:()=>{l||z(a)}},[r("span",{class:[P("title",{down:s===(t.direction==="down"),active:s}),f],style:{color:s?t.activeColor:""}},[r("div",{class:"van-ellipsis"},[e.renderTitle()])])])};return _({close:b,opened:u}),I({id:c,props:t,offset:d,opened:u,updateOffset:C}),U(v,S),Y("scroll",$,{target:m,passive:!0}),()=>{var e;return r("div",{ref:v,class:P()},[r("div",{ref:o,style:x.value,class:P("bar",{opened:u.value,scrollable:h.value})},[n.map(g)]),(e=i.default)==null?void 0:e.call(i)])}}});const[fe,y]=R("dropdown-item"),ve={title:String,options:G(),disabled:Boolean,teleport:[String,Object],lazyRender:O,modelValue:W,titleClass:W};var me=A({name:fe,inheritAttrs:!1,props:ve,emits:["open","opened","close","closed","change","update:modelValue"],setup(t,{emit:i,slots:c,attrs:v}){const o=X({showPopup:!1,transition:!0,showWrapper:!1}),d=k(),{parent:n,index:I}=ee(H);if(!n)return;const m=e=>()=>i(e),u=m("open"),h=m("close"),x=m("opened"),b=()=>{o.showWrapper=!1,i("closed")},S=e=>{t.teleport&&e.stopPropagation()},C=(e=!o.showPopup,a={})=>{e!==o.showPopup&&(o.showPopup=e,o.transition=!a.immediate,e&&(n.updateOffset(),o.showWrapper=!0))},$=()=>{if(c.title)return c.title();if(t.title)return t.title;const e=t.options.find(a=>a.value===t.modelValue);return e?e.text:""},z=e=>{const{activeColor:a}=n.props,{disabled:s}=e,l=e.value===t.modelValue,f=()=>{s||(o.showPopup=!1,e.value!==t.modelValue&&(i("update:modelValue",e.value),i("change",e.value)))},w=()=>{if(l)return r(ie,{class:y("icon"),color:s?void 0:a,name:"success"},null)};return r(ce,{role:"menuitem",key:String(e.value),icon:e.icon,title:e.text,class:y("option",{active:l,disabled:s}),style:{color:l?a:""},tabindex:l?0:-1,clickable:!s,onClick:f},{value:w})},g=()=>{const{offset:e}=n,{autoLocate:a,zIndex:s,overlay:l,duration:f,direction:w,closeOnClickOverlay:L}=n.props,T=oe(s);let D=e.value;if(a&&d.value){const p=ae(d.value);p&&(D-=B(p).top)}return w==="down"?T.top=`${D}px`:T.bottom=`${D}px`,ne(r("div",re({ref:d,style:T,class:y([w]),onClick:S},v),[r(le,{show:o.showPopup,"onUpdate:show":p=>o.showPopup=p,role:"menu",class:y("content"),overlay:l,overlayProps:{duration:o.transition&&!n.opened.value?f:0},position:w==="down"?"top":"bottom",duration:o.transition?f:0,lazyRender:t.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${n.id}-${I.value}`,"data-allow-mismatch":"attribute",closeOnClickOverlay:L,onOpen:u,onClose:h,onOpened:x,onClosed:b},{default:()=>{var p;return[t.options.map(z),(p=c.default)==null?void 0:p.call(c)]}})]),[[se,o.showWrapper]])};return _({state:o,toggle:C,renderTitle:$}),()=>t.teleport?r(te,{to:t.teleport},{default:()=>[g()]}):g()}});const Ce=K(me),ge=K(pe);export{Ce as D,ge as a};
