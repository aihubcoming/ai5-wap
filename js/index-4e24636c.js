import{_ as v,o as c,c as d,aW as D,bb as C,g as l,w as g,h as y,t as n,cI as f,s as w,cE as U,e as a,F as L,m as B,d as $,ag as P}from"./index-a1ce0b9b.js";/* empty css              */import{B as _}from"./index-b2caa79d.js";import{_ as q,U as b}from"./index-2f0e6cc1.js";/* empty css               *//* empty css               *//* empty css               */import{_ as k}from"./OrderNav-8aaf6fc1.js";import{F as M}from"./index-766f60f3.js";import"./index-cf70a38c.js";import"./index-2968e9bc.js";import"./index-3d93719e.js";import"./index-ffad7391.js";import"./use-id-e80f4f70.js";const E={name:"OtcButton",props:{disabled:{require:!0},text:{},color:{default:"#1D91FF"},disableColor:{default:"#EAEBEE"}},methods:{btnClick(){this.$emit("btnClick")}},components:{[_.name]:_}};function I(e,t,s,m,i,r){const p=_;return c(),d("div",null,[D(l(p,{class:"w-full text-white",color:s.color,type:"info",onClick:r.btnClick},{default:g(()=>[y(n(e.$t(s.text)),1)]),_:1},8,["color","onClick"]),[[C,s.disabled]]),D(l(p,{disabled:"",color:s.disableColor,class:"w-full",style:{color:"#C0C4CC"}},{default:g(()=>[y(n(e.$t(s.text)),1)]),_:1},8,["color"]),[[C,!s.disabled]])])}const N=v(E,[["render",I]]);const O={name:"CN",props:["configType","id"],data(){return{configDetail:null,disabled1:!1,disabled2:!1,list:[],params:{name:"",remark:""},fileList:[],isClick:!0}},created(){this.configType==="add"?(this.getPaymentMethodConfigDetail(),this.getUserName()):this.configType==="edit"&&this.getPaymentMethodDetail()},methods:{afterRead(e){e.status="uploading",e.message=this.$t("\u4E0A\u4F20\u4E2D..."),q(e).then(t=>{e.status="success",e.message=this.$t("\u4E0A\u4F20\u6210\u529F"),e.resURL=t}).catch(t=>{e.status="failed",e.message=this.$t("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25")})},handlerClick(){!this.isClick||(this.isClick=!1,this.configType==="add"?this.save():this.edit())},async getUserName(){const e=await f.getUserName();this.params.name=e.name||""},async save(){const e=this.formatParams("method_config_id");await f.ctcPaymentMethodAddPay(e),w({message:this.$t("\u6DFB\u52A0\u6210\u529F")}),setTimeout(()=>{this.isClick=!0,this.$router.replace({path:"/cryptos/paymentMethod"})},1e3)},formatParams(e){const t={[e]:this.configDetail.uuid,real_name:this.params.name,remark:this.params.remark,qrcode:this.fileList[0]&&this.fileList[0].resURL||this.fileList[0]&&this.fileList[0].url||""};return this.list.forEach(s=>{Object.keys(s).forEach(m=>{m.indexOf("param_value")!==-1&&(t[m]=s[m])})}),t},async edit(){const e=this.formatParams("id");console.log(e);const t=await f.ctcPaymentMethodUpdate(e);console.log(t),w({message:this.$t("\u4FDD\u5B58")}),setTimeout(()=>{this.isClick=!0,this.$router.replace({path:"/cryptos/paymentMethod"})},1e3)},formatData(e){let t=1;Object.keys(e).forEach(s=>{s.indexOf("paramName")!==-1&&this.configDetail[s]&&this.configDetail[s].length>0&&(this.configType==="edit"?(console.log(s,t),this.list.push({["paramName"+t]:this.configDetail["paramName"+t],["param_value"+t]:this.configDetail["paramValue"+t]})):this.list.push({["paramName"+t]:this.configDetail[s],["param_value"+t]:""}),t++)}),console.log(this.list)},async getPaymentMethodConfigDetail(){const e=await f.paymentMethodConfigDetail({id:this.id,language:this.$i18n.locale});this.configDetail=e,this.formatData(this.configDetail)},async getPaymentMethodDetail(){const e=await f.ctcPaymentMethodDetail({id:this.id,language:this.$i18n.locale});this.configDetail=e,this.formatData(this.configDetail),this.initData()},initData(){this.params.name=this.configDetail.realName,this.params.remark=this.configDetail.remark,this.configDetail.qrcode&&this.fileList.push({url:this.imgSrc(this.configDetail.qrcode),resURL:this.configDetail.qrcode})},imgSrc(e){return e.indexOf("http")!==-1?e:`${U}public/showimg!showImg.action?imagePath=`+e}},computed:{bankNumber:{get(){return this.info.number&&this.info.number.replace(/(\d{4})/g,"$1 ").trim()},set(e){this.info.number=e}},fullDisabled(){return console.log(this.disabled1,this.disabled2),this.disabled1&&this.disabled2}},components:{[_.name]:_,[b.name]:b,OrderNav:k,OtcButton:N},watch:{list:{deep:!0,handler(){const e=this.list.filter((t,s)=>{if(s!=2)return t[`param_value${s+1}`]===""||t[`param_value${parseInt(s)+1}`]===void 0});this.disabled1=e.length===0},immediate:!0},params:{deep:!0,handler(){const e=Object.keys(this.params).filter(t=>{if(t!=="remark")return this.params[t]===""||this.params[t]===void 0});this.disabled2=e.length===0},immediate:!0}}},F={id:"cryptos"},R={key:0,class:"flex flex-col w-full h-full"},S={class:"flex-1 w-full pt-14 overflow-auto"},A={class:"content pr-8 pl-8"},j={class:"flex items-center justify-center mb-14"},W=["src"],z={class:"payment-input-wrapper"},G={class:"label text-28 mb-4 textColor2"},H={class:"payment-input w-full"},J={class:"payment-input-wrapper"},K={class:"label text-28 mb-4 textColor2"},Q={class:"payment-input w-full"},X={class:"payment-input-wrapper"},Y={class:"label text-28 mb-4 textColor2"},Z={class:"payment-input w-full"},ee={class:"label text-28 mb-4 textColor2"},te={class:"payment-input w-full"},se={key:0,class:"mb-14"},ae={class:"mb-1 text-28",style:{color:"rgb(134, 141, 154)"}},ie={class:"payment-input-wrapper"},oe={class:"label text-28 mb-1 textColor2"},le={class:"payment-input w-full"},ne={class:"w-full pl-8 pr-8 pb-16 mt-80 box-border"},re={class:"text-24 mb-6",style:{color:"#868D9A"}};function ce(e,t,s,m,i,r){const p=k,u=M,V=b,x=N;return c(),d("div",F,[i.configDetail?(c(),d("div",R,[l(p,{class:"w-full"},{title:g(()=>[y(n(e.$t(i.configDetail.methodName)),1)]),_:1}),a("div",S,[a("div",A,[a("div",j,[a("img",{class:"w-20",src:r.imgSrc(i.configDetail.methodImg),alt:""},null,8,W)]),a("div",z,[a("div",G,n(e.$t("\u652F\u4ED8\u65B9\u5F0F\u914D\u7F6E")),1),a("div",H,[l(u,{disabled:"",modelValue:i.configDetail.methodName,"onUpdate:modelValue":t[0]||(t[0]=o=>i.configDetail.methodName=o)},null,8,["modelValue"])])]),a("div",J,[a("div",K,n(e.$t("\u652F\u4ED8\u65B9\u5F0F\u7C7B\u578B")),1),a("div",Q,[l(u,{disabled:"",modelValue:i.configDetail.methodTypeName,"onUpdate:modelValue":t[1]||(t[1]=o=>i.configDetail.methodTypeName=o)},null,8,["modelValue"])])]),a("div",X,[a("div",Y,n(e.$t("\u771F\u5B9E\u59D3\u540D")),1),a("div",Z,[l(u,{modelValue:i.params.name,"onUpdate:modelValue":t[2]||(t[2]=o=>i.params.name=o),placeholder:e.$t("\u771F\u5B9E\u59D3\u540D")},null,8,["modelValue","placeholder"])])]),(c(!0),d(L,null,B(i.list,(o,h)=>(c(),d("div",{class:"payment-input-wrapper",key:h},[a("div",ee,n(e.$t(o[`paramName${parseInt(h)+1}`])),1),a("div",te,[l(u,{modelValue:o[`param_value${parseInt(h)+1}`],"onUpdate:modelValue":T=>o[`param_value${parseInt(h)+1}`]=T,placeholder:e.$t(o[`paramName${parseInt(h)+1}`])},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]))),128)),i.configDetail.methodType!==1?(c(),d("div",se,[a("p",ae,n(e.$t("\u652F\u4ED8\u4E8C\u7EF4\u7801")),1),l(V,{modelValue:i.fileList,"onUpdate:modelValue":t[3]||(t[3]=o=>i.fileList=o),"after-read":r.afterRead,"max-count":1},null,8,["modelValue","after-read"])])):$("",!0),a("div",ie,[a("div",oe,n(e.$t("\u5907\u6CE8")),1),a("div",le,[l(u,{class:"textarea",type:"textarea",rows:"5",modelValue:i.params.remark,"onUpdate:modelValue":t[4]||(t[4]=o=>i.params.remark=o),placeholder:e.$t("\u5907\u6CE8")},null,8,["modelValue","placeholder"])])])]),a("div",ne,[a("div",re,n(e.$t("\u6E29\u99A8\u63D0\u793A\uFF1A\u5F53\u60A8\u51FA\u552E\u6570\u5B57\u8D27\u5E01\u65F6\uFF0C\u60A8\u9009\u62E9\u7684\u6536\u6B3E\u65B9\u5F0F\u5C06\u5411\u4E70\u65B9\u5C55\u793A\uFF0C\u8BF7\u786E\u8BA4\u4FE1\u606F\u586B\u5199\u51C6\u786E\u65E0\u8BEF\u3002")),1),l(x,{disabled:r.fullDisabled,text:e.$t("\u4FDD\u5B58"),onBtnClick:r.handlerClick},null,8,["disabled","text","onBtnClick"])])])])):$("",!0)])}const de=v(O,[["render",ce],["__scopeId","data-v-b7dd563e"]]),me={name:"c2cBankCardDetail",data(){return{paymentMethodConfig:"",configType:"",type:"",id:""}},created(){this.$route.query.type&&(this.type=this.$route.query.type),this.$route.query.configType&&(this.configType=this.$route.query.configType),this.$route.query.id&&(this.id=this.$route.query.id)},components:{CN:de}},pe={class:"w-full h-full box-border"};function ue(e,t,s,m,i,r){const p=P("c-n");return c(),d("div",pe,[l(p,{id:i.id,configType:i.configType},null,8,["id","configType"])])}const xe=v(me,[["render",ue]]);export{xe as default};
