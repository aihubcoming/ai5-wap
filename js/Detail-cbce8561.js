import{_ as os,aj as ns,v as is,u as cs,ak as us,r as o,al as rs,l as ds,au as vs,a8 as Le,a_ as _s,at as ps,ax as ms,I as hs,S as fs,o as c,c as r,e,g as D,f as p,t as a,d as b,h as M,F as T,m as w,b as De,w as ys,by as h,n as q,aZ as O,bz as je,U as bs,ay as ks}from"./index-8f557042.js";import{_ as xs,a as gs}from"./black-convert-e248d682.js";import{_ as $s,a as qs}from"./search-e4a3a12e.js";import{_ as Ss,a as Cs}from"./icon-star-8ef24b6e.js";import{_ as Ts}from"./exchange-3264478b.js";import{f as ws}from"./index-5b989f00.js";import{b as Is,c as Bs,a as Vs}from"./etf.api-aa9d1a3d.js";import"./index-820ca9eb.js";import{F as Ns}from"./F10Details-1d8c70f0.js";import{_ as Ls}from"./index-a0ac39a2.js";import{d as Ds}from"./dayjs.min-6b2f9ab5.js";import{_ as js}from"./index-46d4072a.js";import"./index-1294de1e.js";import"./trade.api-de47551a.js";/* empty css                                                              *//* empty css              */import"./index-5da15475.js";import"./index-e320f5ce.js";import"./index-f30e4bd7.js";import"./installCanvasRenderer-26dffa88.js";import"./install-fac60ee3.js";const Us={class:"pb-40"},Rs={class:"container-box"},As={class:"header"},Fs={class:"flex-l"},Hs={class:"name-box"},Ms=["src"],Os={class:"title"},zs={class:"type"},Js={class:"icon-group"},Ps=["src"],Gs={class:"icon setting"},Qs={class:"value-container"},Ws={class:"flex-l"},Es={class:"first-line red"},Ks={class:"second-line"},Ys={class:"red m-4"},Zs={class:"red"},Xs={class:"flex-r"},et={class:"flex-r-item"},st={class:"label"},tt={class:"value"},at={class:"label"},lt={class:"value"},ot={class:"label"},nt={class:"value"},it={class:"flex"},ct={class:"label"},ut={class:"value"},rt={class:"flex-r-item"},dt={class:"flex"},vt={class:"label"},_t={class:"value"},pt={key:0,class:"flex"},mt={class:"label"},ht={class:"value"},ft={class:"flex"},yt={class:"label"},bt={class:"value"},kt={class:"flex"},xt={class:"label"},gt={class:"value"},$t={key:0,class:"status-info"},qt={class:"time"},St={class:"indicator-index-container"},Ct={class:"indicator-index-box"},Tt={class:"flex-l"},wt=["onClick"],It={key:0,class:"indicator-index-box-second"},Bt=["onClick"],Vt={class:"kline-container flex"},Nt={class:"chart-index"},Lt={key:0,class:"order-book-container"},Dt={class:"text"},jt={class:"justify-between flex flex-1"},Ut={class:"all-etf-ranking"},Rt={class:"tabs flex"},At=["onClick"],Ft={key:1,class:"new-trade"},Ht={class:"px-12 text-grey"},Mt={class:"flex justify-between mt-30"},Ot={class:"flex-1"},zt={class:"flex-1"},Jt={class:"flex-1"},Pt={class:"flex-1 flex justify-center"},Gt={class:"flex-1"},Qt={class:"flex-1 flex justify-center"},Wt={key:2,class:"deep-map"},Et={class:"buy-sell-box"},Kt={class:"buy-item"},Yt={class:"sell-item"},Zt={class:"deep-chart-box"},Xt={class:"footer-btn-group"},ea={class:"flex btn-group"},sa={class:"rate"},ta={class:"flex-r flex-1 flex"},aa={class:"flex pl-10 pr-10 justify-between mb-10 mt-10 popup-wrap"},la={class:"flex items-center text-grey"},oa={class:"mr-12 popup-title"},na={class:"flex text-grey"},ia={class:"flex items-center"},ca={class:"popup-title"},ua={class:"flex items-center"},ra={class:"mr-12 popup-title"},da={class:"pl-10 pr-10"},va=["onClick"],_a={class:"font-bold textColor popup-title"},pa={key:0,class:"text-grey mt-4 popup-title"},ma={class:"text-right"},ha={class:"textColor popup-title"},fa={__name:"Detail",setup(ya){const z=ns(),N=[];for(let s=0;s<17;s++)N.push({id:s});const{t:d}=is.exports.useI18n(),f=cs(),u=us(),S=o(!1),I=rs(),i=o(""),Ue=o(""),j=o(""),Re=u.query.fromIndexDetail,J=o(""),v=o({}),Ae=o([]),U=o([]);o(0);const L=o(0),B=o(""),k=o(0),Fe=o([]),He=o(!1);o("");const R=o(!1),P=o({}),G=o(null),A=o(!1),x=o(u.query.symbolType||"US-stocks"),Q=o([]),W=o([]),g=o(null),E=o(N),K=o({}),n=o({quote:null,deals:null,askBid:null}),Y=o([]),Z=o([]),Me=o(N),Oe=o(N),ze=u.query.symbolType==="US-stocks"?o([{title:d("ProfileF10"),value:0},{title:d("\u6700\u65B0\u4EA4\u6613"),value:1},{title:d("\u6DF1\u5EA6\u56FE"),value:2}]):o([{title:d("ProfileF10"),value:0}]),Je=o([{name:d("\u5206\u65F6"),paramsValue:"timeSharing",seconds:1*60*1e3,index:0},{name:"1"+d("\u5929"),paramsValue:"1day",seconds:1*24*60*60*1e3,index:1},{name:"1"+d("\u5468"),paramsValue:"1week",seconds:7*24*60*60*1e3,index:2},{name:"1"+d("\u6708"),paramsValue:"1mon",seconds:30*24*60*60*1e3,index:3},{name:"5"+d("\u5929"),paramsValue:"5day",seconds:5*24*60*60*1e3,index:4},{name:d("season"),paramsValue:"1quarter",seconds:3*30*24*60*60*1e3,index:5},{name:d("Year"),paramsValue:"1year",seconds:12*30*24*60*60*1e3,index:6}]),Pe=o([{name:"120"+d("\u5206"),paramsValue:"120min",seconds:2*60*60*1e3,index:7},{name:"60"+d("\u5206"),paramsValue:"60min",seconds:1*60*60*1e3,index:8},{name:"30"+d("\u5206"),paramsValue:"30min",seconds:30*60*1e3,index:9},{name:"15"+d("\u5206"),paramsValue:"15min",seconds:15*60*1e3,index:10},{name:"5"+d("\u5206"),paramsValue:"5min",seconds:5*60*1e3,index:11},{name:"1"+d("\u5206"),paramsValue:"1min",seconds:1*60*1e3,index:12}]),Ge=new URL(Object.assign({"../../assets/theme/dark/image/black-convert.png":xs,"../../assets/theme/white/image/black-convert.png":gs})[`../../assets/theme/${z.theme}/image/black-convert.png`],self.location),Qe=new URL(Object.assign({"../../assets/theme/dark/image/search.png":$s,"../../assets/theme/white/image/search.png":qs})[`../../assets/theme/${z.theme}/image/search.png`],self.location);ds(async()=>{u.query.symbol?i.value=u.query.symbol:i.value=I.coins.length?I.coins[0].symbol:"TSLA",j.value=u.query.enName?u.query.enName:"",I.stage==="timeSharing"?B.value="area":B.value="candle_solid",ae(),ne(i.value),le(i.value),oe(i.value),H(),F({paramsValue:"timeSharing",seconds:1*24*60*60*1e3,index:0})}),vs(()=>{g.value&&clearTimeout(g.value),se(),n.value.quote&&n.value.quote.close(),n.value.deals&&n.value.deals.close(),n.value.askBid&&n.value.askBid.close(),n.value.quote=null,n.value.deals=null,n.value.askBid=null}),Le(S,(s,t)=>{s||g.value&&clearTimeout(g.value)}),Le([k,i],([s,t])=>{s/1===0?(n.value.deals&&n.value.deals.close(),n.value.deals=null,t&&(i.value=t,X())):(n.value.askBid&&n.value.askBid.close(),n.value.askBid=null,ee())},{immediate:!0});const X=()=>{n.value.askBid=new WebSocket(`${O}/3/${i.value}`),n.value.askBid.onmessage=s=>{const{data:t}=s,{code:m,data:_}=JSON.parse(t);m/1===0&&(Y.value=_.bids,Z.value=_.asks,_.asks=_.asks.sort(($,C)=>$.price-C.price),_.bids=_.bids.sort(($,C)=>$.price-C.price),Me.value=_.asks.slice(0,17),Oe.value=_.bids.reverse().slice(0,17))}},ee=()=>{n.value.deals=new WebSocket(`${O}/2/${i.value}`),n.value.deals.onmessage=s=>{const{data:t}=s,{code:m,data:_}=JSON.parse(t);m/1===0&&(E.value=_.data.slice(0,17))}},se=()=>{n.value.quote&&n.value.quote.close(),n.value.deals&&n.value.deals.close(),n.value.askBid&&n.value.askBid.close(),n.value.quote=null,n.value.deals=null,n.value.askBid=null},We=s=>{i.value=s.symbol,j.value=s.name,S.value=!1,f.push(`/quotes/usStockDetail?symbol=${s.symbol}&symbolType=${x.value}&enName=${s.name}`),ae(),le(i.value),oe(i.value),H(),ne(i.value),Ee()},Ee=()=>{se(),je(i.value).then(s=>{K.value=s[0],bs(()=>{!n.value.quote&&i.value&&Ke(),(k.value===2||k.value===3)&&!n.value.askBid&&i.value&&X()}),ee()})},Ke=()=>{n.value.quote=new WebSocket(`${O}/1/${i.value}`),n.value.quote.onmessage=s=>{const{data:t}=s,{code:m,data:_}=JSON.parse(t);m/1===0&&(K.value=_[0])}},te=()=>{je(W.value.join(",")).then(s=>{Q.value=s,g.value&&(clearTimeout(g.value),g.value=null),g.value=setTimeout(()=>{te()},2e3)})},Ye=()=>{ks({type:x.value}).then(s=>{W.value=s.map(t=>t.symbol),te()})},Ze=()=>{!x.value||(S.value=!0,Ye())},Xe=()=>{if(console.log(u.query,"route.query"),u.query.isOptional==1){f.push("/optional/index");return}if(u.query.isMore==1){u.query.category?f.push(`/quotes/UsStockMore?symbolType=${u.query.symbolType}&typName=${u.query.typName}&category=${u.query.category}&tabIndex=${u.query.tabIndex}`):f.push(`/quotes/UsStockMore?symbolType=${u.query.symbolType}&typName=${u.query.typName}&tabIndex=${u.query.tabIndex}`);return}u.query.from==="trade"&&f.push("/trade/index?tabActive=3&navActive=3"),Re?f.go(-1):u.query.tabIndex?V(`/quotes/index?tabActive=${u.query.tabIndex}`):f.go(-1)},V=(s,t)=>{s==="/quotes/openTrade"?f.push({path:s,query:{tabActive:t,symbol:i.value,type:x.value,tabIndex:u.query.tabIndex}}):f.push(s)},F=s=>{const{paramsValue:t,seconds:m,index:_}=s;L.value=_,I[_s]({stage:t,seconds:m}),es(t)},es=s=>{J.value=s,s=="timeSharing"?B.value="area":B.value="candle_solid"},ss=s=>{v.value=s},ae=()=>{ps(I.coins).then(s=>{s.map(t=>{t.name=t.symbol}),Ae.value=s})},le=s=>{Is(s).then(t=>{P.value=t,Ue.value=t.symbolName})},oe=s=>{Bs(s).then(t=>{Fe.value=t,He.value=t.length===0})},ne=s=>{Vs(s).then(t=>{if(t&&t.length>0){const m=t.sort((_,$)=>$.timestamp-_.timestamp);U.value=m.slice(0,16)||[]}else U.value=[]})},ts=(s,t)=>{k.value=s},as=()=>{R.value=!R.value},ie=()=>{G.value.openCurrency(i.value)},H=()=>{let s={symbol:i.value};ms(s).then(t=>{A.value=t})},ls=()=>{S.value=!1},ce=s=>new URL(s,import.meta.url).href;return(s,t)=>{var $,C,ue,re,de,ve,_e,pe,me,he,fe,ye,be,ke,xe,ge,$e,qe,Se,Ce,Te,we,Ie,Be,Ve;const m=hs,_=fs;return c(),r("section",Us,[e("div",Rs,[e("header",As,[e("div",Fs,[e("div",{class:"icon back",onClick:Xe},[D(m,{name:"arrow-left",size:"20"})]),e("div",Hs,[e("img",{src:ce(p(Ge)),alt:"convert-img",class:"convert-img",onClick:Ze},null,8,Ms),e("p",Os,a(j.value)+"\xA0\xA0",1),e("p",zs,a(i.value),1)])]),e("div",Js,[e("div",{class:"icon search",onClick:t[0]||(t[0]=l=>V(`/optional/search?symbolType=${x.value}`))},[e("img",{src:ce(p(Qe)),alt:""},null,8,Ps)]),e("div",Gs,[A.value?(c(),r("img",{key:0,src:Ss,class:"collected-img",onClick:ie})):(c(),r("img",{key:1,src:Cs,class:"collected-img",onClick:ie}))])])]),e("section",Qs,[e("div",Ws,[e("p",Es,a(p(h)(($=v.value)==null?void 0:$.close)),1),e("p",Ks,[e("span",Ys,a((ue=(C=v.value)==null?void 0:C.netChange)!=null?ue:"-"),1),e("span",Zs,a((re=v.value)!=null&&re.change_ratio?`${(de=v.value)==null?void 0:de.change_ratio}%`:"-"),1)])]),e("div",Xs,[e("div",et,[e("p",null,[e("span",st,a(s.$t("high")),1),e("span",tt,a(p(h)((ve=v.value)==null?void 0:ve.high)),1)]),e("p",null,[e("span",at,a(s.$t("Low")),1),e("span",lt,a(p(h)((_e=v.value)==null?void 0:_e.low)),1)]),e("p",null,[e("span",ot,a(s.$t("open")),1),e("span",nt,a(p(h)((pe=v.value)==null?void 0:pe.open)),1)]),e("p",it,[e("span",ct,a(s.$t("quantity")),1),e("span",ut,a(p(h)((me=v.value)==null?void 0:me.volume)),1)])]),e("div",rt,[e("p",dt,[e("span",vt,a(s.$t("Forehead")),1),e("span",_t,a(p(h)((he=v.value)==null?void 0:he.volume)),1)]),x.value!=="JP-stocks"&&x.value!=="INDIA-stocks"?(c(),r("p",pt,[e("span",mt,a(s.$t("marketValue")),1),e("span",ht,a(p(h)((fe=v.value)==null?void 0:fe.marketCapital)),1)])):b("",!0),e("p",ft,[e("span",yt,a(s.$t("share")),1),e("span",bt,a(p(h)((ye=v.value)==null?void 0:ye.open)),1)]),e("p",kt,[e("span",xt,a(s.$t("amplitude")),1),e("span",gt,a(p(h)((be=v.value)==null?void 0:be.changeRatio)),1)])])])]),(xe=(ke=v.value)==null?void 0:ke.market)!=null&&xe.status?(c(),r("p",$t,[e("span",null,a((($e=(ge=v.value)==null?void 0:ge.market)==null?void 0:$e.status)&&s.$t((Se=(qe=v.value)==null?void 0:qe.market)==null?void 0:Se.status))+",",1),e("span",qt,a((Te=(Ce=v.value)==null?void 0:Ce.market)==null?void 0:Te.time_str),1),t[5]||(t[5]=M("\xA0 ",-1)),e("span",null,a(((Ie=(we=v.value)==null?void 0:we.market)==null?void 0:Ie.time_zone)&&s.$t((Ve=(Be=v.value)==null?void 0:Be.market)==null?void 0:Ve.time_zone)),1)])):b("",!0),e("section",St,[e("div",Ct,[e("div",Tt,[e("ul",null,[(c(!0),r(T,null,w(Je.value,(l,y)=>(c(),r("li",{key:l,onClick:Ne=>F(l),class:q([l.index===L.value?"active":""])},a(l.name),11,wt))),128)),e("li",{onClick:as},a(p(d)("\u66F4\u591A")),1)])])]),R.value?(c(),r("div",It,[e("ul",null,[(c(!0),r(T,null,w(Pe.value,(l,y)=>(c(),r("li",{key:l,onClick:Ne=>F(l),class:q([l.index===L.value?"active":""])},a(l.name),11,Bt))),128))])])):b("",!0)]),e("section",Vt,[e("div",Nt,[i.value?(c(),De(ws,{height:400,symbol:i.value,isShowsolid:!0,chartType:B.value,onData:ss,key:`${i.value}-${J.value}`},null,8,["symbol","chartType"])):b("",!0)]),L.value===0&&!["HK-stocks","JP-stocks"].includes(x.value)?(c(),r("div",Lt,[e("ul",null,[(c(!0),r(T,null,w(U.value,(l,y)=>(c(),r("li",{class:"flex text-22 orderbook sell",key:y},[e("span",Dt,a(l.timestamp?p(Ds)(l.timestamp*1e3).format("HH:mm"):"--"),1),t[6]||(t[6]=e("span",null,"\xA0\xA0",-1)),e("div",jt,[e("span",{class:q(l.trade_volume>=100?"text-green":"text-red")},a(l.current?Number(l.current).toFixed(3):"--"),3),e("span",{class:q(["text-right textColor",l.trade_volume>=100?"text-green":""])},a(p(h)(l==null?void 0:l.trade_volume)),3)])]))),128))])])):b("",!0)]),t[10]||(t[10]=e("div",{class:"divider"},null,-1)),e("div",Ut,[e("div",Rt,[(c(!0),r(T,null,w(p(ze),(l,y)=>(c(),r("div",{class:q(["tab-item",[k.value===y?"active":""]]),onClick:Ne=>ts(y,l.value),key:l},a(l.title),11,At))),128))]),k.value===0?(c(),De(Ns,{key:0,details:P.value},null,8,["details"])):b("",!0),k.value===1?(c(),r("div",Ft,[e("ul",Ht,[e("li",Mt,[e("span",Ot,a(s.$t("\u65F6\u95F4")),1),e("span",zt,a(s.$t("\u65B9\u5411")),1),e("span",Jt,a(s.$t("\u4EF7\u683C"))+"(USD)",1),e("span",Pt,a(s.$t("\u6570\u91CF")),1)]),(c(!0),r(T,null,w(E.value,(l,y)=>(c(),r("li",{key:l.ts+l.price+l.amount||y,class:"flex justify-between mt-30"},[e("span",Gt,a(l.current_time?l.current_time:"--"),1),e("span",{class:q([l.direction==="buy"?"text-green":"text-red","flex-1"])},a(l.direction==="buy"?s.$t("\u4E70\u5165"):s.$t("\u5356\u51FA")),3),e("span",{class:q([l.direction==="buy"?"text-green":"text-red","flex-1 flex-justify-center"])},a(l.price||"--"),3),e("span",Qt,a(l.amount||"--"),1)]))),128))])])):b("",!0),k.value===2?(c(),r("div",Wt,[e("div",Et,[e("div",Kt,[t[7]||(t[7]=e("div",{class:"bg-line"},null,-1)),M(" "+a(s.$t("\u4E70\u76D8")),1)]),e("div",Yt,[t[8]||(t[8]=e("div",{class:"bg-line"},null,-1)),M(" "+a(s.$t("\u5356\u76D8")),1)])]),e("div",Zt,[D(js,{deepBuy:Y.value,deepSell:Z.value},null,8,["deepBuy","deepSell"])])])):b("",!0)]),e("div",Xt,[e("div",ea,[e("div",{class:"flex-l",onClick:t[1]||(t[1]=l=>V("/cryptos/exchangeRate"))},[t[9]||(t[9]=e("img",{src:Ts,alt:""},null,-1)),e("p",sa,a(p(d)("\u6C47\u7387")),1)]),e("div",ta,[e("div",{class:"buy-btn",onClick:t[2]||(t[2]=l=>V("/quotes/openTrade",0))},a(p(d)("\u4E70\u5165")),1),e("div",{class:"sell-btn",onClick:t[3]||(t[3]=l=>V("/quotes/openTrade",1))},a(p(d)("\u5356\u51FA")),1)])])])]),D(Ls,{onUpdateItem:H,isCollect:A.value,ref_key:"addCurrencyRef",ref:G},null,8,["isCollect"]),D(_,{class:"popup",round:"",show:S.value,"onUpdate:show":t[4]||(t[4]=l=>S.value=l),"close-icon-position":"top-left",position:"left",onClosed:ls},{default:ys(()=>[e("div",aa,[e("div",la,[e("div",oa,a(s.$t("\u540D\u79F0")),1)]),e("div",na,[e("div",ia,[e("div",ca,a(s.$t("\u6700\u65B0\u4EF7\u683C")),1)]),e("div",ua,[e("div",ra,"/24H"+a(s.$t("\u6DA8\u8DCC")),1)])])]),e("div",da,[(c(!0),r(T,null,w(Q.value,l=>(c(),r("div",{class:"flex justify-between mb-10",key:l.name,onClick:y=>We(l)},[e("div",null,[e("div",_a,a(l.name||"--"),1),s.kineType?b("",!0):(c(),r("div",pa,a(s.title),1))]),e("div",ma,[e("div",ha,a(l.close||"--"),1),e("div",{class:q(["mt-1 popup-title",l.change_ratio>0?"text-green":"text-red"])},a(l.change_ratio)+"% ",3)])],8,va))),128))])]),_:1},8,["show"])])}}},Ha=os(fa,[["__scopeId","data-v-5f26ecb4"]]);export{Ha as default};
