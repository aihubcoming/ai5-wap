import{_ as f,o as s,c as d,e as l,t as r,aW as x,bb as b,g as m,w as g,n as o,h as _,F as C,m as k,d as v}from"./index-16c70849.js";import{C as u}from"./index-e4f71467.js";/* empty css               */import{c as w}from"./coinUnit-680ac62d.js";import{_ as B}from"./icon-close-a4b849b5.js";import{C as h}from"./index-4ea44f9f.js";const T={name:"PopupDelivery",components:{[u.name]:u,[h.name]:h},props:{showBtns:{type:Boolean,default:!1},detailData:{type:Object,default(){return{}}},disabled:{type:Boolean,default:!1},price:{type:[Number,String],default:"0.00"}},computed:{timeFormat(){let e;return this.arr.length?(this.arr[0]/1>0?e="DDd HHh mmm sss":this.arr[1]/1>0?e="mmm sss":e="sss",e):"--"},text(){return this.currentRate+"s"},listItem(){return[{id:1,text:this.$t("\u8D2D\u4E70\u4EF7"),key:"open_price"},{id:2,text:this.detailData.state!=="created"?this.$t("\u73B0\u4EF7"):this.$t("\u7ED3\u7B97\u4EF7\u683C"),key:"close_price"},{id:3,text:this.$t("\u65B9\u5411"),key:"direction"},{id:4,text:this.$t("\u6570\u91CF"),key:"amount",extro:this.getCurrentUnit()},{id:5,text:this.$t("\u4EA4\u5272\u65F6\u95F4"),key:"settlement_time"}]}},created(){this.routeType=this.$route.query.type,this.detailData.state!=="created"&&this.handleInit()},beforeUnmount(){clearInterval(this.interval),console.log("before destroy..")},data(){return{totalTime:"",remain_time:0,arr:[],currentRate:0,interval:null,rate:0,routeType:"cryptos"}},methods:{getCurrentUnit(){return w(this.routeType)},continueToBuy(){this.detailData.state==="created"&&this.$emit("continueToBuy",this.detailData)},handleBuyWord(e){return e.id===3?this.detailData.direction==="buy"?this.$t("\u5F00\u591A"):this.$t("\u5F00\u7A7A"):e.key==="settlement_time"?this.detailData.time_num+this.detailData.time_unit:"extro"in e?this.detailData[e.key]&&this.detailData[e.key].toString()+e.extro:this.detailData[e.key]&&this.detailData[e.key].toString()},colorChoose(e){if(e.id===2)return"text-green";if(e.id===3)return this.detailData.direction==="buy"?"text-green":"text-red"},handleFinish(){this.$emit("timeEnd",this.detailData.order_no)},handleInit(){this.totalTime=this.detailData.time_num,this.arr=[],this.detailData.remain_time!=null&&(this.arr=this.detailData.remain_time.split(":")),this.remain_time=this.arr.length&&this.arr[0]/1*3600+this.arr[1]/1*60+this.arr[2]/1,this.rate=this.remain_time/this.totalTime*100},timeChange(e){let n=e.days*86400+e.hours*3600+e.minutes*60+e.seconds;this.rate=n/this.totalTime*100},onClose(){this.$emit("close")}}},F={id:"cryptos"},j={class:"popup-delivery text-28 rounded-2xl overflow-hidden"},I={class:"border-b-color pt-14 pb-9 relative textColor"},U={class:"text-38 px-8"},N={key:0,class:"flex justify-center mt-11"},R={class:"flex flex-col pb-16 textColor"},S={class:"text-grey text-30"},V={key:2,class:"flex justify-between px-10 pb-16"};function W(e,n,t,z,c,a){const D=h,y=u;return s(),d("div",F,[l("div",j,[l("div",I,[l("h1",U,r(t.detailData.name)+" "+r(e.$t("\u4EA4\u5272")),1),l("img",{src:B,class:"w-9 h-9 absolute right-10 top-10",onClick:n[0]||(n[0]=(...i)=>a.onClose&&a.onClose(...i))})]),t.detailData.state!=="created"?(s(),d("div",N,[x(m(y,{"layer-color":"#ccc",size:"120px","current-rate":c.currentRate,"onUpdate:currentRate":n[1]||(n[1]=i=>c.currentRate=i),rate:c.rate,speed:0,text:a.text},{default:g(()=>[m(D,{onFinish:a.handleFinish,class:"textColor",ref:"coutDown",onChange:a.timeChange,time:c.remain_time*1e3,format:a.timeFormat},null,8,["onFinish","onChange","time","format"])]),_:1},8,["current-rate","rate","text"]),[[b,c.rate!=0]])])):(s(),d("div",{key:1,class:o(["mt-11 text-50 text-center",{"text-green":t.detailData.profit_state==="1","text-red":t.detailData.profit_state==="0"}])},[_(r(e.$t("\u76C8\u4E8F")),1),l("span",null,r(t.detailData.profit_state==="1"?"+":"")+r(t.detailData.profit),1),_(" "+r(a.getCurrentUnit()),1)],2)),l("ul",R,[(s(!0),d(C,null,k(a.listItem,i=>(s(),d("li",{key:i.id,class:"flex justify-between px-8 mt-7"},[l("p",S,r(i.text),1),i.key=="close_price"?(s(),d("p",{key:0,class:o(["text-30",{"text-green":t.detailData.direction==="buy"&&t.detailData.state!=="created"&&t.price*1>=t.detailData.open_price*1||t.detailData.direction==="buy"&&t.detailData.state=="created"&&t.detailData.close_price*1>=t.detailData.open_price*1||t.detailData.direction!=="buy"&&t.detailData.state!=="created"&&t.price*1<=t.detailData.open_price*1||t.detailData.direction!=="buy"&&t.detailData.state=="created"&&t.detailData.close_price*1<=t.detailData.open_price*1,"text-red":t.detailData.direction==="buy"&&t.detailData.state!=="created"&&t.price*1<t.detailData.open_price*1||t.detailData.direction==="buy"&&t.detailData.state=="created"&&t.detailData.close_price*1<t.detailData.open_price*1||t.detailData.direction!=="buy"&&t.detailData.state!=="created"&&t.price*1>t.detailData.open_price*1||t.detailData.direction!=="buy"&&t.detailData.state=="created"&&t.detailData.close_price*1>t.detailData.open_price*1}])},r(t.detailData.state!=="created"?t.price:t.detailData[i.key]),3)):(s(),d("p",{key:1,class:o(["text-30",a.colorChoose(i)])},r(a.handleBuyWord(i)),3))]))),128))]),t.showBtns?(s(),d("div",V,[l("p",{class:o([{btnMain:t.detailData.state!=="created",bgDark:t.detailData.state==="created"},"w-64 h-20 rounded-lg flex justify-center items-center mr-5 text_color"]),onClick:n[2]||(n[2]=(...i)=>a.onClose&&a.onClose(...i))},r(e.$t("\u5173\u95ED")),3),l("p",{onClick:n[3]||(n[3]=(...i)=>a.continueToBuy&&a.continueToBuy(...i)),class:o([{btnMain:t.detailData.state==="created",bgDark:t.detailData.state!=="created",disableBtn:t.disabled},"w-96 h-20 rounded-lg flex justify-center items-center text_color"])},r(e.$t("\u7EE7\u7EED\u4E0B\u5355")),3)])):v("",!0)])])}const P=f(T,[["render",W],["__scopeId","data-v-2fec4579"]]);export{P as _};
