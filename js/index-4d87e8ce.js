import{aj as X,bA as Z,bK as T,bz as B,aZ as $,_ as V,o as h,c as p,e as i,t as n,F as f,m as y,aY as I,d as _,S as C,cu as ee,ci as S,aN as P,bR as te,n as u,aW as k,aX as O,h as D,g,I as w,al as se,av as ie,cv as oe,cr as ne,cw as le,ct as re,a_ as ae,ag as ce,b as v,bx as he,bb as pe,aA as me}from"./index-a1ce0b9b.js";/* empty css               */import{_ as H}from"./index-b7e77524.js";import{_ as A}from"./index-a4304f7d.js";import{_ as K,a as ue}from"./selectIcon-003c0c3a.js";import{a as d}from"./trading-8f9dd274.js";import{a as L,T as F}from"./index-f267e586.js";import{_ as R}from"./index-e039b399.js";import{K as N}from"./index-a8d39ccc.js";import{f as de}from"./index-687d3d78.js";import{_ as fe}from"./record-e0832bfd.js";import{S as j,a as U}from"./index-cf70a38c.js";import{C as E}from"./index-a635fd51.js";import{A as ye}from"./index-9629f4b0.js";import"./dayjs.min-c1882478.js";import"./use-id-e80f4f70.js";import"./use-tab-status-1077b4d5.js";import"./index-69b13b97.js";import"./index-0ed49019.js";/* empty css              */import"./index-28c529e2.js";import"./index-f9a41980.js";import"./index-b2caa79d.js";import"./black-convert-e248d682.js";import"./icon-star-8ef24b6e.js";import"./index-ffb21af0.js";import"./trade.api-c60e8750.js";/* empty css                                                              */const _e=X(),be=_e.theme;let b=6;const xe={name:"CryptosTradeDeepData",props:{symbol:{type:String},price:{type:[Number,String],default:"0.00"},showType:{type:Number,default:0},selectValue:{type:Number}},data(){const e=[];for(let t=0;t<b;t++)e.push({amount:"",price:""});return{THEME:be,fixDate:Z,greenData:e,redData:e,socket:null}},mounted(){this.showType==1||this.showType==2?b=12:b=6,this.getHomeList()},watch:{symbol(e){this.startDeepSocket(),this.getHomeList()},showType(e){e==1||e==2?b=12:b=6}},computed:{...T("home",["currency"])},methods:{getHomeList(){B(this.symbol).then(e=>{let t=e[0].close.toString(),a=t.substring(t.indexOf(".")+1,t.length).length,o=[],s="0.";for(let r=0;r<a-1;r++)s=s+"0",o.push(s);let l=[];if(o.map(r=>{let x={name:r+"1",value:r.substring(r.indexOf(".")+1,r.length).length+1};l.push(x)}),a<=2){let r=[{name:"0.1",value:1},{name:"1",value:-1},{name:"10",value:-2},{name:"100",value:-3}];l=l.concat(r)}this.symbol=="shib"&&(l=l.slice(-4));let m={arry:l,numberLength:a};this.$emit("getList",m)})},startDeepSocket(){this.closeSocket(),this.socket=new WebSocket(`${$}/3/${this.symbol}`),this.socket.onmessage=e=>{const{data:t}=e,{code:a,data:o}=JSON.parse(t);a/1===0&&this.handleDeep(o)}},handleDeep(e){this.deepData=e,this.selectValue>=1?(this.deepData.asks.map(o=>{o.price=parseFloat(o.price).toFixed(this.selectValue)}),this.deepData.bids.map(o=>{o.price=parseFloat(o.price).toFixed(this.selectValue)})):(this.selectValue==-1&&(this.deepData.asks.map(o=>{o.price=o.price.substring(0,o.price.indexOf("."))}),this.deepData.bids.map(o=>{o.price=o.price.substring(0,o.price.indexOf("."))})),this.selectValue==-2&&(this.deepData.asks.map(o=>{o.price=o.price.substring(0,o.price.indexOf(".")-1)+"0"}),this.deepData.bids.map(o=>{o.price=o.price.substring(0,o.price.indexOf(".")-1)+"0"})),this.selectValue==-3&&(this.deepData.asks.map(o=>{o.price=o.price.substring(0,o.price.indexOf(".")-2)+"00"}),this.deepData.bids.map(o=>{o.price=o.price.substring(0,o.price.indexOf(".")-2)+"00"})));const{asks:t,bids:a}=e;this.redData=t.sort((o,s)=>s.price-o.price).slice(0,b),this.greenData=a.sort((o,s)=>s.price-o.price).slice(0,b)},onPrice(e){this.$emit("price",e)},closeSocket(){this.socket&&this.socket.close(),this.socket=null}},activated(){this.startDeepSocket()},deactivated(){this.closeSocket()},beforeUnmount(){this.socket&&this.socket.close(),this.socket=null}},ge={class:"deep-data"},ve={class:"flex justify-between text-grey text-24"},ke={class:"text-right items-end justify-end"},Te={class:""},Ce={class:"mt-1"},Se=["onClick"],we={class:"text-red"},Oe={key:0,class:"text-right textColor"},De={key:1,class:"text-right textColor"},Ve={class:"text-red pt-3 text-34 font-bold text-center"},Ie={class:"pb-3 text-20 text-center"},Le=["onClick"],Fe={class:"text-green"},Ne={key:0,class:"text-right textColor"},je={key:1,class:"text-right textColor"};function Ue(e,t,a,o,s,l){return h(),p("div",ge,[i("div",ve,[i("div",null,[i("div",null,n(e.$t("\u4EF7\u683C")),1),t[0]||(t[0]=i("div",{class:"mt-1"},"(USDT)",-1))]),i("div",ke,[i("div",Te,n(e.$t("\u6570\u91CF")),1),i("div",Ce,"("+n(a.symbol.toUpperCase()||"--")+")",1)])]),a.showType==0||a.showType==2?(h(!0),p(f,{key:0},y(s.redData,(m,r)=>(h(),p("div",{class:"flex justify-between pt-1 text-26",key:m+r,onClick:x=>l.onPrice(m.price),style:I({background:`linear-gradient(to right,${s.THEME=="dark"?"#131A2E":"#fff"} 0%`+m.amount/s.greenData[s.greenData.length-1].amount*100+"%,rgba(246,70,93,.1) "+m.amount/s.greenData[s.greenData.length-1].amount*100+"%,rgba(246,70,93,.1) 100%)"})},[i("div",we,n(m.price||"--"),1),a.symbol=="shib"?(h(),p("div",Oe,n(s.fixDate(m.amount,e.$i18n)||"--"),1)):(h(),p("div",De,n(m.amount||"--"),1))],12,Se))),128)):_("",!0),i("div",Ve,n(a.price||"--"),1),i("div",Ie," \u2248 "+n((a.price*e.currency.rate).toFixed(a.price.toString().split(".")[1]?a.price.toString().split(".")[1].length:2)||"--"),1),a.showType==0||a.showType==1?(h(!0),p(f,{key:1},y(s.greenData,(m,r)=>(h(),p("div",{class:"flex justify-between pt-1 text-26",key:r,onClick:x=>l.onPrice(m.price),style:I({background:`linear-gradient(to right,${s.THEME=="dark"?"#131A2E":"#fff"} 0%`+m.amount/s.greenData[s.greenData.length-1].amount*100+"%,rgba(94,186,137,.1) "+m.amount/s.greenData[s.greenData.length-1].amount*100+"%,rgba(94,186,137,.1) 100%)"})},[i("div",Fe,n(m.price||"--"),1),a.symbol=="shib"?(h(),p("div",Ne,n(s.fixDate(m.amount,e.$i18n)||"--"),1)):(h(),p("div",je,n(m.amount||"--"),1))],12,Le))),128)):_("",!0)])}const M=V(xe,[["render",Ue]]);const Ee={name:"perpetualPosition",components:{[C.name]:C,[L.name]:L,[F.name]:F},props:{symbol:{type:String,default:""},symbolName:{type:String,default:""},price:{type:[Number,String],default:"0.00"},initOpen:{type:Object,default(){return{}}},initClose:{type:Object,default(){return{}}}},computed:{...T("user",["userInfo"])},activated(){this.selectData=[{title:this.$t("\u5E02\u4EF7\u59D4\u6258"),type:"1"},{title:this.$t("\u9650\u4EF7\u59D4\u6258"),type:"2"}],this.title=this.selectData[0].title,this.type=this.selectData[0].type,this.form.order_price_type="opponent"},watch:{initOpen:{deep:!0,handler(e){e.volume/1>0&&this.handleInitSliderOption()}},initClose:{deep:!0,handler(e,t){e.volume/1>0&&this.handleInitSliderOption(!0)}},price(e){this.type==="1"&&(this.form.price=e)}},data(){return{options:ee.sliderOptions,value:0,isShow:!1,title:this.$t("\u5E02\u4EF7\u59D4\u6258"),selectData:[],form:{volume:"",session_token:"",symbol:"",price:"",total:"",order_price_type:"opponent"},type:"1",currentType:"open",interval:.001,marks:e=>e%25===0,isTotal:!1,percentageVal:0}},mounted(){this.selectData=[{title:this.$t("\u5E02\u4EF7\u59D4\u6258"),type:"1"},{title:this.$t("\u9650\u4EF7\u59D4\u6258"),type:"2"}],this.title=this.selectData[0].title,this.type=this.selectData[0].type,this.form.order_price_type="opponent"},methods:{checkIsTotal(e){this.isTotal=e,this.percentageVal=0,this.form.total="",this.form.volume=""},exchangeVal(e){if(!this.userInfo.token){this.$router.push("/login");return}if(this.initOpen.volume>0&&this.form.price){if(this.isTotal)this.currentType=="open"?this.form.total=this.initOpen.volume*(e/100):this.form.total=Math.floor(this.initClose.volume*(e/100)*parseFloat(this.form.price)*1e3)/1e3;else if(this.currentType=="open"){let t=parseFloat(this.initOpen.volume)*(e/100)/parseFloat(this.form.price);this.form.volume=Math.floor(t*1e5)/1e5}else{let t=parseFloat(this.initClose.volume);this.form.volume=Math.floor(t*(e/100)*1e5)/1e5}this.percentageVal=e}},handleInitSliderOption(e){e||(this.form.volume=""),console.log(this.initOpen.volume);let t;this.currentType==="open"?t=this.initOpen.volume/1:t=this.initClose.volume/1,this.options.max=Number(t.toFixed(3)),this.options.max>0?this.options.disabled=!1:this.options.disabled=!0},onInput(){if(this.currentType==="open"){let e=parseFloat(this.initOpen.volume)/parseFloat(this.form.price);console.log(this.initOpen.volume),console.log(this.form.price),console.log(e),this.form.volume*1>e/1&&(this.form.volume=e)}else this.form.volume*1/1>this.options.max/1&&(this.form.volume=this.options.max/1)},onInputTotal(){if(this.form.total>0)if(this.currentType==="open")console.log(this.initOpen.volume),this.form.total*1>this.initOpen.volume*1&&(this.form.total=this.initOpen.volume);else{let e=(parseFloat(this.form.total)/parseFloat(this.form.price)).toFixed(5);parseFloat(e)>parseFloat(this.initClose.volume)&&(this.form.total=(parseFloat(this.initClose.volume)*parseFloat(this.form.price)).toFixed(5))}},selectBtn(){this.isShow=!this.isShow},selectItem(e){e.type==1&&(this.form.price=this.price),this.form.order_price_type=e.type==="1"?"opponent":"limit",this.title=e.title,this.type=e.type,this.isShow=!1},changeTab(e){this.percentageVal=0,this.isTotal=!1,this.form.total="",console.log("changeTab",e),this.currentType!==e&&(this.currentType=e,this.currentType==="close"?this.$emit("ordered","close"):this.$emit("ordered","open"),this.handleInitSliderOption())},order(){if(!this.userInfo.token){this.$router.push("/login");return}let e="";if(this.isTotal){if(!this.form.total){S(this.$t("\u8BF7\u8F93\u5165\u603B\u989D"));return}this.currentType==="open"?(this.form.volume=parseFloat(this.form.total).toFixed(5),this.form.total=(parseFloat(this.form.total)/parseFloat(this.form.price)).toFixed(5)):(this.form.volume=parseFloat(this.form.total)/parseFloat(this.form.price),this.form.volume=this.form.volume.toFixed(5)),e=this.form.volume}else{if(!this.form.volume){S(this.$t("\u8BF7\u8F93\u5165\u6570\u91CF"));return}this.currentType==="open"?(this.form.total=this.form.volume,e=parseFloat(this.form.volume)*parseFloat(this.form.price)):e=this.form.volume}this.form.symbol=this.$route.params.symbol;let t=null,a=null;this.currentType==="open"?this.form.session_token=this.initOpen.session_token:this.form.session_token=this.initClose.session_token,t=this.currentType==="open"?d.tradeBuy:d.tradeSell,a=this.currentType,t({volume:e,session_token:this.form.session_token,symbol:this.form.symbol,price:this.form.price,total:this.form.total,order_price_type:this.form.order_price_type}).then(o=>{this.percentageVal=0,P(this.$t("\u64CD\u4F5C\u6210\u529F")),this.form.volume="",this.form.total="",te().then(s=>{this.$store.commit("user/SET_USERINFO",{balance:s.money})}),this.$emit("ordered",a)}).catch(()=>{this.$emit("ordered",a)})}}},Be={class:"flex flex-col flex-1 text-28"},$e={class:"flex items-center h-16 tabBackground text-grey"},Pe={class:"mt-5 mb-5 inputBackground",style:{position:"relative"}},He={class:"pl-4 textColor",style:{width:"80%"}},Ae={key:0,class:"option-box"},Ke=["onClick"],Re={class:"h-18 inputBackground mb-6 flex justify-center px-4 textColor2 items-center"},Me=["disabled"],qe={class:"h-18 inputBackground mb-6 flex justify-center px-4 textColor2 items-center"},ze={class:"flex total-list"},We={key:0,class:"h-18 inputBackground mb-9 flex justify-center px-4 items-center"},Ge=["placeholder"],Qe={class:"textColor text-28"},Je={key:1,class:"h-18 inputBackground mb-9 flex justify-center px-4 items-center"},Ye=["placeholder"],Xe={class:"text-24 w-full flex justify-between items-center textColor1"},Ze={class:"flex justify-between items-center mt-10 mb-10"},et={class:"flex flex-col text-24"},tt={key:0,class:"text-grey"},st={class:"textColor ml-2"},it={key:1,class:"text-grey"},ot={class:"textColor ml-2"};function nt(e,t,a,o,s,l){const m=w;return h(),p("div",Be,[i("div",$e,[i("p",{class:u(["text-28 flex-1 flex items-center justify-center h-16 buy-item",s.currentType=="open"?"open":""]),onClick:t[0]||(t[0]=r=>l.changeTab("open"))},n(e.$t("\u4E70\u5165")),3),i("p",{class:u(["text-28 flex-1 flex items-center justify-center h-16 buy-item",s.currentType=="close"?"close":""]),onClick:t[1]||(t[1]=r=>l.changeTab("close"))},n(e.$t("\u5356\u51FA")),3)]),i("div",Pe,[i("div",{class:"flex justify-between items-center w-full h-18",onClick:t[2]||(t[2]=(...r)=>l.selectBtn&&l.selectBtn(...r))},[i("div",He,n(s.title),1),t[16]||(t[16]=i("img",{src:K,alt:"select-icon",class:"w-5 h-2 pr-5"},null,-1))]),s.isShow?(h(),p("div",Ae,[(h(!0),p(f,null,y(s.selectData,r=>(h(),p("div",{class:"text-30",key:r.type,onClick:x=>l.selectItem(r)},n(r.title),9,Ke))),128))])):_("",!0)]),i("div",Re,[k(i("input",{placeholder:"",class:"targetPrice w-full h-18 border-none","onUpdate:modelValue":t[3]||(t[3]=r=>s.form.price=r),disabled:s.type/1===1},null,8,Me),[[O,s.form.price]]),t[17]||(t[17]=i("span",null,"USDT",-1))]),i("div",qe,[i("span",null,n(s.title),1)]),i("div",ze,[i("div",{class:u(["total-div",[s.isTotal?"":"active-bg"]]),onClick:t[4]||(t[4]=r=>l.checkIsTotal(!1))},n(e.$t("\u6570\u91CF")),3),i("div",{class:u(["total-div",[s.isTotal?"active-bg":""]]),onClick:t[5]||(t[5]=r=>l.checkIsTotal(!0))},n(e.$t("\u603B\u989D")),3)]),s.isTotal?_("",!0):(h(),p("div",We,[k(i("input",{placeholder:e.$t("\u6570\u91CF"),class:"w-full h-18 border-none textColor text-28","onUpdate:modelValue":t[6]||(t[6]=r=>s.form.volume=r),onInput:t[7]||(t[7]=(...r)=>l.onInput&&l.onInput(...r))},null,40,Ge),[[O,s.form.volume]]),i("span",Qe,n(a.symbolName.toLocaleUpperCase()),1)])),s.isTotal?(h(),p("div",Je,[k(i("input",{placeholder:e.$t("\u603B\u989D"),class:"w-full h-18 border-none textColor text-28","onUpdate:modelValue":t[8]||(t[8]=r=>s.form.total=r),onInput:t[9]||(t[9]=(...r)=>l.onInputTotal&&l.onInputTotal(...r))},null,40,Ye),[[O,s.form.total]]),t[18]||(t[18]=i("span",{class:"textColor text-28"},n("USDT"),-1))])):_("",!0),i("div",Xe,[i("span",{class:u(["flex-1 tab-item",[s.percentageVal==25?"select-active":""]]),onClick:t[10]||(t[10]=r=>l.exchangeVal(25))},"25%",2),i("span",{class:u(["flex-1 tab-item",[s.percentageVal==50?"select-active":""]]),onClick:t[11]||(t[11]=r=>l.exchangeVal(50))},"50%",2),i("span",{class:u(["flex-1 tab-item",[s.percentageVal==75?"select-active":""]]),onClick:t[12]||(t[12]=r=>l.exchangeVal(75))},"75%",2),i("span",{class:u(["flex-1 tab-item",[s.percentageVal==100?"select-active":""]]),onClick:t[13]||(t[13]=r=>l.exchangeVal(100))},"100%",2)]),i("div",Ze,[i("div",et,[this.currentType==="open"?(h(),p("p",tt,[D(n(e.$t("\u53EF\u7528")),1),i("span",st,n(a.initOpen.volume)+"\xA0USDT",1)])):(h(),p("p",it,[D(n(e.$t("\u53EF\u5356")),1),i("span",ot,n(a.initClose.volume)+"\xA0"+n(a.symbolName.toLocaleUpperCase()),1)]))]),g(m,{name:"add-o",onClick:t[14]||(t[14]=r=>e.$router.push("/cryptos/exchangePage")),class:"text-30 add-icon"})]),i("div",{style:{},class:u(["w-full h-20 flex justify-center text-white text-center rounded buyandSell mt-18 items-center",s.currentType==="open"?"bg-green":"bg-red"]),onClick:t[15]||(t[15]=r=>l.order())},n(s.currentType=="open"?e.$t("\u4E70\u5165"):e.$t("\u5356\u51FA")),3)])}const q=V(Ee,[["render",nt],["__scopeId","data-v-d239300c"]]);const lt=se(),rt={name:"TradePage",components:{TradeHead:R,TradeOrderArea:q,CryptosTradeDeepData:M,[C.name]:C,[j.name]:j,[U.name]:U,[E.name]:E,[w.name]:w,EntrustItem:A,KLineCharts:N,historyItem:H,fxKline:de,KLineCharts:N},computed:{...T("user",["userInfo"]),...T({coinList:"home/coinList"})},data(){const e=[];for(let t=0;t<8;t++)e.push({volume:"--",price:"--"});return{HOST_URL:ie,quote:{},showCharts:!1,updateKey:1,initTimer:null,keyIndex:0,timeout:null,timer:null,timer2:null,symbol:"",price:"",range:"",initOpen:{},initClose:{},asks:e,bids:e,orderCur:[],orderHold:[],futrueHold:[],futrueHistroy:[],socket:null,sockets:{quotes:null,deep:null},curTab:"",selectIndex:1,initFutrue:{},show:!1,entrustList:[],tabType:1,no_zeroList:[],pairsList:{},isShow:!1,title:1,isSelectShow:!1,actions:[{name:this.$t("\u9ED8\u8BA4"),value:0,className:"actions-active"},{name:this.$t("\u5C55\u793A\u4E70\u5355"),value:1,className:""},{name:this.$t("\u5C55\u793A\u5356\u5355"),value:2,className:""}],showType:0,sortList:[],selectValue:0,coinPrice:0,type:"cryptos",filterOne:[{name:this.$t("\u5206\u65F6"),paramsValue:"timeSharing",seconds:1*60*1e3,index:0},{name:"1"+this.$t("\u5929"),paramsValue:"1day",seconds:1*24*60*60*1e3,index:1},{name:"1"+this.$t("\u5468"),paramsValue:"1week",seconds:7*24*60*60*1e3,index:2},{name:"1"+this.$t("\u6708"),paramsValue:"1mon",seconds:30*24*60*60*1e3,index:3},{name:"5"+this.$t("\u5929"),paramsValue:"5day",seconds:5*24*60*60*1e3,index:4},{name:this.$t("season"),paramsValue:"1quarter",seconds:3*30*24*60*60*1e3,index:5},{name:this.$t("Year"),paramsValue:"1year",seconds:12*30*24*60*60*1e3,index:6}],filterTwo:[{name:"120"+this.$t("\u5206"),paramsValue:"120min",seconds:2*60*60*1e3,index:7},{name:"60"+this.$t("\u5206"),paramsValue:"60min",seconds:1*60*60*1e3,index:8},{name:"30"+this.$t("\u5206"),paramsValue:"30min",seconds:30*60*1e3,index:9},{name:"15"+this.$t("\u5206"),paramsValue:"15min",seconds:15*60*1e3,index:10},{name:"5"+this.$t("\u5206"),paramsValue:"5min",seconds:5*60*1e3,index:11},{name:"1"+this.$t("\u5206"),paramsValue:"1min",seconds:1*60*1e3,index:12}],showKlineChart:!1,chartType:"",timeValue:"",chartData:{},timeLabelActive:1,showMore:!1,symbolName:"",updateKey:1,currency:{},timer3:null}},async created(){this.$route.query.type&&(this.type=this.$route.query.type),await this.SET_COIN_LIST(this.type),this.getExchangeRate()},methods:{handleImage:oe,...ne("home",[le]),onUpdate(e){this.symbol=e,this.closeSocket(),this.init(e)},getExchangeRate(){re().then(e=>{this.currency=e})},handleClickShowKlineChart(){this.showKlineChart=!this.showKlineChart},handleClickSelectTime(e){const{paramsValue:t,seconds:a,index:o}=e;this.timeLabelActive=o,lt[ae]({stage:t,seconds:a}),this.onSelectTime(t)},onSelectTime(e){this.timeValue=e,e=="timeSharing"?this.chartType="area":this.chartType="candle_solid"},onData(e){this.chartData=e},handleClickMoreBtn(){this.showMore=!this.showMore},getCoinPrce(e){B(e).then(t=>{this.symbolName=t[0].name,this.coinPrice=t[0].close})},tabClick(e){this.tabType=e,this.entrustList=[],e==3?this.userInfo.token?this.getWallet():this.$router.push("/login"):this.userInfo.token?this.getOrderList():this.$router.push("/login")},onOrdered(e){this.clearTimer(),this.initParam(this.symbol,e)},onTab(e){this.clearTimer(),this.curTab=e,this[e](this.symbol)},handleQoutes(e){if(e&&e.length){const t=e[0];this.price=t.close,this.range=t.change_ratio+"",this.quote=t,this.updateKey++}},startQuoteSocket(){!this.symbol||(this.socket=new WebSocket(`${$}/1/${this.symbol}`),this.socket.onmessage=e=>{const{data:t}=e,{code:a,data:o}=JSON.parse(t);a/1===0&&this.handleQoutes(o)})},initParam(e,t){this.userInfo.token&&((t==="open"||!t)&&d.tradeBuyToken({}).then(a=>{this.initOpen=a}),(t==="close"||!t)&&d.tradeSellToken({symbol:e}).then(a=>{this.initClose=a}),this.userInfo.token&&(this.getWallet(),this.timer3=setInterval(()=>{this.getOrderList()},2e3)))},init(e){this.symbol=e,this.socket||this.startQuoteSocket(),this.initParam(e),this.clearTimer(),this.getCoinPrce(e)},closeSocket(){this.socket&&this.socket.close(),this.socket=null},clearTimer(){clearInterval(this.timer),clearInterval(this.timer3),this.timer=null},tradeBuy(){d.tradeBuy({volume:1,session_token:"",symbol:"",price:1,order_price_type:""}).then(e=>{console.log(e)}).catch(e=>{e.code==="ECONNABORTED"?S(this.$t("\u7F51\u7EDC\u8D85\u65F6\uFF01")):e.msg!==void 0&&S(this.$t(e.msg))})},getOrderList(){d.tradeRecord({page_no:1,symbol:this.$route.params.symbol,type:this.tabType==1?"orders":"hisorders"}).then(e=>{console.log(e),this.entrustList=e}).catch(()=>{})},cancelOrder(e){d.tradeCancel({order_no:e}).then(t=>{this.initParam(this.symbol),P(this.$t("\u6210\u529F"))}).catch(()=>{})},getWallet(){d.getPairs({pairs:`${this.symbol}/usdt`,symbolType:"cryptos"}).then(e=>{this.pairsList=e.pairs,this.no_zeroList=e.no_zero})},goHistory(){if(this.userInfo.token){let e="cryptos";this.$route.query.type&&(e=this.$route.query.type),this.$router.push(`/cryptos/tradeRecord/${this.symbol}/?type=${e}`)}else this.$router.push("/login")},selectBtn(){this.isShow=!this.isShow},selectItem(e){this.title=e.name,this.isShow=!1,this.selectValue=e.value},onSelect(e){this.showType=e.value,this.actions.map(t=>{t.className=""}),e.className="actions-active"},onCancel(){this.isSelectShow=!1},getList(e){e.numberLength<=2?this.title=e.arry[0].name:this.title=e.arry[e.arry.length-1].name,this.sortList=e.arry}},beforeRouteEnter(e,t,a){let{params:{symbol:o}}=e;o?a(s=>{s.symbol=o,s.init(o)}):a()},activated(){},deactivated(){this.closeSocket(),this.clearTimer()},beforeUnmount(){this.closeSocket(),this.clearTimer()}},at={id:"cryptos"},ct={class:"pb-28 no_touch"},ht={class:"trade-buy-sell flex justify-between px-8 py-8"},pt={class:"flex k-select-box"},mt={class:"mt-5 mb-5 select-box",style:{position:"relative"}},ut={class:"pl-4 text-28 textColor",style:{width:"80%"}},dt={class:"option-box"},ft=["onClick"],yt={class:"flex justify-between border-b-color items-center"},_t={class:"flex pl-8"},bt={key:0},xt={key:0,class:"py-5 px-5"},gt={key:1,class:"py-5 px-5"},vt={key:2,class:"py-5 px-5"},kt={class:"mb-5 border-b"},Tt={class:"text-28 text-grey mt-6 mb-5"},Ct={class:"flex items-center"},St=["src"],wt={class:"flex flex-col"},Ot={class:"text-28 textColor mb-2"},Dt={class:"text-26 text-grey"},Vt={class:"flex flex-col items-end"},It={class:"text-28 textColor mb-2"},Lt={class:"text-26 text-grey"},Ft={class:"mb-5 border-b"},Nt={class:"text-28 text-grey mt-4 mb-10"},jt={class:"flex items-center"},Ut=["src"],Et={class:"flex flex-col"},Bt={class:"text-28 textColor mb-2"},$t={class:"text-24 text-grey"},Pt={class:"flex flex-col items-end"},Ht={class:"text-28 textColor mb-2"},At={class:"text-20 text-grey"},Kt={class:"fixed-box"},Rt={class:"text-30 textColor"},Mt={key:0,class:"kline-container flex"},qt={class:"chart-index"};function zt(e,t,a,o,s,l){const m=R,r=q,x=M,z=A,W=H,G=w,Q=ce("k-line-charts"),J=ye;return h(),p("div",at,[i("div",ct,[g(m,{isReturn:!0,backFunc:()=>e.$router.push("/"),symbolName:s.symbolName,symbol:s.symbol,price:s.price,range:s.range,isTrade:!0,onUpdateCoin:l.onUpdate,onData:t[0]||(t[0]=c=>s.quote=c)},null,8,["backFunc","symbolName","symbol","price","range","onUpdateCoin"]),i("div",ht,[g(r,{symbol:s.symbol,symbolName:s.symbol,"init-open":s.initOpen,"init-close":s.initClose,price:s.price,onOrdered:l.onOrdered},null,8,["symbol","symbolName","init-open","init-close","price","onOrdered"]),(h(),v(he,null,[s.symbol?(h(),v(x,{key:0,selectValue:s.selectValue,onGetList:l.getList,showType:s.showType,symbol:s.symbol,price:s.price,class:"w-72 ml-8"},null,8,["selectValue","onGetList","showType","symbol","price"])):_("",!0)],1024))]),i("div",pt,[i("div",mt,[i("div",{class:"flex justify-between items-center w-full h-18",onClick:t[1]||(t[1]=(...c)=>l.selectBtn&&l.selectBtn(...c))},[i("div",ut,n(s.title),1),t[9]||(t[9]=i("img",{src:K,alt:"select-icon",class:"w-5 h-3 mr-5"},null,-1))]),k(i("div",dt,[(h(!0),p(f,null,y(s.sortList,(c,Y)=>(h(),p("div",{class:"text-28",key:Y,onClick:Wt=>l.selectItem(c)},n(c.name),9,ft))),128))],512),[[pe,s.isShow]])]),i("div",{class:"ml-2",onClick:t[2]||(t[2]=c=>s.isSelectShow=!0)},[...t[10]||(t[10]=[i("img",{src:ue,alt:"warn-icon",class:"w-9 h-8"},null,-1)])])]),t[11]||(t[11]=i("div",{class:"h-4 diviLine"},null,-1)),i("div",null,[i("div",yt,[i("div",_t,[i("div",{class:u(["px-2 py-2 flex items-center text-grey text-28",s.tabType=="1"?"active-line":""]),onClick:t[3]||(t[3]=c=>l.tabClick("1"))},[D(n(e.$t("\u5F53\u524D\u59D4\u6258")),1),s.tabType=="1"?(h(),p("span",bt,"("+n(s.entrustList.length)+")",1)):_("",!0)],2),i("div",{class:u(["px-2 ml-12 py-2 flex items-center text-grey text-28",s.tabType=="2"?"active-line":""]),onClick:t[4]||(t[4]=c=>l.tabClick("2"))},n(e.$t("\u5386\u53F2\u59D4\u6258")),3),i("div",{class:u(["px-2 py-2 flex items-center ml-12 text-grey text-28",s.tabType=="3"?"active-line":""]),onClick:t[5]||(t[5]=c=>l.tabClick("3"))},n(e.$t("\u8D44\u4EA7")),3)]),i("img",{src:fe,alt:"record-img",class:"w-16 h-9 pr-8",onClick:t[6]||(t[6]=(...c)=>l.goHistory&&l.goHistory(...c))})])]),s.tabType=="1"?(h(),p("div",xt,[(h(!0),p(f,null,y(s.entrustList,c=>(h(),v(z,{key:c.order_no,entrust:c,state:"submitted",onCancelOrder:l.cancelOrder},null,8,["entrust","onCancelOrder"]))),128))])):s.tabType=="2"?(h(),p("div",gt,[(h(!0),p(f,null,y(s.entrustList,c=>(h(),v(W,{unit:"USDT",key:c.order_no,coinPrice:s.coinPrice,entrust:c,state:c.state,onCancelOrder:l.cancelOrder},null,8,["coinPrice","entrust","state","onCancelOrder"]))),128))])):(h(),p("div",vt,[i("div",kt,[i("p",Tt,n(e.$t("\u5F53\u524D\u5E01\u5BF9\u8D44\u4EA7")),1),i("ul",null,[(h(!0),p(f,null,y(s.pairsList,c=>(h(),p("li",{key:c.symbol,class:"flex justify-between py-2"},[i("div",Ct,[i("img",{src:c.symbol?`${s.HOST_URL}/symbol/${c.symbol}.png`:l.handleImage("../../../assets/loading-default.png"),class:"w-14 h-14 rounded-full mr-4"},null,8,St),i("p",wt,[i("strong",Ot,n(c.symbol.toUpperCase()),1),i("span",Dt,n(c.full_name),1)])]),i("div",Vt,[i("strong",It,n(c.usable),1),i("span",Lt,n(s.currency.currency_symbol)+" "+n(c.usdt?(s.currency.rate*c.usdt).toFixed(2):"--"),1)])]))),128))])]),i("div",Ft,[i("p",Nt,n(e.$t("\u5176\u4ED6\u975E0\u8D44\u4EA7")),1),i("ul",null,[(h(!0),p(f,null,y(s.no_zeroList,c=>(h(),p("li",{key:c.symbol,class:"flex justify-between py-2"},[i("div",jt,[i("img",{src:c.symbol?`${s.HOST_URL}/symbol/${c.symbol}.png`:l.handleImage("../../../assets/loading-default.png"),class:"w-14 h-14 rounded-full mr-4"},null,8,Ut),i("p",Et,[i("strong",Bt,n(c.symbol.toUpperCase()),1),i("span",$t,n(c.full_name),1)])]),i("div",Pt,[i("strong",Ht,n(c.volume),1),i("span",At,n(s.currency.currency_symbol)+" "+n(c.usdt?(s.currency.rate*c.usdt).toFixed(2):"--"),1)])]))),128))])])])),i("div",Kt,[i("div",{class:"flex justify-between items-center px-2 py-2",onClick:t[7]||(t[7]=me(c=>l.handleClickShowKlineChart(),["stop"]))},[i("span",Rt,n(s.symbol.toUpperCase())+"/USDT\xA0\xA0"+n(e.$t("k\u7EBF\u56FE\u8868")),1),g(G,{class:"textColor text-20",name:s.showCharts?"arrow-down":"arrow-up"},null,8,["name"])]),s.showKlineChart?(h(),p("div",Mt,[i("div",qt,[g(Q,{"update-key":s.updateKey,"update-data":s.quote,symbol:s.symbol,showBottom:!0},null,8,["update-key","update-data","symbol"])])])):_("",!0)]),g(J,{class:"action-sheet",show:s.isSelectShow,"onUpdate:show":t[8]||(t[8]=c=>s.isSelectShow=c),onSelect:l.onSelect,actions:s.actions,"cancel-text":e.$t("\u53D6\u6D88"),"close-on-click-action":"",onCancel:l.onCancel},null,8,["show","onSelect","actions","cancel-text","onCancel"])])])}const ks=V(rt,[["render",zt],["__scopeId","data-v-90f4e4ff"]]);export{ks as default};
