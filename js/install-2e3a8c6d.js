import{_ as k,aT as ne,u as ie,aU as se,aV as Ae,b as oe,aW as z,aM as ye,U as he,K as le,aX as Se,aY as _e,x as B,z as O,aZ as xe,w as we,a_ as Z,a$ as De,b0 as Ie,h as U,b1 as Pe,R as ue,a1 as ce,b2 as Le,b3 as Ce,b4 as Me,b5 as Oe,b6 as ke,b7 as Re,b8 as Te,b9 as ge,O as de,ba as Ve,bb as Be,bc as Ee,bd as Ne,be as We}from"./installCanvasRenderer-26dffa88.js";var ve=function(n){k(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(e,t){return ne(null,this,{useEncodeDefaulter:!0})},r.prototype.getMarkerPosition=function(e,t,a){var i=this.coordinateSystem;if(i&&i.clampData){var s=i.clampData(e),o=i.dataToPoint(s);if(a)ie(i.getAxes(),function(g,d){if(g.type==="category"&&t!=null){var v=g.getTicksCoords(),b=g.getTickModel().get("alignWithLabel"),m=s[d],A=t[d]==="x1"||t[d]==="y1";if(A&&!b&&(m+=1),v.length<2)return;if(v.length===2){o[d]=g.toGlobalCoord(g.getExtent()[A?1:0]);return}for(var p=void 0,y=void 0,_=1,S=0;S<v.length;S++){var w=v[S].coord,x=S===v.length-1?v[S-1].tickValue+_:v[S].tickValue;if(x===m){y=w;break}else if(x<m)p=w;else if(p!=null&&x>m){y=(w+p)/2;break}S===1&&(_=x-v[0].tickValue)}y==null&&(p?p&&(y=v[v.length-1].coord):y=v[0].coord),o[d]=g.toGlobalCoord(y)}});else{var h=this.getData(),u=h.getLayout("offset"),l=h.getLayout("size"),c=i.getBaseAxis().isHorizontal()?0:1;o[c]+=u+l/2}return o}return[NaN,NaN]},r.type="series.__base_bar__",r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},r}(se);se.registerClass(ve);const $=ve;var Ge=function(n){k(r,n);function r(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(){return ne(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},r.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},r.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},r.prototype.brushSelector=function(e,t,a){return a.rect(t.getItemLayout(e))},r.type="series.bar",r.dependencies=["grid","polar"],r.defaultOption=Ae($.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),r}($);const Fe=Ge;var Ye=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),Ue=function(n){k(r,n);function r(e){var t=n.call(this,e)||this;return t.type="sausage",t}return r.prototype.getDefaultShape=function(){return new Ye},r.prototype.buildPath=function(e,t){var a=t.cx,i=t.cy,s=Math.max(t.r0||0,0),o=Math.max(t.r,0),h=(o-s)*.5,u=s+h,l=t.startAngle,c=t.endAngle,g=t.clockwise,d=Math.PI*2,v=g?c-l<d:l-c<d;v||(l=c-(g?d:-d));var b=Math.cos(l),m=Math.sin(l),A=Math.cos(c),p=Math.sin(c);v?(e.moveTo(b*s+a,m*s+i),e.arc(b*u+a,m*u+i,h,-Math.PI+l,l,!g)):e.moveTo(b*o+a,m*o+i),e.arc(a,i,o,l,c,!g),e.arc(A*u+a,p*u+i,h,c-Math.PI*2,c-Math.PI,!g),s!==0&&e.arc(a,i,s,c,l,g)},r}(oe);const j=Ue;function Xe(n,r){r=r||{};var e=r.isRoundCap;return function(t,a,i){var s=a.position;if(!s||s instanceof Array)return z(t,a,i);var o=n(s),h=a.distance!=null?a.distance:5,u=this.shape,l=u.cx,c=u.cy,g=u.r,d=u.r0,v=(g+d)/2,b=u.startAngle,m=u.endAngle,A=(b+m)/2,p=e?Math.abs(g-d)/2:0,y=Math.cos,_=Math.sin,S=l+g*y(b),w=c+g*_(b),x="left",L="top";switch(o){case"startArc":S=l+(d-h)*y(A),w=c+(d-h)*_(A),x="center",L="top";break;case"insideStartArc":S=l+(d+h)*y(A),w=c+(d+h)*_(A),x="center",L="bottom";break;case"startAngle":S=l+v*y(b)+R(b,h+p,!1),w=c+v*_(b)+T(b,h+p,!1),x="right",L="middle";break;case"insideStartAngle":S=l+v*y(b)+R(b,-h+p,!1),w=c+v*_(b)+T(b,-h+p,!1),x="left",L="middle";break;case"middle":S=l+v*y(A),w=c+v*_(A),x="center",L="middle";break;case"endArc":S=l+(g+h)*y(A),w=c+(g+h)*_(A),x="center",L="bottom";break;case"insideEndArc":S=l+(g-h)*y(A),w=c+(g-h)*_(A),x="center",L="top";break;case"endAngle":S=l+v*y(m)+R(m,h+p,!0),w=c+v*_(m)+T(m,h+p,!0),x="left",L="middle";break;case"insideEndAngle":S=l+v*y(m)+R(m,-h+p,!0),w=c+v*_(m)+T(m,-h+p,!0),x="right",L="middle";break;default:return z(t,a,i)}return t=t||{},t.x=S,t.y=w,t.align=x,t.verticalAlign=L,t}}function ze(n,r,e,t){if(ye(t)){n.setTextConfig({rotation:t});return}else if(he(r)){n.setTextConfig({rotation:0});return}var a=n.shape,i=a.clockwise?a.startAngle:a.endAngle,s=a.clockwise?a.endAngle:a.startAngle,o=(i+s)/2,h,u=e(r);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":h=o;break;case"startAngle":case"insideStartAngle":h=i;break;case"endAngle":case"insideEndAngle":h=s;break;default:n.setTextConfig({rotation:0});return}var l=Math.PI*1.5-h;u==="middle"&&l>Math.PI/2&&l<Math.PI*1.5&&(l-=Math.PI),n.setTextConfig({rotation:l})}function R(n,r,e){return r*Math.sin(n)*(e?-1:1)}function T(n,r,e){return r*Math.cos(n)*(e?1:-1)}function Ze(n,r,e){var t=n.get("borderRadius");if(t==null)return e?{cornerRadius:0}:null;he(t)||(t=[t,t,t,t]);var a=Math.abs(r.r||0-r.r0||0);return{cornerRadius:le(t,function(i){return Se(i,a)})}}var F=Math.max,Y=Math.min;function $e(n,r){var e=n.getArea&&n.getArea();if(ge(n,"cartesian2d")){var t=n.getBaseAxis();if(t.type!=="category"||!t.onBand){var a=r.getLayout("bandWidth");t.isHorizontal()?(e.x-=a,e.width+=a*2):(e.y-=a,e.height+=a*2)}}return e}var je=function(n){k(r,n);function r(){var e=n.call(this)||this;return e.type=r.type,e._isFirstFrame=!0,e}return r.prototype.render=function(e,t,a,i){this._model=e,this._removeOnRenderedListener(a),this._updateDrawMode(e);var s=e.get("coordinateSystem");(s==="cartesian2d"||s==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,a):this._renderNormal(e,t,a,i))},r.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},r.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},r.prototype.eachRendered=function(e){_e(this._progressiveEls||this.group,e)},r.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;(this._isLargeDraw==null||t!==this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},r.prototype._renderNormal=function(e,t,a,i){var s=this.group,o=e.getData(),h=this._data,u=e.coordinateSystem,l=u.getBaseAxis(),c;u.type==="cartesian2d"?c=l.isHorizontal():u.type==="polar"&&(c=l.dim==="angle");var g=e.isAnimationEnabled()?e:null,d=qe(e,u);d&&this._enableRealtimeSort(d,o,a);var v=e.get("clip",!0)||d,b=$e(u,o);s.removeClipPath();var m=e.get("roundCap",!0),A=e.get("showBackground",!0),p=e.getModel("backgroundStyle"),y=p.get("borderRadius")||0,_=[],S=this._backgroundEls,w=i&&i.isInitSort,x=i&&i.type==="changeAxisOrder";function L(f){var C=V[u.type](o,f),D=rt(u,c,C);return D.useStyle(p.getItemStyle()),u.type==="cartesian2d"?D.setShape("r",y):D.setShape("cornerRadius",y),_[f]=D,D}o.diff(h).add(function(f){var C=o.getItemModel(f),D=V[u.type](o,f,C);if(A&&L(f),!(!o.hasValue(f)||!Q[u.type](D))){var M=!1;v&&(M=q[u.type](b,D));var I=H[u.type](e,o,f,D,c,g,l.model,!1,m);d&&(I.forceLabelAnimation=!0),ee(I,o,f,C,D,e,c,u.type==="polar"),w?I.attr({shape:D}):d?K(d,g,I,D,f,c,!1,!1):B(I,{shape:D},e,f),o.setItemGraphicEl(f,I),s.add(I),I.ignore=M}}).update(function(f,C){var D=o.getItemModel(f),M=V[u.type](o,f,D);if(A){var I=void 0;S.length===0?I=L(C):(I=S[C],I.useStyle(p.getItemStyle()),u.type==="cartesian2d"?I.setShape("r",y):I.setShape("cornerRadius",y),_[f]=I);var me=V[u.type](o,f),be=pe(c,me,u);O(I,{shape:be},g,f)}var P=h.getItemGraphicEl(C);if(!o.hasValue(f)||!Q[u.type](M)){s.remove(P);return}var W=!1;if(v&&(W=q[u.type](b,M),W&&s.remove(P)),P?xe(P):P=H[u.type](e,o,f,M,c,g,l.model,!!P,m),d&&(P.forceLabelAnimation=!0),x){var X=P.getTextContent();if(X){var G=we(X);G.prevValue!=null&&(G.prevValue=G.value)}}else ee(P,o,f,D,M,e,c,u.type==="polar");w?P.attr({shape:M}):d?K(d,g,P,M,f,c,!0,x):O(P,{shape:M},e,f,null),o.setItemGraphicEl(f,P),P.ignore=W,s.add(P)}).remove(function(f){var C=h.getItemGraphicEl(f);C&&Z(C,e,f)}).execute();var E=this._backgroundGroup||(this._backgroundGroup=new De);E.removeAll();for(var N=0;N<_.length;++N)E.add(_[N]);s.add(E),this._backgroundEls=_,this._data=o},r.prototype._renderLarge=function(e,t,a){this._clear(),re(e,this.group),this._updateLargeClip(e)},r.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),re(t,this.group,this._progressiveEls,!0)},r.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&Ie(e.coordinateSystem,!1,e),a=this.group;t?a.setClipPath(t):a.removeClipPath()},r.prototype._enableRealtimeSort=function(e,t,a){var i=this;if(!!t.count()){var s=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,a),this._isFirstFrame=!1;else{var o=function(h){var u=t.getItemGraphicEl(h),l=u&&u.shape;return l&&Math.abs(s.isHorizontal()?l.height:l.width)||0};this._onRendered=function(){i._updateSortWithinSameData(t,o,s,a)},a.getZr().on("rendered",this._onRendered)}}},r.prototype._dataSort=function(e,t,a){var i=[];return e.each(e.mapDimension(t.dim),function(s,o){var h=a(o);h=h==null?NaN:h,i.push({dataIndex:o,mappedValue:h,ordinalNumber:s})}),i.sort(function(s,o){return o.mappedValue-s.mappedValue}),{ordinalNumbers:le(i,function(s){return s.ordinalNumber})}},r.prototype._isOrderChangedWithinSameData=function(e,t,a){for(var i=a.scale,s=e.mapDimension(a.dim),o=Number.MAX_VALUE,h=0,u=i.getOrdinalMeta().categories.length;h<u;++h){var l=e.rawIndexOf(s,i.getRawOrdinalNumber(h)),c=l<0?Number.MIN_VALUE:t(e.indexOfRawIndex(l));if(c>o)return!0;o=c}return!1},r.prototype._isOrderDifferentInView=function(e,t){for(var a=t.scale,i=a.getExtent(),s=Math.max(0,i[0]),o=Math.min(i[1],a.getOrdinalMeta().categories.length-1);s<=o;++s)if(e.ordinalNumbers[s]!==a.getRawOrdinalNumber(s))return!0},r.prototype._updateSortWithinSameData=function(e,t,a,i){if(!!this._isOrderChangedWithinSameData(e,t,a)){var s=this._dataSort(e,a,t);this._isOrderDifferentInView(s,a)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",axisId:a.index,sortInfo:s}))}},r.prototype._dispatchInitSort=function(e,t,a){var i=t.baseAxis,s=this._dataSort(e,i,function(o){return e.get(e.mapDimension(t.otherAxis.dim),o)});a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:s})},r.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},r.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},r.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},r.prototype._clear=function(e){var t=this.group,a=this._data;e&&e.isAnimationEnabled()&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl(function(i){Z(i,e,U(i).dataIndex)})):t.removeAll(),this._data=null,this._isFirstFrame=!0},r.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},r.type="bar",r}(Pe),q={cartesian2d:function(n,r){var e=r.width<0?-1:1,t=r.height<0?-1:1;e<0&&(r.x+=r.width,r.width=-r.width),t<0&&(r.y+=r.height,r.height=-r.height);var a=n.x+n.width,i=n.y+n.height,s=F(r.x,n.x),o=Y(r.x+r.width,a),h=F(r.y,n.y),u=Y(r.y+r.height,i),l=o<s,c=u<h;return r.x=l&&s>a?o:s,r.y=c&&h>i?u:h,r.width=l?0:o-s,r.height=c?0:u-h,e<0&&(r.x+=r.width,r.width=-r.width),t<0&&(r.y+=r.height,r.height=-r.height),l||c},polar:function(n,r){var e=r.r0<=r.r?1:-1;if(e<0){var t=r.r;r.r=r.r0,r.r0=t}var a=Y(r.r,n.r),i=F(r.r0,n.r0);r.r=a,r.r0=i;var s=a-i<0;if(e<0){var t=r.r;r.r=r.r0,r.r0=t}return s}},H={cartesian2d:function(n,r,e,t,a,i,s,o,h){var u=new ue({shape:ce({},t),z2:1});if(u.__dataIndex=e,u.name="item",i){var l=u.shape,c=a?"height":"width";l[c]=0}return u},polar:function(n,r,e,t,a,i,s,o,h){var u=!a&&h?j:de,l=new u({shape:t,z2:1});l.name="item";var c=fe(a);if(l.calculateTextPosition=Xe(c,{isRoundCap:u===j}),i){var g=l.shape,d=a?"r":"endAngle",v={};g[d]=a?t.r0:t.startAngle,v[d]=t[d],(o?O:B)(l,{shape:v},i)}return l}};function qe(n,r){var e=n.get("realtimeSort",!0),t=r.getBaseAxis();if(e&&t.type==="category"&&r.type==="cartesian2d")return{baseAxis:t,otherAxis:r.getOtherAxis(t)}}function K(n,r,e,t,a,i,s,o){var h,u;i?(u={x:t.x,width:t.width},h={y:t.y,height:t.height}):(u={y:t.y,height:t.height},h={x:t.x,width:t.width}),o||(s?O:B)(e,{shape:h},r,a,null);var l=r?n.baseAxis.model:null;(s?O:B)(e,{shape:u},l,a)}function J(n,r){for(var e=0;e<r.length;e++)if(!isFinite(n[r[e]]))return!0;return!1}var He=["x","y","width","height"],Ke=["cx","cy","r","startAngle","endAngle"],Q={cartesian2d:function(n){return!J(n,He)},polar:function(n){return!J(n,Ke)}},V={cartesian2d:function(n,r,e){var t=n.getItemLayout(r),a=e?Qe(e,t):0,i=t.width>0?1:-1,s=t.height>0?1:-1;return{x:t.x+i*a/2,y:t.y+s*a/2,width:t.width-i*a,height:t.height-s*a}},polar:function(n,r,e){var t=n.getItemLayout(r);return{cx:t.cx,cy:t.cy,r0:t.r0,r:t.r,startAngle:t.startAngle,endAngle:t.endAngle,clockwise:t.clockwise}}};function Je(n){return n.startAngle!=null&&n.endAngle!=null&&n.startAngle===n.endAngle}function fe(n){return function(r){var e=r?"Arc":"Angle";return function(t){switch(t){case"start":case"insideStart":case"end":case"insideEnd":return t+e;default:return t}}}(n)}function ee(n,r,e,t,a,i,s,o){var h=r.getItemVisual(e,"style");if(o){if(!i.get("roundCap")){var l=n.shape,c=Ze(t.getModel("itemStyle"),l,!0);ce(l,c),n.setShape(l)}}else{var u=t.get(["itemStyle","borderRadius"])||0;n.setShape("r",u)}n.useStyle(h);var g=t.getShallow("cursor");g&&n.attr("cursor",g);var d=o?s?a.r>=a.r0?"endArc":"startArc":a.endAngle>=a.startAngle?"endAngle":"startAngle":s?a.height>=0?"bottom":"top":a.width>=0?"right":"left",v=Le(t);Ce(n,v,{labelFetcher:i,labelDataIndex:e,defaultText:Me(i.getData(),e),inheritColor:h.fill,defaultOpacity:h.opacity,defaultOutsidePosition:d});var b=n.getTextContent();if(o&&b){var m=t.get(["label","position"]);n.textConfig.inside=m==="middle"?!0:null,ze(n,m==="outside"?d:m,fe(s),t.get(["label","rotate"]))}Oe(b,v,i.getRawValue(e),function(p){return Ve(r,p)});var A=t.getModel(["emphasis"]);ke(n,A.get("focus"),A.get("blurScope"),A.get("disabled")),Re(n,t),Je(a)&&(n.style.fill="none",n.style.stroke="none",ie(n.states,function(p){p.style&&(p.style.fill=p.style.stroke="none")}))}function Qe(n,r){var e=n.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var t=n.get(["itemStyle","borderWidth"])||0,a=isNaN(r.width)?Number.MAX_VALUE:Math.abs(r.width),i=isNaN(r.height)?Number.MAX_VALUE:Math.abs(r.height);return Math.min(t,a,i)}var et=function(){function n(){}return n}(),te=function(n){k(r,n);function r(e){var t=n.call(this,e)||this;return t.type="largeBar",t}return r.prototype.getDefaultShape=function(){return new et},r.prototype.buildPath=function(e,t){for(var a=t.points,i=this.baseDimIdx,s=1-this.baseDimIdx,o=[],h=[],u=this.barWidth,l=0;l<a.length;l+=3)h[i]=u,h[s]=a[l+2],o[i]=a[l+i],o[s]=a[l+s],e.rect(o[0],o[1],h[0],h[1])},r}(oe);function re(n,r,e,t){var a=n.getData(),i=a.getLayout("valueAxisHorizontal")?1:0,s=a.getLayout("largeDataIndices"),o=a.getLayout("size"),h=n.getModel("backgroundStyle"),u=a.getLayout("largeBackgroundPoints");if(u){var l=new te({shape:{points:u},incremental:!!t,silent:!0,z2:0});l.baseDimIdx=i,l.largeDataIndices=s,l.barWidth=o,l.useStyle(h.getItemStyle()),r.add(l),e&&e.push(l)}var c=new te({shape:{points:a.getLayout("largePoints")},incremental:!!t,ignoreCoarsePointer:!0,z2:1});c.baseDimIdx=i,c.largeDataIndices=s,c.barWidth=o,r.add(c),c.useStyle(a.getVisual("style")),c.style.stroke=null,U(c).seriesIndex=n.seriesIndex,n.get("silent")||(c.on("mousedown",ae),c.on("mousemove",ae)),e&&e.push(c)}var ae=Te(function(n){var r=this,e=tt(r,n.offsetX,n.offsetY);U(r).dataIndex=e>=0?e:null},30,!1);function tt(n,r,e){for(var t=n.baseDimIdx,a=1-t,i=n.shape.points,s=n.largeDataIndices,o=[],h=[],u=n.barWidth,l=0,c=i.length/3;l<c;l++){var g=l*3;if(h[t]=u,h[a]=i[g+2],o[t]=i[g+t],o[a]=i[g+a],h[a]<0&&(o[a]+=h[a],h[a]=-h[a]),r>=o[0]&&r<=o[0]+h[0]&&e>=o[1]&&e<=o[1]+h[1])return s[l]}return-1}function pe(n,r,e){if(ge(e,"cartesian2d")){var t=r,a=e.getArea();return{x:n?t.x:a.x,y:n?a.y:t.y,width:n?t.width:a.width,height:n?a.height:t.height}}else{var a=e.getArea(),i=r;return{cx:a.cx,cy:a.cy,r0:n?a.r0:i.r0,r:n?a.r:i.r,startAngle:n?i.startAngle:0,endAngle:n?i.endAngle:Math.PI*2}}}function rt(n,r,e){var t=n.type==="polar"?de:ue;return new t({shape:pe(r,e,n),silent:!0,z2:0})}const at=je;function it(n){n.registerChartView(at),n.registerSeriesModel(Fe),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,Be(We,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Ee("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,Ne("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(r,e){var t=r.componentType||"series";e.eachComponent({mainType:t,query:r},function(a){r.sortInfo&&a.axis.setCategorySortInfo(r.sortInfo)})})}export{it as i};
